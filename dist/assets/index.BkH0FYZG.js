/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as a,c as t,b as s,e as l,w as o,g as i,f as m,i as r,k as d,E as u}from"./index.ABWJOL2Q.js";import{E as n}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as c}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              *//* empty css             *//* empty css               */import{a as p,E as v}from"./form-item.ujPiwBAF.js";import{C as j,a as g,b as y,c as f,d as _}from"./configmaps.BgmpeECD.js";import{g as b}from"./k8s.DUZ1Kw0R.js";import{_ as w}from"./index.CLE9PzC_.js";import k from"./table.L0OdS0XE.js";import x from"./form.KHIS-fIp.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./index.D4uEcQv3.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./monaco-editor-vue3.es.BmYKexe9.js";import"./js-yaml.B_ZKWvuw.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./popover.DFR01WU1.js";import"./dropdown.Co_mIot6.js";import"./age.Du5VDnjl.js";import"./card.RgDT494R.js";import"./tab-pane.fs024GHS.js";import"./index.C5gbd99D.js";import"./col.BzMVCOvM.js";import"./index.B0d1JK95.js";/* empty css                    *//* empty css              *//* empty css                       */import"./index.DINKPDpR.js";import"./key-value.C1obDZCo.js";import"./namespaces.DIn9v7pI.js";const C={class:"dycloud-table-box"},h={class:"dycloud-btn-list"},z={key:0},E={class:"dycloud-pagination"},V={key:0},I={class:"dialog-footer"},N={key:1},S={class:"dialog-footer"},U={name:"ConfigMaps"},A=Object.assign(U,{setup(U){const A=e({}),D=e(1),L=e(0),F=e(10),M=e([]),O=e(""),Y=e({keywords:"",namespace:""}),q=e(!1),H=()=>{Y.value.keywords=""},K=()=>{D.value=1,F.value=10,B()},R=e=>{F.value=e,B()},W=e=>{D.value=e,B()},B=async()=>{const e=await j({cluster_id:Y.value.cluster_id,page:D.value,pageSize:F.value,namespace:Y.value.namespace,keyword:Y.value.keywords});0===e.code&&(M.value=e.data.items,L.value=e.data.total,D.value=e.data.page,F.value=e.data.pageSize)},G=async e=>{P.value="update",O.value="编辑";const a=await g({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,configmapName:e.metadata.name});a.data.items&&a.data.items.code?r({type:"error",message:a.data.items.message}):0===a.code&&(A.value=a.data.items,q.value=!0,$.value=!0)},J=e(!1),P=e(""),Q=async e=>{P.value="update",O.value="编辑";const a=await g({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,configmapName:e.metadata.name});a.data.items&&a.data.items.code?r({type:"error",message:a.data.items.message}):0===a.code&&(A.value=a.data.items,q.value=!1,J.value=!0)},T=()=>{J.value=!1,$.value=!1,A.value={}},X=async e=>{e.visible=!1;const a=await y({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,configmapName:e.metadata.name});a.data.items&&a.data.items.code?r({type:"error",message:a.data.items.message}):0===a.code&&(r({type:"success",message:"删除成功"}),B())},Z=async e=>{let a;switch(P.value){case"create":a=await f({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,content:e});break;case"update":a=await _({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,configmapName:e.metadata.name,content:e});break;default:a=await f({cluster_id:Y.value.cluster_id,content:e})}a.data.items&&a.data.items.code?r({type:"error",message:a.data.items.message}):0===a.code&&(T(),(async e=>{0===e.code&&(r({type:"success",message:e.msg}),B())})(a))},$=e(!1),ee=async e=>{const a=await g({cluster_id:Y.value.cluster_id,namespace:e.metadata.namespace,configmaoName:e.metadata.name});a.data.items&&a.data.items.code?r({type:"error",message:a.data.items.message}):0===a.code&&(O.value="详情",A.value=a.data.items,A.value.cluster_id=Y.value.cluster_id,q.value=!0,J.value=!0)};return window.addEventListener("setItemCluster",(e=>{Y.value.cluster_id=parseInt(localStorage.getItem("cluster_id"))})),window.addEventListener("setItemNamespace",(e=>{Y.value.namespace=localStorage.getItem("namespace"),B()})),(e,r)=>{const j=d,g=p,y=u,f=v,_=c,U=n;return a(),t("div",null,[s("div",C,[s("div",h,[l(f,{ref:"searchForm",inline:!0,model:Y.value},{default:o((()=>[l(g,{label:"名称"},{default:o((()=>[l(j,{modelValue:Y.value.keywords,"onUpdate:modelValue":r[0]||(r[0]=e=>Y.value.keywords=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),l(g,null,{default:o((()=>[l(y,{size:"small",type:"primary",icon:"search",onClick:K},{default:o((()=>r[5]||(r[5]=[i("查询")]))),_:1}),l(y,{size:"small",icon:"refresh",onClick:H},{default:o((()=>r[6]||(r[6]=[i("重置")]))),_:1})])),_:1}),l(g,null,{default:o((()=>[l(y,{size:"small",type:"primary",icon:"plus",onClick:r[1]||(r[1]=e=>(P.value="create",O.value="创建",A.value=b("configmaps",Y.value.namespace,""),q.value=!1,void(J.value=!0)))},{default:o((()=>r[7]||(r[7]=[i("YAML")]))),_:1}),l(y,{size:"small",type:"primary",icon:"plus",onClick:r[2]||(r[2]=e=>(async()=>{P.value="create",O.value="创建",q.value=!1,A.value=b("configmapsinit",Y.value.namespace),$.value=!0})())},{default:o((()=>r[8]||(r[8]=[i("新增")]))),_:1})])),_:1})])),_:1},8,["model"])]),M.value?(a(),t("div",z,[l(k,{"table-data":M.value,onYaml_update:Q,onUpdate:G,onDetail:ee,onDelete:X},null,8,["table-data"])])):m("",!0)]),s("div",E,[l(_,{"current-page":D.value,"page-size":F.value,"page-sizes":[10,30,50,100],total:L.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:W,onSizeChange:R},null,8,["current-page","page-size","total"])]),$.value?(a(),t("div",V,[l(U,{modelValue:$.value,"onUpdate:modelValue":r[3]||(r[3]=e=>$.value=e),title:"新增",width:"70%"},{default:o((()=>[s("div",I,[l(x,{cluster:Y.value.cluster_id,form:A.value,readonly:q.value,onClose:T,onEnter:Z},null,8,["cluster","form","readonly"])])])),_:1},8,["modelValue"])])):m("",!0),J.value?(a(),t("div",N,[l(U,{modelValue:J.value,"onUpdate:modelValue":r[4]||(r[4]=e=>J.value=e),width:"60%",title:O.value},{default:o((()=>[s("div",S,[l(w,{data:A.value,"read-only":q.value,onClose:T,onEnter:Z},null,8,["data","read-only"])])])),_:1},8,["modelValue","title"])])):m("",!0)])}}});export{A as default};
