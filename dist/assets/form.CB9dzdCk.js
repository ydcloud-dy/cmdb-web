/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as a,c as t,e as l,w as o,b as r,F as n,v as u,g as s,E as d,k as i,h as p,f as m}from"./index.ABWJOL2Q.js";import{E as c}from"./card.RgDT494R.js";/* empty css               *//* empty css             */import{E as f,a as y}from"./tab-pane.fs024GHS.js";import{E as v,a as h}from"./col.BzMVCOvM.js";/* empty css            */import{E as b,a as g}from"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               */import{a as k,E as j}from"./form-item.ujPiwBAF.js";import{_ as x}from"./index.B0d1JK95.js";import{_,a as w}from"./key-value.C1obDZCo.js";import{E as V}from"./upload.-Ej7EZzx.js";import"./progress.KCbgDfe_.js";/* empty css              */import"./strings.C2tuonvC.js";import"./index.C5gbd99D.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./castArray.9wqFpW2Z.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";/* empty css                    *//* empty css              *//* empty css                       */import"./checkbox.BcMUmSPv.js";import"./index.DINKPDpR.js";import"./namespaces.DIn9v7pI.js";import"./cloneDeep.BwH6oqGn.js";const C="function"==typeof atob,A="function"==typeof btoa,U="function"==typeof Buffer,O="function"==typeof TextDecoder?new TextDecoder:void 0,F="function"==typeof TextEncoder?new TextEncoder:void 0,E=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),B=(()=>{let e={};return E.forEach(((a,t)=>e[a]=t)),e})(),S=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,q=String.fromCharCode.bind(String),z="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,a=e=>e)=>new Uint8Array(Array.prototype.slice.call(e,0).map(a)),D=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),T=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Z=e=>{let a,t,l,o,r="";const n=e.length%3;for(let u=0;u<e.length;){if((t=e.charCodeAt(u++))>255||(l=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");a=t<<16|l<<8|o,r+=E[a>>18&63]+E[a>>12&63]+E[a>>6&63]+E[63&a]}return n?r.slice(0,n-3)+"===".substring(n):r},M=A?e=>btoa(e):U?e=>Buffer.from(e,"binary").toString("base64"):Z,N=U?e=>Buffer.from(e).toString("base64"):e=>{let a=[];for(let t=0,l=e.length;t<l;t+=4096)a.push(q.apply(null,e.subarray(t,t+4096)));return M(a.join(""))},J=e=>{if(e.length<2)return(a=e.charCodeAt(0))<128?e:a<2048?q(192|a>>>6)+q(128|63&a):q(224|a>>>12&15)+q(128|a>>>6&63)+q(128|63&a);var a=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return q(240|a>>>18&7)+q(128|a>>>12&63)+q(128|a>>>6&63)+q(128|63&a)},K=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,L=e=>e.replace(K,J),P=U?e=>Buffer.from(e,"utf8").toString("base64"):F?e=>N(F.encode(e)):e=>M(L(e)),R=(e,a=!1)=>a?D(P(e)):P(e),I=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W=e=>{switch(e.length){case 4:var a=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return q(55296+(a>>>10))+q(56320+(1023&a));case 3:return q((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return q((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},G=e=>e.replace(I,W),H=e=>{if(e=e.replace(/\s+/g,""),!S.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let a,t,l,o="";for(let r=0;r<e.length;)a=B[e.charAt(r++)]<<18|B[e.charAt(r++)]<<12|(t=B[e.charAt(r++)])<<6|(l=B[e.charAt(r++)]),o+=64===t?q(a>>16&255):64===l?q(a>>16&255,a>>8&255):q(a>>16&255,a>>8&255,255&a);return o},Q=C?e=>atob(T(e)):U?e=>Buffer.from(e,"base64").toString("binary"):H,X=U?e=>z(Buffer.from(e,"base64")):e=>z(Q(e),(e=>e.charCodeAt(0))),Y=U?e=>Buffer.from(e,"base64").toString("utf8"):O?e=>O.decode(X(e)):e=>G(Q(e)),$=e=>T(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),ee=e=>Y($(e)),ae=R,te=ee,le={style:{"margin-top":"20px"}},oe={style:{width:"98%"},class:"tab-table"},re={align:"left"},ne={name:"SecretData"},ue=Object.assign(ne,{props:{form:{default:function(){return{}},type:Object},base64checked:{default:function(){return!1},type:Boolean}},setup(i,{expose:p}){const m=i,f=e([]);(()=>{if(m.form)for(const e in m.form)if(Object.prototype.hasOwnProperty.call(m.form,e)){const a=te(m.form[e]);f.value.push({index:Math.random(),key:e,value:a})}})();const y=()=>{f.value.push({index:Math.random(),key:"",value:""})},v=e=>{const a=new FileReader;return a.readAsText(e),a.onerror=e=>{},a.onload=()=>{const t={index:Math.random(),key:e.name,value:a.result};f.value.push(t)},!1};return p({transformationformat:async e=>{(e=>{if(f.value&&f.value.length>0){const a={};for(let e=0;e<f.value.length;e++)""!==f.value[e].key&&(a[f.value[e].key]=ae(f.value[e].value));e.data=a}})(e)}}),(e,i)=>{const p=d,m=V,h=c;return a(),t("div",le,[l(h,{class:"box-card",shadow:"hover"},{default:o((()=>[r("table",oe,[i[3]||(i[3]=r("tr",null,[r("th",{scope:"col",width:"48%"},[r("label",null,"键")]),r("th",{scope:"col",width:"48%"},[r("label",null,"值")]),r("th",{align:"left"})],-1)),(a(!0),t(n,null,u(f.value,(e=>(a(),t("tr",{key:e.index},[r("td",null,[l(x,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,placeholder:"键",clearable:"","item-type":"input"},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[l(x,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"值",clearable:"","item-type":"textarea"},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[l(p,{type:"danger",link:"",icon:"delete",size:"small",onClick:a=>(e=>{for(let a=0;a<f.value.length;a++)f.value[a]===e&&f.value.splice(a,1)})(e)},{default:o((()=>i[0]||(i[0]=[s("删除 ")]))),_:2},1032,["onClick"])])])))),128)),r("tr",null,[r("td",re,[l(p,{size:"small",type:"primary",link:"",icon:"plus",onClick:y},{default:o((()=>i[1]||(i[1]=[s("添加")]))),_:1}),l(m,{"before-upload":v,action:""},{default:o((()=>[l(p,{size:"small",type:"primary",link:"",icon:"UploadFilled"},{default:o((()=>i[2]||(i[2]=[s("上传")]))),_:1})])),_:1})])])])])),_:1})])}}}),se={style:{"margin-top":"20px"}},de={style:{width:"100%",padding:"0"},class:"tab-table"},ie={align:"left"},pe={name:"SecretDockerData"},me=Object.assign(pe,{props:{form:{default:function(){return{}},type:Object}},setup(p,{expose:m}){const f=p,y=e([]);(()=>{if(f.form&&f.form[".dockerconfigjson"]){const e=te(f.form[".dockerconfigjson"]),a=JSON.parse(e).auths;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&y.value.push({registry:t,username:a[t].username,password:a[t].password})}})();const b=()=>{y.value.push({registry:"",username:"",password:""})},g=e({});return m({transformationformat:async e=>{(e=>{g.value.auths={};for(const a of y.value)a.registry&&(g.value.auths[a.registry]={username:a.username,password:a.password,auth:ae(a.username+":"+a.password)}),e.data={".dockerconfigjson":ae(JSON.stringify(g.value))}})(e)}}),(e,p)=>{const m=i,f=d,g=v,k=h,j=c;return a(),t("div",se,[l(j,{class:"box-card",shadow:"hover"},{header:o((()=>p[0]||(p[0]=[r("div",{class:"card-header"},[r("span",null,"私有镜像仓库登录密钥")],-1)]))),default:o((()=>[l(k,null,{default:o((()=>[l(g,{span:24},{default:o((()=>[r("table",de,[p[3]||(p[3]=r("tr",null,[r("th",{scope:"col",width:"30%"},[r("label",null,"仓库地址")]),r("th",{scope:"col",width:"30%"},[r("label",null,"用户名")]),r("th",{scope:"col",width:"30%"},[r("label",null,"密码")]),r("th")],-1)),(a(!0),t(n,null,u(y.value,((e,n)=>(a(),t("tr",{key:n},[r("td",null,[l(m,{modelValue:e.registry,"onUpdate:modelValue":a=>e.registry=a},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[l(x,{modelValue:e.username,"onUpdate:modelValue":a=>e.username=a,style:{width:"100%"},"item-type":"input"},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[l(x,{modelValue:e.password,"onUpdate:modelValue":a=>e.password=a,style:{width:"100%"},"item-type":"input",type:"password","show-password":""},null,8,["modelValue","onUpdate:modelValue"])]),r("td",null,[l(f,{type:"danger",link:"",icon:"delete",size:"small",onClick:e=>(e=>{y.value.splice(e,1)})(n)},{default:o((()=>p[1]||(p[1]=[s("删除 ")]))),_:2},1032,["onClick"])])])))),128)),r("tr",null,[r("td",ie,[l(f,{size:"small",type:"primary",link:"",icon:"plus",onClick:b},{default:o((()=>p[2]||(p[2]=[s("添加")]))),_:1})])])])])),_:1})])),_:1})])),_:1})])}}}),ce={style:{"margin-top":"20px"}},fe={name:"SecretCertificate"},ye=Object.assign(fe,{props:{form:{default:function(){return{}},type:Object}},setup(r,{expose:n}){const u=r,s=e({crt:"",key:""});0!==Object.keys(u.form).length&&(s.value={crt:te(u.form["tls.crt"]),key:te(u.form["tls.key"])});return n({transformationformat:async e=>{(e=>{s.value&&(e.data={"tls.crt":ae(s.value.crt),"tls.key":ae(s.value.key)})})(e)}}),(e,r)=>{const n=k,u=v,d=h,i=j,p=c;return a(),t("div",ce,[l(p,{class:"box-card",shadow:"hover"},{default:o((()=>[l(i,{ref:"form","label-position":"top",model:s.value},{default:o((()=>[l(d,{gutter:20},{default:o((()=>[l(u,{span:12},{default:o((()=>[l(n,{label:"Cert",prop:"crt"},{default:o((()=>[l(x,{modelValue:s.value.crt,"onUpdate:modelValue":r[0]||(r[0]=e=>s.value.crt=e),style:{width:"100%"},"item-type":"textarea"},null,8,["modelValue"])])),_:1})])),_:1}),l(u,{span:12},{default:o((()=>[l(n,{label:"Key",prop:"key"},{default:o((()=>[l(x,{modelValue:s.value.key,"onUpdate:modelValue":r[1]||(r[1]=e=>s.value.key=e),style:{width:"100%"},"item-type":"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])}}}),ve={class:"grid-content bg-purple-light"},he={style:{float:"right","margin-top":"10px"}},be={name:"FormBlock"},ge=Object.assign(be,{props:{form:{default:function(){return{}},type:Object},cluster:{default:function(){return 0},type:Number},readonly:{default:function(){return!1},type:Boolean}},emits:["close","enter"],setup(n,{emit:u}){const i=u,V=n,C=e=>{"Opaque"===e&&(O.value="Opaque"),"kubernetes.io/dockerconfigjson"===e&&(O.value="dockerconfigjson"),"kubernetes.io/tls"===e&&(O.value="tls")},A=e({}),U=e({}),O=e("data"),F=e(!1),E=e({"metadata.name":[{required:!0,message:"请输入名称",trigger:"blur"}],"metadata.namespace":[{required:!0,message:"请选择命名空间",trigger:"blur"}]});A.value=V.form,U.value=V.cluster,F.value=V.readonly,C(A.value.type);const B=async e=>{A.value.metadata&&(A.value.metadata.namespace=e)},S=e(null),q=()=>{S.value.resetFields(),i("close")},z=e(null),D=e(null),T=e(null),Z=e(null),M=e(null),N=async()=>{await z.value.transformationformat(A.value,"labels"),await D.value.transformationformat(A.value,"annotations"),"Opaque"===A.value.type&&await T.value.transformationformat(A.value),"kubernetes.io/dockerconfigjson"===A.value.type&&await Z.value.transformationformat(A.value),"kubernetes.io/tls"===A.value.type&&await M.value.transformationformat(A.value),i("enter",A.value)},J=e=>{O.value=e.name};return(e,n)=>{const u=k,i=v,V=b,K=g,L=h,P=f,R=y,I=j,W=d,G=c;return a(),t("div",null,[l(G,{class:"el-card"},{default:o((()=>[l(I,{ref_key:"FormBlock",ref:S,model:A.value,rules:E.value,"label-width":"100px"},{default:o((()=>[l(L,{gutter:24},{default:o((()=>[l(i,{span:8},{default:o((()=>[l(u,{label:"名称",prop:"metadata.name"},{default:o((()=>[F.value?(a(),p(x,{key:0,modelValue:A.value.metadata.name,"onUpdate:modelValue":n[0]||(n[0]=e=>A.value.metadata.name=e),style:{width:"100%"},disabled:"","item-type":"input"},null,8,["modelValue"])):(a(),p(x,{key:1,modelValue:A.value.metadata.name,"onUpdate:modelValue":n[1]||(n[1]=e=>A.value.metadata.name=e),placeholder:"请输入名称","item-type":"input",style:{width:"100%"}},null,8,["modelValue"]))])),_:1})])),_:1}),l(i,{span:8},{default:o((()=>[l(u,{label:"命名空间",required:"",prop:"metadata.namespace"},{default:o((()=>[F.value?(a(),p(x,{key:0,modelValue:A.value.metadata.namespace,"onUpdate:modelValue":n[2]||(n[2]=e=>A.value.metadata.namespace=e),style:{width:"100%"},disabled:"","item-type":"select2"},null,8,["modelValue"])):(a(),p(_,{key:1,cluster:U.value,namespace:A.value.metadata.namespace,onEnter:B},null,8,["cluster","namespace"]))])),_:1})])),_:1}),l(i,{span:8},{default:o((()=>[l(u,{label:"类型"},{default:o((()=>[F.value?(a(),p(x,{key:0,modelValue:A.value.type,"onUpdate:modelValue":n[3]||(n[3]=e=>A.value.type=e),style:{width:"100%"},disabled:"","item-type":"input"},null,8,["modelValue"])):(a(),p(K,{key:1,modelValue:A.value.type,"onUpdate:modelValue":n[4]||(n[4]=e=>A.value.type=e),onChange:n[5]||(n[5]=e=>C(A.value.type))},{default:o((()=>[l(V,{label:"Opaque",value:"Opaque"}),l(V,{label:"私有镜像仓库登录密钥",value:"kubernetes.io/dockerconfigjson"}),l(V,{label:"TLS证书",value:"kubernetes.io/tls"})])),_:1},8,["modelValue"]))])),_:1})])),_:1})])),_:1}),l(i,{span:24},{default:o((()=>[l(R,{ref:"tabs",modelValue:O.value,"onUpdate:modelValue":n[6]||(n[6]=e=>O.value=e),"tab-position":"top",type:"border-card",onTabClick:J},{default:o((()=>["Opaque"===A.value.type?(a(),p(P,{key:0,label:"数据",name:"Opaque"},{default:o((()=>[l(ue,{ref_key:"opaque",ref:T,form:A.value.data},null,8,["form"])])),_:1})):m("",!0),"kubernetes.io/dockerconfigjson"===A.value.type?(a(),p(P,{key:1,label:"数据",name:"dockerconfigjson"},{default:o((()=>[l(me,{ref_key:"dockerconfigjson",ref:Z,form:A.value.data},null,8,["form"])])),_:1})):m("",!0),"kubernetes.io/tls"===A.value.type?(a(),p(P,{key:2,label:"数据",name:"tls"},{default:o((()=>[l(ye,{ref_key:"tls",ref:M,form:A.value.data},null,8,["form"])])),_:1})):m("",!0),l(P,{name:"Labels",label:"标签/注解"},{default:o((()=>[l(w,{ref_key:"labels",ref:z,title:"标签",form:A.value.metadata.labels},null,8,["form"]),l(w,{ref_key:"annotations",ref:D,title:"注解",form:A.value.metadata.annotations},null,8,["form"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),r("div",ve,[r("div",he,[l(W,{size:"small",onClick:q},{default:o((()=>n[7]||(n[7]=[s("取 消")]))),_:1}),l(W,{size:"small",type:"primary",onClick:N},{default:o((()=>n[8]||(n[8]=[s("确 定")]))),_:1})])])])),_:1})])}}});export{ge as default};
