/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,a,o as l,c as t,b as o,e as s,w as i,g as u,f as d,i as r,k as m,E as p}from"./index.ABWJOL2Q.js";import{E as n}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as c}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              */import{E as v}from"./popover.DFR01WU1.js";/* empty css             *//* empty css               */import{a as g,E as j}from"./form-item.ujPiwBAF.js";import f from"./form.B0l3O26X.js";import y from"./table.Cs87bZ63.js";import{s as b}from"./cloud_region.DtcSymib.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./index.D4uEcQv3.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./dropdown.Co_mIot6.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";/* empty css                    *//* empty css              */import"./index.DINKPDpR.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./stringFun.hIDu-B3o.js";const h=a=>e({url:"/cloudcmdb/cloud_platform/create",method:"post",data:a}),_={class:"dycloud-search-box"},x={class:"dycloud-table-box"},k={class:"dycloud-btn-list"},w={style:{"text-align":"right","margin-top":"8px"}},z={key:0},C={class:"dycloud-pagination"},V={key:0},E={name:"Index"},S=Object.assign(E,{setup(E){const S=a({}),U=a(1),I=a(0),F=a(10),A=a([]),B=a(""),D=a({}),O=a(!1),R=a([]),q=a([]),G=()=>{D.value={}},H=e=>{D.value=e,J()},L=()=>{U.value=1,F.value=10,J()},M=e=>{F.value=e,J()},N=e=>{U.value=e,J()},J=async()=>{const a=await(l={page:U.value,pageSize:F.value,...D.value},e({url:"/cloudcmdb/cloud_platform/list",method:"post",data:l}));var l;0===a.code&&(A.value=a.data.list,I.value=a.data.total,U.value=a.data.page,F.value=a.data.pageSize)};J();const K=a(!1),P=a(""),Q=async a=>{const l=await(t={id:a.id},e({url:"/cloudcmdb/cloud_platform/getById",method:"post",data:t}));var t;P.value="update",B.value="更新",0===l.code&&(S.value=l.data.cloud_platform,q.value=l.data.regions,K.value=!0)},T=async e=>{0===(await b({id:e.id})).code&&(r({type:"success",message:"操作成功"}),J())},W=()=>{K.value=!1,S.value={}},X=async a=>{a.visible=!1;var l;0===(await(l={id:a.id},e({url:"/cloudcmdb/cloud_platform/delete",method:"delete",data:l}))).code&&(r({type:"success",message:"删除成功"}),1===A.value.length&&U.value>1&&U.value--,J())},Y=e=>{R.value=e},Z=async()=>{const a=R.value.map((e=>e.id)),l=await(t={ids:a},e({url:"/cloudcmdb/cloud_platform/deleteByIds",method:"delete",data:t}));var t;0===l.code&&(r({type:"success",message:l.msg}),A.value.length===a.length&&U.value>1&&U.value--,O.value=!1,J())},$=async a=>{let l;switch(P.value){case"create":default:l=await h(a);break;case"update":l=await(t=a,e({url:"/cloudcmdb/cloud_platform/update",method:"put",data:t}))}var t;0===l.code&&(W(),(async e=>{0===e.code&&(r({type:"success",message:e.msg}),1===A.value.length&&U.value>1&&U.value--,J())})(l))};return(e,a)=>{const r=m,b=g,h=p,E=j,J=v,ee=c,ae=n;return l(),t("div",null,[o("div",_,[s(E,{ref:"searchForm",inline:!0,model:D.value},{default:i((()=>[s(b,{label:"名称"},{default:i((()=>[s(r,{modelValue:D.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value.name=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),s(b,null,{default:i((()=>[s(h,{size:"small",type:"primary",icon:"search",onClick:L},{default:i((()=>a[6]||(a[6]=[u("查询")]))),_:1}),s(h,{size:"small",icon:"refresh",onClick:G},{default:i((()=>a[7]||(a[7]=[u("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),o("div",x,[o("div",k,[s(h,{size:"small",type:"primary",icon:"plus",onClick:a[1]||(a[1]=e=>(P.value="create",B.value="创建",void(K.value=!0)))},{default:i((()=>a[8]||(a[8]=[u("新增")]))),_:1}),s(J,{modelValue:O.value,"onUpdate:modelValue":a[4]||(a[4]=e=>O.value=e),placement:"top",width:"160"},{reference:i((()=>[s(h,{icon:"delete",size:"small",disabled:!R.value.length,style:{"margin-left":"10px"},onClick:a[3]||(a[3]=e=>O.value=!0)},{default:i((()=>a[11]||(a[11]=[u("删除")]))),_:1},8,["disabled"])])),default:i((()=>[a[12]||(a[12]=o("p",null,"确定要删除吗？",-1)),o("div",w,[s(h,{size:"small",type:"primary",link:"",onClick:a[2]||(a[2]=e=>O.value=!1)},{default:i((()=>a[9]||(a[9]=[u("取消")]))),_:1}),s(h,{size:"small",type:"primary",onClick:Z},{default:i((()=>a[10]||(a[10]=[u("确定")]))),_:1})])])),_:1},8,["modelValue"])]),A.value?(l(),t("div",z,[s(y,{"table-data":A.value,onUpdate:Q,onSearch:H,onSelect:Y,onDelete:X,onRegion:T},null,8,["table-data"])])):d("",!0)]),o("div",C,[s(ee,{"current-page":U.value,"page-size":F.value,"page-sizes":[10,30,50,100],total:I.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:M},null,8,["current-page","page-size","total"])]),K.value?(l(),t("div",V,[s(ae,{modelValue:K.value,"onUpdate:modelValue":a[5]||(a[5]=e=>K.value=e),width:"40%",title:B.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{default:i((()=>[s(f,{form:S.value,regions:q.value,onClose:W,type:P.value,onEnter:$},null,8,["form","regions","type"])])),_:1},8,["modelValue","title"])])):d("",!0)])}}});export{S as default};
