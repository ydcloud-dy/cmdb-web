/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,_ as a,o,c as s,e as t,w as l,g as r,B as i,di as n,i as p,E as d,a as u}from"./index.ABWJOL2Q.js";import{E as m}from"./upload.-Ej7EZzx.js";import"./progress.KCbgDfe_.js";/* empty css               */import{I as c,i as f,a as g}from"./image.CN53lrx2.js";const b=a=>e({url:"/fileUploadAndDownload/getFileList",method:"post",data:a}),w=a=>e({url:"/fileUploadAndDownload/deleteFile",method:"post",data:a}),y=a=>e({url:"/fileUploadAndDownload/editFileName",method:"post",data:a}),_=a=>e({url:"/fileUploadAndDownload/importURL",method:"post",data:a}),j=a(Object.assign({name:"UploadImage"},{__name:"image",props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},emits:["on-success"],setup(e,{emit:a}){const u=a,f=e,g=e=>{const a="image/jpeg"===e.type,o="image/png"===e.type;if(!a&&!o)return p.error("上传头像图片只能是 jpg或png 格式!"),!1;const s=e.size/1024<f.fileSize;if(!s){return new c(e,f.fileSize,f.maxWH).compress()}return s},b=e=>{const{data:a}=e;a.file&&u("on-success",a.file.url)};return(e,a)=>{const p=d,u=m;return o(),s("div",null,[t(u,{action:"".concat(i(n)(),"/fileUploadAndDownload/upload"),"show-file-list":!1,"on-success":b,"before-upload":g,multiple:!1},{default:l((()=>[t(p,{type:"primary"},{default:l((()=>a[0]||(a[0]=[r("压缩上传")]))),_:1})])),_:1},8,["action"])])}}}),[["__scopeId","data-v-2dbbcee1"]]),U=Object.assign({name:"UploadCommon"},{__name:"common",emits:["on-success"],setup(e,{emit:a}){const c=a,b=u(!1),w=e=>{b.value=!0;const a=e.size/1024/1024<.5,o=e.size/1024/1024<5,s=f(e.type),t=g(e.type);let l=!0;return s||t||(p.error("上传图片只能是 jpg,png,svg,webp 格式, 上传视频只能是 mp4,webm 格式!"),b.value=!1,l=!1),!o&&s&&(p.error("上传视频大小不能超过 5MB"),b.value=!1,l=!1),!a&&t&&(p.error("未压缩的上传图片大小不能超过 500KB，请使用压缩上传"),b.value=!1,l=!1),l},y=e=>{const{data:a}=e;a.file&&c("on-success",a.file.url)},_=()=>{p({type:"error",message:"上传失败"}),b.value=!1};return(e,a)=>{const p=d,u=m;return o(),s("div",null,[t(u,{action:"".concat(i(n)(),"/fileUploadAndDownload/upload"),"before-upload":w,"on-error":_,"on-success":y,"show-file-list":!1,multiple:"",class:"upload-btn"},{default:l((()=>[t(p,{type:"primary"},{default:l((()=>a[0]||(a[0]=[r("普通上传")]))),_:1})])),_:1},8,["action"])])}}});export{j as U,U as _,w as d,y as e,b as g,_ as i};
