/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as a,c as t,b as s,e as l,w as o,g as i,f as r,i as m,k as u,E as c}from"./index.ABWJOL2Q.js";import{E as d}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as n}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              *//* empty css             *//* empty css               */import{a as p,E as v}from"./form-item.ujPiwBAF.js";import{S as j,a as g,b as y,c as _,d as f}from"./serviceaccounts.FyKKM7DW.js";import{g as b}from"./k8s.DUZ1Kw0R.js";import{_ as w}from"./index.CLE9PzC_.js";import k from"./table.Dd9QgKpj.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./index.D4uEcQv3.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./monaco-editor-vue3.es.BmYKexe9.js";import"./js-yaml.B_ZKWvuw.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./popover.DFR01WU1.js";import"./dropdown.Co_mIot6.js";import"./age.Du5VDnjl.js";const x={class:"dycloud-table-box"},C={class:"dycloud-btn-list"},h={key:0},z={class:"dycloud-pagination"},E={key:0},A={class:"dialog-footer"},S={name:"ServiceAccounts"},I=Object.assign(S,{setup(S){const I=e({}),V=e(1),N=e(0),U=e(10),D=e([]),L=e(""),F=e({keywords:"",namespace:""}),O=e(!1),q=()=>{F.value.keywords=""},H=()=>{V.value=1,U.value=10,G()},M=e=>{U.value=e,G()},B=e=>{V.value=e,G()},G=async()=>{const e=await j({cluster_id:F.value.cluster_id,page:V.value,pageSize:U.value,namespace:F.value.namespace,keyword:F.value.keywords});0===e.code&&(D.value=e.data.items,N.value=e.data.total,V.value=e.data.page,U.value=e.data.pageSize)},J=e(!1),K=e(""),P=async e=>{K.value="update",L.value="编辑";const a=await g({cluster_id:F.value.cluster_id,namespace:e.metadata.namespace,serviceAccountName:e.metadata.name});0===a.code&&(I.value=a.data.items,O.value=!1,J.value=!0)},Q=()=>{J.value=!1,I.value={}},R=async e=>{e.visible=!1;const a=await y({cluster_id:F.value.cluster_id,namespace:e.metadata.namespace,serviceAccountName:e.metadata.name});a.data.items&&a.data.items.code?m({type:"error",message:a.data.items.message}):0===a.code&&(m({type:"success",message:"删除成功"}),G())},T=async e=>{let a;switch(K.value){case"create":a=await _({cluster_id:F.value.cluster_id,namespace:e.metadata.namespace,content:e});break;case"update":a=await f({cluster_id:F.value.cluster_id,namespace:e.metadata.namespace,serviceAccountName:e.metadata.name,content:e});break;default:a=await _({cluster_id:F.value.cluster_id,content:e})}a.data.items&&a.data.items.code?m({type:"error",message:a.data.items.message}):0===a.code&&(Q(),(async e=>{0===e.code&&(m({type:"success",message:e.msg}),G())})(a))},W=async e=>{const a=await g({cluster_id:F.value.cluster_id,namespace:e.metadata.namespace,serviceAccountName:e.metadata.name});0===a.code&&(L.value="详情",I.value=a.data.items,O.value=!0),J.value=!0};return window.addEventListener("setItemCluster",(e=>{F.value.cluster_id=parseInt(localStorage.getItem("cluster_id"))})),window.addEventListener("setItemNamespace",(e=>{F.value.namespace=localStorage.getItem("namespace"),G()})),(e,m)=>{const j=u,g=p,y=c,_=v,f=n,S=d;return a(),t("div",null,[s("div",x,[s("div",C,[l(_,{ref:"searchForm",inline:!0,model:F.value},{default:o((()=>[l(g,{label:"名称"},{default:o((()=>[l(j,{modelValue:F.value.keywords,"onUpdate:modelValue":m[0]||(m[0]=e=>F.value.keywords=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),l(g,null,{default:o((()=>[l(y,{size:"small",type:"primary",icon:"search",onClick:H},{default:o((()=>m[3]||(m[3]=[i("查询")]))),_:1}),l(y,{size:"small",icon:"refresh",onClick:q},{default:o((()=>m[4]||(m[4]=[i("重置")]))),_:1})])),_:1}),l(g,null,{default:o((()=>[l(y,{size:"small",type:"primary",icon:"plus",onClick:m[1]||(m[1]=e=>(K.value="create",L.value="创建",O.value=!1,I.value=b("serviceaccounts",F.value.namespace,""),void(J.value=!0)))},{default:o((()=>m[5]||(m[5]=[i("新增")]))),_:1})])),_:1})])),_:1},8,["model"])]),D.value?(a(),t("div",h,[l(k,{"table-data":D.value,onUpdate:P,onDetail:W,onDelete:R},null,8,["table-data"])])):r("",!0)]),s("div",z,[l(f,{"current-page":V.value,"page-size":U.value,"page-sizes":[10,30,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:M},null,8,["current-page","page-size","total"])]),J.value?(a(),t("div",E,[l(S,{modelValue:J.value,"onUpdate:modelValue":m[2]||(m[2]=e=>J.value=e),width:"60%",title:L.value},{default:o((()=>[s("div",A,[l(w,{data:I.value,"read-only":O.value,onClose:Q,onEnter:T},null,8,["data","read-only"])])])),_:1},8,["modelValue","title"])])):r("",!0)])}}});export{I as default};
