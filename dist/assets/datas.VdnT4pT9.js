/*! 
 Build based on  
 Time : 1735190558000 */
import{a,o as t,c as e,b as o,e as r,w as l,g as u,F as i,v as s,h as d,t as n,i as c,E as h}from"./index.ABWJOL2Q.js";/* empty css                       */import{E as y,a as f}from"./checkbox.BcMUmSPv.js";/* empty css               */import{s as p}from"./authority.Ckl6dsTi.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";const v={class:"sticky top-0.5 z-10 my-4"},m={class:"clear-both pt-4"},I=Object.assign({name:"Datas"},{__name:"datas",props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(I,{expose:w,emit:g}){const b=I,j=a([]),A=a(!1),_=a=>{a&&a.forEach((a=>{const t={};t.authorityId=a.authorityId,t.authorityName=a.authorityName,j.value.push(t),a.children&&a.children.length&&_(a.children)}))},k=a([]);_(b.authority),b.row.dataAuthorityId&&b.row.dataAuthorityId.forEach((a=>{const t=j.value&&j.value.filter((t=>t.authorityId===a.authorityId))&&j.value.filter((t=>t.authorityId===a.authorityId))[0];k.value.push(t)}));const x=g,C=()=>{k.value=[...j.value],x("changeRow","dataAuthorityId",k.value),A.value=!0},E=()=>{k.value=j.value.filter((a=>a.authorityId===b.row.authorityId)),x("changeRow","dataAuthorityId",k.value),A.value=!0},R=()=>{const a=[];N(b.row,a),k.value=j.value.filter((t=>a.indexOf(t.authorityId)>-1)),x("changeRow","dataAuthorityId",k.value),A.value=!0},N=(a,t)=>{t.push(a.authorityId),a.children&&a.children.forEach((a=>{N(a,t)}))},O=async()=>{0===(await p(b.row)).code&&c({type:"success",message:"资源设置成功"})},V=()=>{k.value=k.value.filter((a=>a)),x("changeRow","dataAuthorityId",k.value),A.value=!0};return w({enterAndNext:()=>{O()},needConfirm:A}),(a,c)=>{const p=h,I=y,w=f;return t(),e("div",null,[o("div",v,[r(p,{class:"float-left",type:"primary",onClick:C},{default:l((()=>c[1]||(c[1]=[u("全选")]))),_:1}),r(p,{class:"float-left",type:"primary",onClick:E},{default:l((()=>c[2]||(c[2]=[u("本角色")]))),_:1}),r(p,{class:"float-left",type:"primary",onClick:R},{default:l((()=>c[3]||(c[3]=[u("本角色及子角色")]))),_:1}),r(p,{class:"float-right",type:"primary",onClick:O},{default:l((()=>c[4]||(c[4]=[u("确 定")]))),_:1})]),o("div",m,[r(w,{modelValue:k.value,"onUpdate:modelValue":c[0]||(c[0]=a=>k.value=a),onChange:V},{default:l((()=>[(t(!0),e(i,null,s(j.value,((a,e)=>(t(),d(I,{key:e,label:a},{default:l((()=>[u(n(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])])}}});export{I as default};
