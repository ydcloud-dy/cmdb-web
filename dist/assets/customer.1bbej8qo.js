/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,a,o as t,c as l,e as o,b as s,w as r,g as u,t as i,B as m,U as n,cu as c,i as d,E as p,k as v}from"./index.ABWJOL2Q.js";import{E as f}from"./drawer.XhtctEYG.js";import"./overlay.CDLw2uOw.js";/* empty css             */import{a as j,E as g}from"./form-item.ujPiwBAF.js";/* empty css              */import{E as y}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               */import{E as h,a as b}from"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                *//* empty css               */import{_ as w}from"./warningBar.BzThqhMC.js";import"./index.BRjlB3m5.js";import"./index.D4uEcQv3.js";import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";import"./isEqual.CtpQH3Dm.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";const _=a=>e({url:"/customer/customer",method:"post",data:a}),k={class:"dycloud-table-box"},x={class:"dycloud-btn-list"},C={class:"dycloud-pagination"},D={class:"flex justify-between items-center"},V=Object.assign({name:"Customer"},{__name:"customer",setup(V){const I=a({customerName:"",customerPhoneData:""}),z=a(1),E=a(0),P=a(10),U=a([]),N=e=>{P.value=e,A()},B=e=>{z.value=e,A()},A=async()=>{const a=await(t={page:z.value,pageSize:P.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(U.value=a.data.list,E.value=a.data.total,z.value=a.data.page,P.value=a.data.pageSize)};A();const S=a(!1),T=a(""),O=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;T.value="update",0===t.code&&(I.value=t.data.customer,S.value=!0)},q=()=>{S.value=!1,I.value={customerName:"",customerPhoneData:""}},F=async a=>{c.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(d({type:"success",message:"删除成功"}),1===U.value.length&&z.value>1&&z.value--,A())}))},L=async()=>{let a;switch(T.value){case"create":default:a=await _(I.value);break;case"update":a=await(t=I.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(q(),A())},G=()=>{T.value="create",S.value=!0};return(e,a)=>{const c=p,d=h,_=b,V=y,A=v,T=j,H=g,J=f;return t(),l("div",null,[o(w,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",k,[s("div",x,[o(c,{type:"primary",icon:"plus",onClick:G},{default:r((()=>a[3]||(a[3]=[u("新增")]))),_:1})]),o(_,{ref:"multipleTable",data:U.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(d,{type:"selection",width:"55"}),o(d,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,i(m(n)(e.row.CreatedAt)),1)])),_:1}),o(d,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(d,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(d,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(d,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(c,{type:"primary",link:"",icon:"edit",onClick:a=>O(e.row)},{default:r((()=>a[4]||(a[4]=[u("变更")]))),_:2},1032,["onClick"]),o(c,{type:"primary",link:"",icon:"delete",onClick:a=>F(e.row)},{default:r((()=>a[5]||(a[5]=[u("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",C,[o(V,{"current-page":z.value,"page-size":P.value,"page-sizes":[10,30,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:N},null,8,["current-page","page-size","total"])])]),o(J,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),"before-close":q,"show-close":!1},{header:r((()=>[s("div",D,[a[8]||(a[8]=s("span",{class:"text-lg"},"客户",-1)),s("div",null,[o(c,{onClick:q},{default:r((()=>a[6]||(a[6]=[u("取 消")]))),_:1}),o(c,{type:"primary",onClick:L},{default:r((()=>a[7]||(a[7]=[u("确 定")]))),_:1})])])])),default:r((()=>[o(H,{inline:!0,model:I.value,"label-width":"80px"},{default:r((()=>[o(T,{label:"客户名"},{default:r((()=>[o(A,{modelValue:I.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(T,{label:"客户电话"},{default:r((()=>[o(A,{modelValue:I.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{V as default};
