/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,q as a,o as t,c as l,cO as s,b as r,e as u,w as n,h as i,f as o}from"./index.ABWJOL2Q.js";import{E as p,a as v}from"./tab-pane.fs024GHS.js";import{a as m}from"./form-item.ujPiwBAF.js";import{E as d}from"./date-picker.CCiP3Fyg.js";/* empty css              */import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css               */import{i as c}from"./index.DrIIbIcU.js";import{M as f,N as h,G as y,l as g,n as b}from"./metrics.Dq7Dbl3h.js";import"./strings.C2tuonvC.js";import"./index.C5gbd99D.js";import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";import"./dayjs.min.DOWqlKAh.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./arrays.CvpzyGiz.js";import"./index.7ugBSK5z.js";import"./debounce.CkdGDwJt.js";import"./index.6ock-Gvr.js";import"./isEqual.CtpQH3Dm.js";const x={__name:"cpu",props:{data:{default:function(){return{}},type:Object}},setup(r){const u=e(),n=r,i=e([]),o=e([]),p=e([]),v=e([]),m=e({});return m.value=n.data,m.value.cpuRequests&&m.value.cpuRequests.length>0&&m.value.cpuRequests.forEach((function(e){const a=Math.round(100*parseFloat(e[1]))/100;(0!==a&&a>0||a<0)&&(i.value.push(s(e[0])),o.value.push(a))})),m.value.cpuUsage&&m.value.cpuUsage.length>0&&m.value.cpuUsage.forEach((function(e){const a=Math.round(100*parseFloat(e[1]))/100;(0!==a&&a>0||a<0)&&(i.value.push(s(e[0])),p.value.push(a))})),m.value.cpuLimits&&m.value.cpuLimits.length>0&&m.value.cpuLimits.forEach((function(e){const a=Math.round(100*parseFloat(e[1]))/100;(0!==a&&a>0||a<0)&&(i.value.push(s(e[0])),v.value.push(a))})),i.value=[...new Set(i.value)],a((()=>{var e,a;e=c(u.value),a={tooltip:{trigger:"axis",formatter:function(e){var a=e[0].axisValue+"<br/>";return e.forEach((function(e){a+=e.marker+e.seriesName+"："+e.data+" 核<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Limits","Requests","Usage"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"4%",right:"3%",bottom:"3%",containLabel:!0},xAxis:[{data:i.value}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 核"}}],series:[{name:"Limits",type:"line",areaStyle:{},data:v.value},{name:"Requests",type:"line",areaStyle:{},data:o.value},{name:"Usage",type:"line",areaStyle:{},data:p.value}]},e.setOption(a)})),(e,a)=>(t(),l("div",{ref_key:"main",ref:u,style:{width:"1000px",height:"400px"}},null,512))}},j={__name:"memory",props:{data:{default:function(){return{}},type:Object}},setup(r){const u=e(),n=r,i=e([]),o=e([]),p=e([]),v=e([]),m=e({});return m.value=n.data,m.value.memoryLimits&&m.value.memoryLimits.length>0&&m.value.memoryLimits.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),o.value.push(f(parseInt(e[1]))))})),m.value.memoryRequests&&m.value.memoryRequests.length>0&&m.value.memoryRequests.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),p.value.push(f(parseInt(e[1]))))})),m.value.memoryUsage&&m.value.memoryUsage.length>0&&m.value.memoryUsage.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),v.value.push(f(parseInt(e[1]))))})),i.value=[...new Set(i.value)],a((()=>{var e,a;e=c(u.value),a={tooltip:{trigger:"axis",formatter:function(e){var a=e[0].axisValue+"<br/>";return e.forEach((function(e){a+=e.marker+e.seriesName+"："+e.data+" Mi<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Limits","Requests","Usage"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"4%",right:"3%",bottom:"3%",containLabel:!0},xAxis:[{data:i.value}],yAxis:[{type:"value",axisLabel:{formatter:"{value} Mi"}}],series:[{name:"Limits",type:"line",areaStyle:{},data:o.value},{name:"Requests",type:"line",areaStyle:{},data:p.value},{name:"Usage",type:"line",areaStyle:{},data:v.value}]},e.setOption(a)})),(e,a)=>(t(),l("div",{ref_key:"main",ref:u,style:{width:"1000px",height:"400px"}},null,512))}},w={__name:"network",props:{data:{default:function(){return{}},type:Object}},setup(r){const u=e(),n=r,i=e([]),o=e([]),p=e([]),v=e({});return v.value=n.data,v.value.networkReceive&&v.value.networkReceive.length>0&&v.value.networkReceive.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),o.value.push(h(parseInt(e[1]))))})),v.value.networkTransmit&&v.value.networkTransmit.length>0&&v.value.networkTransmit.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),p.value.push(h(parseInt(e[1]))))})),i.value=[...new Set(i.value)],a((()=>{var e,a;e=c(u.value),a={tooltip:{trigger:"axis",formatter:function(e){var a=e[0].axisValue+"<br/>";return e.forEach((function(e){a+=e.marker+e.seriesName+"："+e.data+" KB<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Receive","Transmit"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"4%",right:"3%",bottom:"3%",containLabel:!0},xAxis:[{data:i.value}],yAxis:[{type:"value",axisLabel:{formatter:"{value} KB"}}],series:[{name:"Receive",type:"line",areaStyle:{},data:o.value},{name:"Transmit",type:"line",areaStyle:{},data:p.value}]},e.setOption(a)})),(e,a)=>(t(),l("div",{ref_key:"main",ref:u,style:{width:"1000px",height:"400px"}},null,512))}},k={__name:"filesystem",props:{data:{default:function(){return{}},type:Object}},setup(r){const u=e(),n=r,i=e([]),o=e([]),p=e([]),v=e([]),m=e({});return m.value=n.data,m.value.fsUsage&&m.value.fsUsage.length>0&&m.value.fsUsage.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),o.value.push(f(parseInt(e[1]))))})),m.value.fsRead&&m.value.fsRead.length>0&&m.value.fsRead.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),p.value.push(f(parseInt(e[1]))))})),m.value.fsWrite&&m.value.fsWrite.length>0&&m.value.fsWrite.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),v.value.push(f(parseInt(e[1]))))})),i.value=[...new Set(i.value)],a((()=>{var e,a;e=c(u.value),a={tooltip:{trigger:"axis",formatter:function(e){var a=e[0].axisValue+"<br/>";return e.forEach((function(e){a+=e.marker+e.seriesName+"："+e.data+" MiB<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Usage","Write","Read"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"4%",right:"3%",bottom:"3%",containLabel:!0},xAxis:[{data:i.value,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} MiB"}}],series:[{name:"Usage",type:"line",areaStyle:{},data:o.value},{name:"Write",type:"line",areaStyle:{},data:v.value},{name:"Read",type:"line",areaStyle:{},data:p.value}]},e.setOption(a)})),(e,a)=>(t(),l("div",{ref_key:"main",ref:u,style:{width:"1000px",height:"400px"}},null,512))}},T={__name:"podtcp",props:{data:{default:function(){return{}},type:Object}},setup(r){const u=e(),n=r,i=e([]),o=e([]),p=e([]),v=e({});return v.value=n.data,v.value.podTcpEstablishedConn&&v.value.podTcpEstablishedConn.length>0&&v.value.podTcpEstablishedConn.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),o.value.push(parseInt(e[1])))})),v.value.podTcpTimewaitConn&&v.value.podTcpTimewaitConn.length>0&&v.value.podTcpTimewaitConn.forEach((function(e){0!==parseInt(e[1])&&(i.value.push(s(e[0])),p.value.push(parseInt(e[1])))})),i.value=[...new Set(i.value)],a((()=>{var e,a;e=c(u.value),a={color:["#67c23a","#37A2FF"],tooltip:{trigger:"axis",formatter:function(e){var a=e[0].axisValue+"<br/>";return e.forEach((function(e){a+=e.marker+e.seriesName+"："+e.data+" 个<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["TCP Timewait Conn","TCP Established Conn"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"10%",right:"10%",top:"10%",bottom:"10%"},xAxis:[{data:i.value}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个"}}],series:[{name:"TCP Established Conn",type:"line",areaStyle:{},data:o.value},{name:"TCP Timewait Conn",type:"line",areaStyle:{},data:p.value}]},e.setOption(a)})),(e,a)=>(t(),l("div",{ref_key:"main",ref:u,style:{width:"1000px",height:"400px"}},null,512))}},C={class:"container"},E={name:"Monitor"},_=Object.assign(E,{props:{data:{default:function(){return{}},type:Object}},setup(a){const s=a,c=e({}),f=e(null),h=e(!1),E=e({}),_=e(0),I=e(0),R=async()=>{const e={category:"pods",pods:c.value.metadata.name,namespace:c.value.metadata.namespace,cluster_id:c.value.cluster_id,start:_.value,end:I.value},a=await y({CpuUsage:e,CpuRequests:e,CpuLimits:e,memoryUsage:e,MemoryRequests:e,MemoryLimits:e,FsUsage:e,FsWrite:e,FsRead:e,NetworkReceive:e,NetworkTransmit:e,PodTcpEstablishedConn:e,PodTcpTimewaitConn:e});0===a.code&&(E.value=g.mapValues(a.data.metrics,(e=>b(e).data.result[0].values))),h.value=!0};c.value=s.data,R();const L=e=>{var a=new Date(e[0]);_.value=a.getTime();var t=new Date(e[1]);I.value=t.getTime(),h.value=!1,R()},U=e=>e.getTime()<Date.now()-6048e5+12e5||e.getTime()>Date.now();return(e,a)=>{const s=d,c=m,y=p,g=v;return t(),l("div",C,[r("div",null,[u(c,{label:"时间"},{default:n((()=>[u(s,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),style:{width:"100%"},size:"small",type:"datetimerange","disabled-date":U,"range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD H:m:s",clearable:!1,onChange:L},null,8,["modelValue"])])),_:1})]),u(g,{style:{width:"100%"}},{default:n((()=>[u(y,{label:"CPU"},{default:n((()=>[h.value?(t(),i(x,{key:0,data:E.value},null,8,["data"])):o("",!0)])),_:1}),u(y,{label:"Memory"},{default:n((()=>[h.value?(t(),i(j,{key:0,data:E.value},null,8,["data"])):o("",!0)])),_:1}),u(y,{label:"Network"},{default:n((()=>[h.value?(t(),i(w,{key:0,data:E.value},null,8,["data"])):o("",!0)])),_:1}),u(y,{label:"Filesystem"},{default:n((()=>[h.value?(t(),i(k,{key:0,data:E.value},null,8,["data"])):o("",!0)])),_:1}),u(y,{label:"TCP"},{default:n((()=>[h.value?(t(),i(T,{key:0,data:E.value},null,8,["data"])):o("",!0)])),_:1})])),_:1})])}}});export{_ as default};
