/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,a,P as t,o as l,c as o,b as s,e as r,w as i,g as n,t as u,B as d,U as p,h as c,cu as m,i as f,k as v,E as h,Q as y}from"./index.ABWJOL2Q.js";import{E as g}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              */import{E as b,a as j}from"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import{E as w}from"./popover.DFR01WU1.js";/* empty css             *//* empty css               */import{a as _,E as k}from"./form-item.ujPiwBAF.js";import{E as x}from"./index.DglrVZRl.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_initCloneObject.jmqS1x-g.js";import"./dropdown.Co_mIot6.js";import"./_baseClone.gl1e0kmI.js";const C={class:"dycloud-search-box"},O={class:"dycloud-table-box"},S={class:"dycloud-btn-list"},V={class:"popover-box"},E={key:1},R={class:"popover-box"},z={key:1},I={class:"dycloud-pagination"},B=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(B){const T=a(1),U=a(0),D=a(10),A=a([]),N=a({}),L=()=>{N.value={}},P=()=>{T.value=1,D.value=10,""===N.value.status&&(N.value.status=null),J()},q=e=>{D.value=e,J()},F=e=>{T.value=e,J()},J=async()=>{const a=await(t={page:T.value,pageSize:D.value,...N.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:t}));var t;0===a.code&&(A.value=a.data.list,U.value=a.data.total,T.value=a.data.page,D.value=a.data.pageSize)};J();const M=a([]),Q=e=>{M.value=e},G=async()=>{m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const a=[];M.value&&M.value.forEach((e=>{a.push(e.ID)}));var t;0===(await(t={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:t}))).code&&(f({type:"success",message:"删除成功"}),A.value.length===a.length&&T.value>1&&T.value--,J())}))},H=async a=>{m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:t}))).code&&(f({type:"success",message:"删除成功"}),1===A.value.length&&T.value>1&&T.value--,J())}))},K=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const m=v,f=_,B=h,J=k,W=b,X=x,Y=t("warning"),Z=y,$=w,ee=j,ae=g;return l(),o("div",null,[s("div",C,[r(J,{inline:!0,model:N.value},{default:i((()=>[r(f,{label:"请求方法"},{default:i((()=>[r(m,{modelValue:N.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>N.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(f,{label:"请求路径"},{default:i((()=>[r(m,{modelValue:N.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>N.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(f,{label:"结果状态码"},{default:i((()=>[r(m,{modelValue:N.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>N.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),r(f,null,{default:i((()=>[r(B,{type:"primary",icon:"search",onClick:P},{default:i((()=>a[3]||(a[3]=[n("查询")]))),_:1}),r(B,{icon:"refresh",onClick:L},{default:i((()=>a[4]||(a[4]=[n("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),s("div",O,[s("div",S,[r(B,{icon:"delete",disabled:!M.value.length,onClick:G},{default:i((()=>a[5]||(a[5]=[n("删除")]))),_:1},8,["disabled"])]),r(ee,{ref:"multipleTable",data:A.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:Q},{default:i((()=>[r(W,{align:"left",type:"selection",width:"55"}),r(W,{align:"left",label:"操作人",width:"140"},{default:i((e=>[s("div",null,u(e.row.user.userName)+"("+u(e.row.user.nickName)+")",1)])),_:1}),r(W,{align:"left",label:"日期",width:"180"},{default:i((e=>[n(u(d(p)(e.row.CreatedAt)),1)])),_:1}),r(W,{align:"left",label:"状态码",prop:"status",width:"120"},{default:i((e=>[s("div",null,[r(X,{type:"success"},{default:i((()=>[n(u(e.row.status),1)])),_:2},1024)])])),_:1}),r(W,{align:"left",label:"请求IP",prop:"ip",width:"120"}),r(W,{align:"left",label:"请求方法",prop:"method",width:"120"}),r(W,{align:"left",label:"请求路径",prop:"path",width:"240"}),r(W,{align:"left",label:"请求",prop:"path",width:"80"},{default:i((e=>[s("div",null,[e.row.body?(l(),c($,{key:0,placement:"left-start",width:444},{reference:i((()=>[r(Z,{style:{cursor:"pointer"}},{default:i((()=>[r(Y)])),_:1})])),default:i((()=>[s("div",V,[s("pre",null,u(K(e.row.body)),1)])])),_:2},1024)):(l(),o("span",E,"无"))])])),_:1}),r(W,{align:"left",label:"响应",prop:"path",width:"80"},{default:i((e=>[s("div",null,[e.row.resp?(l(),c($,{key:0,placement:"left-start",width:444},{reference:i((()=>[r(Z,{style:{cursor:"pointer"}},{default:i((()=>[r(Y)])),_:1})])),default:i((()=>[s("div",R,[s("pre",null,u(K(e.row.resp)),1)])])),_:2},1024)):(l(),o("span",z,"无"))])])),_:1}),r(W,{align:"left",label:"操作"},{default:i((e=>[r(B,{icon:"delete",type:"primary",link:"",onClick:a=>H(e.row)},{default:i((()=>a[6]||(a[6]=[n("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",I,[r(ae,{"current-page":T.value,"page-size":D.value,"page-sizes":[10,30,50,100],total:U.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:F,onSizeChange:q},null,8,["current-page","page-size","total"])])])])}}});export{B as default};
