/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as e,a as t,o as a,h as l,w as r,e as s,g as o,c as i,F as n,v as u,b as p,O as d,cu as m,i as c,E as f}from"./index.ABWJOL2Q.js";/* empty css             */import{E as v}from"./divider.CphDijCu.js";import{E as j}from"./upload.-Ej7EZzx.js";import"./progress.KCbgDfe_.js";/* empty css            */import{E as g,a as b}from"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               */import{a as y,E as h}from"./form-item.ujPiwBAF.js";/* empty css               */import"./cloneDeep.BwH6oqGn.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";import"./isEqual.CtpQH3Dm.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";const x={class:"static-content-item"},_={class:"grid-content bg-purple-light"},I={style:{float:"right","margin-top":"10px"}},q={name:"bulkImport"},k=e(Object.assign(q,{props:{form:{default:function(){return{}},type:Object},dataInfo:{default:function(){return{}},type:Object},data:{default:function(){return{}},type:Object},cluster:{default:function(){return 0},type:Number},type:{default:function(){return 0},type:String},title:{default:function(){return 0},type:String},readOnly:{default:function(){return!1},type:Boolean},operation:{default:function(){return 0},type:String}},emits:["close","enter"],setup(e,{emit:q}){const k=q,C=e;t(0);const w=e=>{A.value.project=e},E=e=>{const t="xls"===e.name.split(".")[1],a="xlsx"===e.name.split(".")[1],l=e.size/1024/1024<2;return t||a||this.$message({message:"上传模板只能是 xls、xlsx格式!",type:"error"}),l||this.$message({message:"上传模板大小不能超过 2MB!",type:"error"}),t||a||l},O=(e,t)=>{},z=e=>{},F=(e,t)=>{t.length>1&&t.splice(0,1),t.value=t},S=e=>{V.value.length>=1&&(V.value=[]),V.value.push(e[0])},B=(e,t)=>m.confirm("Cancel the transfer of ".concat(e.name," ?")).then((()=>!0),(()=>!1)),D=()=>{const e=document.createElement("a");e.href="/template.xlsx",e.download="template.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e),c({type:"success",message:"模板下载成功"})},H={project:[{required:!0,message:"字段值不可为空"}],name:[{required:!0,message:"字段值不可为空"}],serverHost:[{required:!0,message:"字段值不可为空"}],username:[{required:!0,message:"字段值不可为空"}],port:[{required:!0,message:"字段值不可为空"}],password:[{required:!0,message:"字段值不可为空"}]},U=t(C.data.map((e=>({label:e.name,value:e.ID})))),V=t([]),A=t({});null!=C.dataInfo&&(A.value.name=C.dataInfo.name,A.value.id=C.dataInfo.ID,A.value.project=C.dataInfo.project,A.value.projectId=C.dataInfo.project,A.value.serverHost=C.dataInfo.serverHost,A.value.port=C.dataInfo.port,A.value.username=C.dataInfo.username,A.value.note=C.dataInfo.note,A.value.password=C.dataInfo.password);const $=t(null),L=()=>{$.value.resetFields(),k("close")},M=async()=>{V.value.project=A.value.project;await $.value.validate()&&(0===V.value.length?c({message:"请先上传文件",type:"warning"}):k("enter",V.value))};return(e,t)=>{const m=f,c=y,q=g,k=b,C=j,N=v,G=h;return a(),l(G,{model:A.value,ref_key:"FormBlock",ref:$,rules:H,"label-position":"left","label-width":"150px",size:"medium",onSubmit:t[2]||(t[2]=d((()=>{}),["prevent"])),class:"form-container"},{default:r((()=>[s(c,{label:"模板下载:",prop:"template",class:"required label-right-align"},{default:r((()=>[s(m,{onClick:D,type:"primary"},{default:r((()=>t[3]||(t[3]=[o("下载模板")]))),_:1})])),_:1}),s(c,{label:"项目组:",prop:"project",class:"required label-right-align"},{default:r((()=>[s(k,{modelValue:A.value.project,"onUpdate:modelValue":t[0]||(t[0]=e=>A.value.project=e),class:"short-input",clearable:"",onChange:w},{default:r((()=>[(a(!0),i(n,null,u(U.value,((e,t)=>(a(),l(q,{key:t,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(c,{label:"导入数据:",prop:"fileupload",class:"required label-right-align"},{default:r((()=>[s(C,{action:"string","file-list":V.value,"onUpdate:fileList":t[1]||(t[1]=e=>V.value=e),class:"upload-demo",multiple:"",accept:".xlsx,.xls","http-request":e.importFunc,"on-preview":z,"on-remove":O,"before-upload":E,"before-remove":B,limit:1,"on-exceed":S,"on-change":F,"auto-upload":!1},{tip:r((()=>t[5]||(t[5]=[p("div",{class:"el-upload__tip"}," 仅支持xlsx,xls格式 ",-1)]))),default:r((()=>[s(m,{type:"primary"},{default:r((()=>t[4]||(t[4]=[o("点击上传")]))),_:1})])),_:1},8,["file-list","http-request"])])),_:1}),p("div",x,[s(N,{direction:"horizontal"})]),p("div",_,[p("div",I,[s(m,{size:"small",onClick:L},{default:r((()=>t[6]||(t[6]=[o("取 消")]))),_:1}),s(m,{size:"small",type:"primary",onClick:M},{default:r((()=>t[7]||(t[7]=[o("确 定")]))),_:1})])])])),_:1},8,["model"])}}}),[["__scopeId","data-v-48256159"]]);export{k as default};
