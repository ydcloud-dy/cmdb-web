/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as a,c as l,e as s,w as t,F as u,v as o,h as r,S as n,T as m,g as c,b as d,f as i,E as p}from"./index.ABWJOL2Q.js";import{E as v}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";/* empty css             *//* empty css               */import{a as f,E as g}from"./form-item.ujPiwBAF.js";/* empty css            */import{E as _,a as h}from"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               */import{g as y}from"./k8sCluster.LvLN1W31.js";import{g as j}from"./namespaces.DIn9v7pI.js";import{_ as b,d as C,a as S}from"./index.D2JmR_vB.js";const V={class:"dycloud-search-box"},w={key:0},I={class:"dialog-footer"},x={name:"ClusterNamespace"},k=Object.assign(x,{props:{namespace:{default:function(){return!0},type:Boolean}},setup(x){const k=x,E=async e=>{A.value.namespace=e,C(A.value.namespace)},U=async e=>{S(A.value.cluster_id),await F(A.value.cluster_id),A.value.cluster_id=e},z=e({}),F=async a=>{const l=e(!1);z.value={};const s=await j({id:a});if(0===s.code){B.value=[];for(const e of s.data.namespaces){e===localStorage.getItem("namespace")&&(l.value=!0);const a={id:Math.random(),name:e};B.value.push(a)}B.value.push(z.value),"All Namespaces"===localStorage.getItem("namespace")&&(l.value=!0),l.value?A.value.namespace=localStorage.getItem("namespace"):A.value.namespace=B.value[0].name,C(A.value.namespace)}},N=e([]);(async()=>{const e=await y({page:1,pageSize:1e4});0===e.code&&(N.value=e.data.list,A.value.cluster_id=N.value[0].id,parseInt(localStorage.getItem("cluster_id"))>0&&(A.value.cluster_id=parseInt(localStorage.getItem("cluster_id"))),S(A.value.cluster_id),await F(A.value.cluster_id))})();const A=e({}),B=e([]),D=e(!0);D.value=k.namespace;const M=e(""),O=e(!1),T=()=>{M.value="CloudShell",O.value=!0},q=()=>{O.value=!1};return(e,y)=>{const j=_,C=h,S=f,x=p,k=g,z=v;return a(),l("div",V,[s(k,{ref:"searchForm",inline:!0,model:A.value},{default:t((()=>[s(S,{label:"集群"},{default:t((()=>[s(C,{modelValue:A.value.cluster_id,"onUpdate:modelValue":y[0]||(y[0]=e=>A.value.cluster_id=e),style:{width:"200px"},placeholder:"请选择集群",onChange:U},{default:t((()=>[(a(!0),l(u,null,o(N.value,(e=>(a(),r(j,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(s(S,{label:"命名空间"},{default:t((()=>[s(C,{modelValue:A.value.namespace,"onUpdate:modelValue":y[1]||(y[1]=e=>A.value.namespace=e),filterable:"",size:"large",style:{width:"200px"},placeholder:"请选择命名空间",onChange:E},{default:t((()=>[(a(!0),l(u,null,o(B.value,(e=>(a(),r(j,{key:e.id,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},512),[[m,D.value]]),s(S,null,{default:t((()=>[s(x,{type:"primary",icon:"Cloudy",onClick:T},{default:t((()=>y[3]||(y[3]=[c("CloudShell")]))),_:1})])),_:1})])),_:1},8,["model"]),O.value?(a(),l("div",w,[s(z,{modelValue:O.value,"onUpdate:modelValue":y[2]||(y[2]=e=>O.value=e),width:"70%",title:M.value,center:!0},{default:t((()=>[d("div",I,[s(b,{onClose:q})])])),_:1},8,["modelValue","title"])])):i("",!0)])}}});export{k as _};
