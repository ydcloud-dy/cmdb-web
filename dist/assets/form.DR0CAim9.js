/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as l,c as a,e as t,w as o,h as u,b as s,F as n,v as r,g as d,k as i,E as m}from"./index.ABWJOL2Q.js";/* empty css             *//* empty css               */import{a as p,E as c}from"./form-item.ujPiwBAF.js";/* empty css              */import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";const f={style:{overflow:"hidden",width:"100%"}},v={style:{width:"98%"},class:"tab-table"},b={align:"left"},y={class:"dialog-footer",align:"right"},g={name:"FormBlock",emits:{close:()=>!0,enter:e=>1===e.length}},h=Object.assign(g,{props:{form:{default:function(){return{}},type:Object},optype:{default:function(){return""},type:String}},emits:["close","enter"],setup(g,{emit:h}){const k=h,V=g,j=e({name:[{required:!0,message:"请输入名称",trigger:"blur"}],kube_config:[{required:!0,message:"请输入集群凭据",trigger:"blur"}],prometheus:[{required:!0,message:"请输入Prometheus地址",trigger:"blur"}]}),_=e([]),w=e({}),C=e(!1);w.value=V.form,C.value=V.optype,(()=>{if(w.value.metadata.labels)for(const e in w.value.metadata.labels)_.value.push({index:Math.random(),key:e,value:w.value.metadata.labels[e]})})();const U=()=>{z.value.resetFields(),k("close")},x=e=>{const l={index:Math.random(),key:"",value:""};_.value.push(l)},z=e(null),F=async()=>{z.value.validate((async e=>{e&&(await(()=>{if(_.value.length){const e={};for(let l=0;l<_.value.length;l++)""!==_.value[l].key&&(e[_.value[l].key]=_.value[l].value);w.value.metadata.labels=e}})(),k("enter",w.value))}))};return(e,g)=>{const h=i,k=p,V=m,q=c;return l(),a("div",f,[t(q,{ref_key:"FormBlock",ref:z,model:w.value,rules:j.value,"label-width":"100px"},{default:o((()=>[t(k,{label:"名称",prop:"metadata.name"},{default:o((()=>["update"===C.value?(l(),u(h,{key:0,modelValue:w.value.metadata.name,"onUpdate:modelValue":g[0]||(g[0]=e=>w.value.metadata.name=e),disabled:"",autocomplete:"off"},null,8,["modelValue"])):(l(),u(h,{key:1,modelValue:w.value.metadata.name,"onUpdate:modelValue":g[1]||(g[1]=e=>w.value.metadata.name=e),autocomplete:"off"},null,8,["modelValue"]))])),_:1}),t(k,{label:"标签",prop:"metadata.labels"},{default:o((()=>[s("table",v,[g[4]||(g[4]=s("tr",null,[s("th",{scope:"col",width:"48%",align:"left"},[s("label",null,"键")]),s("th",{scope:"col",width:"48%",align:"left"},[s("label",null,"值")]),s("th",{align:"left"})],-1)),(l(!0),a(n,null,r(_.value,((e,u)=>(l(),a("tr",{key:u},[s("td",null,[t(h,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"请输入键"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",null,[t(h,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),s("td",null,[t(V,{type:"danger",link:"",icon:"delete",size:"small",onClick:e=>(e=>{_.value.splice(e,1)})(u)},{default:o((()=>g[2]||(g[2]=[d("删除")]))),_:2},1032,["onClick"])])])))),128)),s("tr",null,[s("td",b,[t(V,{size:"small",type:"primary",link:"",icon:"Plus",onClick:x},{default:o((()=>g[3]||(g[3]=[d("添加")]))),_:1})])])])])),_:1})])),_:1},8,["model","rules"]),s("div",y,[t(V,{size:"small",onClick:U},{default:o((()=>g[5]||(g[5]=[d("取 消")]))),_:1}),t(V,{size:"small",type:"primary",onClick:F},{default:o((()=>g[6]||(g[6]=[d("确 定")]))),_:1})])])}}});export{h as default};
