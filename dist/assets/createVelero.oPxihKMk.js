/*! 
 Build based on  
 Time : 1735190558000 */
import{r as e,a as l,o as a,h as r,w as s,e as t,b as d,g as o,O as u,k as i}from"./index.ABWJOL2Q.js";/* empty css             */import{E as p,a as n}from"./col.BzMVCOvM.js";import{a as m,E as c}from"./form-item.ujPiwBAF.js";/* empty css              */import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";const g={__name:"createVelero",setup(g,{expose:b}){const f=e({s3Address:"",s3Region:"minio",s3Bucket:"k8s-backup",provider:"aws",s3Key:"admin",veleroImage:"registry.cn-beijing.aliyuncs.com/dotbalo/velero:latest",s3Secret:"admin",pluginImage:"registry.cn-beijing.aliyuncs.com/dotbalo/velero-plugin-for-aws:latest",path:""}),V=e({s3Address:[{required:!0,message:"字段值不可为空"}],s3Region:[{required:!0,message:"字段值不可为空"}],s3Bucket:[{required:!0,message:"字段值不可为空"}],provider:[{required:!0,message:"字段值不可为空"}],s3Key:[{required:!0,message:"字段值不可为空"}],veleroImage:[{required:!0,message:"字段值不可为空"}],s3Secret:[{required:!0,message:"字段值不可为空"}],pluginImage:[{required:!0,message:"字段值不可为空"}]}),_=l(null),h=()=>new Promise((e=>{_.value?_.value.validate((l=>{e(l)})):e(!1)}));return b({submitForm:h,resetForm:()=>{_.value&&_.value.resetFields()},getFormData:()=>f}),(e,l)=>{const g=i,b=m,x=p,y=n,v=c;return a(),r(v,{model:f,ref_key:"vForm",ref:_,rules:V,"label-position":"left","label-width":"80px",size:"medium",onSubmit:u(h,["prevent"])},{default:s((()=>[t(y,null,{default:s((()=>[t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"存储地址:","label-width":"170px",prop:"s3Address",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.s3Address,"onUpdate:modelValue":l[0]||(l[0]=e=>f.s3Address=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"存储Region:","label-width":"170px",prop:"s3Region",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.s3Region,"onUpdate:modelValue":l[1]||(l[1]=e=>f.s3Region=e),type:"text",placeholder:"请输入对象存储地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),t(y,null,{default:s((()=>[t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"对象存储桶(Bucket):","label-width":"170px",prop:"s3Bucket",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.s3Bucket,"onUpdate:modelValue":l[2]||(l[2]=e=>f.s3Bucket=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"存储供应商:","label-width":"170px",prop:"provider",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.provider,"onUpdate:modelValue":l[3]||(l[3]=e=>f.provider=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),t(y,null,{default:s((()=>[t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"对象存储用户名(Key):","label-width":"170px",prop:"s3Key",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.s3Key,"onUpdate:modelValue":l[4]||(l[4]=e=>f.s3Key=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"Velero镜像地址:","label-width":"170px",prop:"veleroImage",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.veleroImage,"onUpdate:modelValue":l[5]||(l[5]=e=>f.veleroImage=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),t(y,null,{default:s((()=>[t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"对象存储密码(Secret):","label-width":"170px",prop:"s3Secret",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.s3Secret,"onUpdate:modelValue":l[6]||(l[6]=e=>f.s3Secret=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"插件镜像地址:","label-width":"170px",prop:"pluginImage",class:"required label-right-align"},{default:s((()=>[t(g,{modelValue:f.pluginImage,"onUpdate:modelValue":l[7]||(l[7]=e=>f.pluginImage=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),t(y,null,{default:s((()=>[t(x,{span:12,class:"grid-cell"},{default:s((()=>[t(b,{label:"存储路径:","label-width":"170px",prop:"path",class:"label-right-align"},{default:s((()=>[t(g,{modelValue:f.path,"onUpdate:modelValue":l[8]||(l[8]=e=>f.path=e),type:"text",placeholder:"可选，指定bucket的下级路径",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),t(x,{span:12,class:"grid-cell"})])),_:1}),t(y,null,{default:s((()=>[t(x,{span:24,class:"grid-cell"},{default:s((()=>l[9]||(l[9]=[d("div",{class:"static-content-item"},[d("div",null,"注意事项")],-1),d("p",{style:{"margin-top":"10px"}},[o("不同的Kubernetes版本会对应不同的Velero版本，请在 "),d("a",{href:"https://github.com/vmware-tanzu/velero?tab=readme-ov-file#changelog",target:"_blank"},"Velero版本详情"),o(" 选择对应的Velero版本。 ")],-1),d("p",{style:{"margin-top":"10px"}},"如果当前K8s版本大于1.18，可以无需更改Velero镜像。",-1),d("p",{style:{"margin-top":"10px"}},"如需重新安装Velero，需要先删除该集群的Velero命名空间，之后在执行安装。",-1),d("p",{style:{"margin-top":"10px"}},"如需卸载Velero，直接删除该集群的Velero命名空间即可。",-1)]))),_:1})])),_:1})])),_:1},8,["model","rules"])}}};export{g as default};
