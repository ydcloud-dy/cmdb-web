/*! 
 Build based on  
 Time : 1735190558000 */
import{D as e,ao as t,a8 as o,y as n,H as a,aZ as r,a as i,q as s,R as l,a0 as m,az as c,o as u,c as d,J as p,K as f,C as v,L as g,d1 as j,b3 as x,d2 as b,r as h,N as y,u as w,M as k,df as A,dq as M,l as E,a1 as B,P as _,B as I,h as L,f as z,e as N,b as S,n as C,w as T,aE as D,dg as P,ax as R}from"./index.ABWJOL2Q.js";import O from"./index.amDrMyBq.js";import F from"./index.zAdoG4Km.js";import{u as W}from"./index.BkD0mVs7.js";import q from"./index.C0uxC77o.js";import"./normalMode.ClpdsQ1_.js";import"./scrollbar.3ySweVnY.js";/* empty css             *//* empty css                *//* empty css               */import"./index.BblQ9eNl.js";import"./menuItem.BRpjXRoj.js";/* empty css                  */import"./index.CwHRikT6.js";import"./index.gYVODlrW.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.6ock-Gvr.js";import"./asyncSubmenu.CxBKALgk.js";import"./headMode.ZbDVdo0O.js";import"./combinationMode.vL6vjD_y.js";/* empty css               */import"./dropdown-item.Bdep7Ju0.js";import"./dropdown.Co_mIot6.js";import"./castArray.9wqFpW2Z.js";import"./refs.CZv2DkwS.js";import"./breadcrumb-item.DBo9yA-L.js";import"./tools.Cav-3VyG.js";import"./index.CFpyxhvY.js";import"./drawer.XhtctEYG.js";import"./overlay.CDLw2uOw.js";/* empty css              */import"./input-number.DAPMCn-P.js";import"./index.7ugBSK5z.js";import"./switch.CqADXIhW.js";import"./index.ChxfLDLy.js";import"./dialog.DdLHJsLF.js";/* empty css             */import"./form-item.ujPiwBAF.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";/* empty css            */import"./select.C2tLDQ30.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./isEqual.CtpQH3Dm.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./k8sCluster.LvLN1W31.js";import"./namespaces.DIn9v7pI.js";import"./index.D2JmR_vB.js";import"./warningBar.BzThqhMC.js";import"./terminal.CkdZuQYW.js";import"./xterm.BR7SOqRe.js";/* empty css              */import"./xterm-addon-fit.onOJMBm7.js";import"./files.U5RRtO1D.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";import"./link.QK3LjIND.js";import"./upload.-Ej7EZzx.js";import"./progress.KCbgDfe_.js";import"./cloneDeep.BwH6oqGn.js";import"./position.DTC6E8em.js";import"./index.C4P4C0XU.js";import"./image-viewer.Dd9ZIujV.js";import"./tab-pane.fs024GHS.js";import"./index.C5gbd99D.js";const H=e({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:t([String,Array]),default:"Element Plus"},font:{type:t(Object)},gap:{type:t(Array),default:()=>[100,100]},offset:{type:t(Array)}});function Z(e,t,o=1){const n=document.createElement("canvas"),a=n.getContext("2d"),r=e*o,i=t*o;return n.setAttribute("width","".concat(r,"px")),n.setAttribute("height","".concat(i,"px")),a.save(),[a,n,r,i]}function $(){return function(e,t,n,a,r,i,s,l){const[m,c,u,d]=Z(a,r,n);if(e instanceof HTMLImageElement)m.drawImage(e,0,0,u,d);else{const{color:t,fontSize:a,fontStyle:s,fontWeight:l,fontFamily:c,textAlign:d,textBaseline:p}=i,f=Number(a)*n;m.font="".concat(s," normal ").concat(l," ").concat(f,"px/").concat(r,"px ").concat(c),m.fillStyle=t,m.textAlign=d,m.textBaseline=p;const v=o(e)?e:[e];null==v||v.forEach(((e,t)=>{m.fillText(null!=e?e:"",u/2,t*(f+3*n))}))}const p=Math.PI/180*Number(t),f=Math.max(a,r),[v,g,j]=Z(f,f,n);v.translate(j/2,j/2),v.rotate(p),u>0&&d>0&&v.drawImage(c,-u/2,-d/2);let x=0,b=0,h=0,y=0;const w=u/2,k=d/2;[[0-w,0-k],[0+w,0-k],[0+w,0+k],[0-w,0+k]].forEach((([e,t])=>{const[o,n]=function(e,t){return[e*Math.cos(p)-t*Math.sin(p),e*Math.sin(p)+t*Math.cos(p)]}(e,t);x=Math.min(x,o),b=Math.max(b,o),h=Math.min(h,n),y=Math.max(y,n)}));const A=x+j/2,M=h+j/2,E=b-x,B=y-h,_=s*n,I=l*n,L=2*(E+_),z=B+I,[N,S]=Z(L,z);function C(e=0,t=0){N.drawImage(g,A,M,E,B,e,t,E,B)}return C(),C(E+_,-B/2-I/2),C(E+_,+B/2+I/2),[S.toDataURL(),L/n,z/n]}}const G=n({name:"ElWatermark"});const K=g(v(n({...G,props:H,setup(e){const t=e,n={position:"relative"},v=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.color)?o:"rgba(0,0,0,.15)"})),g=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.fontSize)?o:16})),j=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.fontWeight)?o:"normal"})),x=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.fontStyle)?o:"normal"})),b=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.fontFamily)?o:"sans-serif"})),h=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.textAlign)?o:"center"})),y=a((()=>{var e,o;return null!=(o=null==(e=t.font)?void 0:e.textBaseline)?o:"hanging"})),w=a((()=>t.gap[0])),k=a((()=>t.gap[1])),A=a((()=>w.value/2)),M=a((()=>k.value/2)),E=a((()=>{var e,o;return null!=(o=null==(e=t.offset)?void 0:e[0])?o:A.value})),B=a((()=>{var e,o;return null!=(o=null==(e=t.offset)?void 0:e[1])?o:M.value})),_=()=>{const e={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let o=E.value-A.value,n=B.value-M.value;return o>0&&(e.left="".concat(o,"px"),e.width="calc(100% - ".concat(o,"px)"),o=0),n>0&&(e.top="".concat(n,"px"),e.height="calc(100% - ".concat(n,"px)"),n=0),e.backgroundPosition="".concat(o,"px ").concat(n,"px"),e},I=r(null),L=r(),z=i(!1),N=()=>{L.value&&(L.value.remove(),L.value=void 0)},S=(e,t)=>{var o;I.value&&L.value&&(z.value=!0,L.value.setAttribute("style",function(e){return Object.keys(e).map((t=>"".concat(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(t),": ").concat(e[t],";"))).join(" ")}({..._(),backgroundImage:"url('".concat(e,"')"),backgroundSize:"".concat(Math.floor(t),"px")})),null==(o=I.value)||o.append(L.value),setTimeout((()=>{z.value=!1})))},C=$(),T=()=>{const e=document.createElement("canvas").getContext("2d"),n=t.image,a=t.content,r=t.rotate;if(e){L.value||(L.value=document.createElement("div"));const i=window.devicePixelRatio||1,[s,l]=(e=>{let n=120,a=64;const r=t.image,i=t.content,s=t.width,l=t.height;if(!r&&e.measureText){e.font="".concat(Number(g.value),"px ").concat(b.value);const t=o(i)?i:[i],r=t.map((t=>{const o=e.measureText(t);return[o.width,void 0!==o.fontBoundingBoxAscent?o.fontBoundingBoxAscent+o.fontBoundingBoxDescent:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...r.map((e=>e[0])))),a=Math.ceil(Math.max(...r.map((e=>e[1]))))*t.length+3*(t.length-1)}return[null!=s?s:n,null!=l?l:a]})(e),m=e=>{const[t,o]=C(e||"",r,i,s,l,{color:v.value,fontSize:g.value,fontStyle:x.value,fontWeight:j.value,fontFamily:b.value,textAlign:h.value,textBaseline:y.value},w.value,k.value);S(t,o)};if(n){const e=new Image;e.onload=()=>{m(e)},e.onerror=()=>{m(a)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=n}else m(a)}};s((()=>{T()})),l((()=>t),(()=>{T()}),{deep:!0,flush:"post"}),m((()=>{N()}));return c(I,(e=>{z.value||e.forEach((e=>{((e,t)=>{let o=!1;return e.removedNodes.length&&t&&(o=Array.from(e.removedNodes).includes(t)),"attributes"===e.type&&e.target===t&&(o=!0),o})(e,L.value)&&(N(),T())}))}),{attributes:!0,subtree:!0,childList:!0}),(e,t)=>(u(),d("div",{ref_key:"containerRef",ref:I,style:f([n])},[p(e.$slots,"default")],4))}}),[["__file","watermark.vue"]]));function U(e){const t=j();const o=W((function(){if(!document.hidden){const e=document.body.getBoundingClientRect().width-1<992;t.toggleDevice(e?"mobile":"desktop")}}),100);s((()=>{o()})),x((()=>{!function(e,t,o,n=!1){e.addEventListener&&"function"==typeof e.addEventListener&&e.addEventListener(t,o,n)}(window,"resize",o)})),m((()=>{!function(e,t,o,n=!1){e.removeEventListener&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,o,n)}(window,"resize",o)}))}const J={class:"flex flex-col md:flex-row gap-2 items-center text-sm text-slate-700 dark:text-slate-500 justify-center py-2"},Q=Object.assign({name:"BottomInfo"},{__name:"bottomInfo",setup:e=>(e,t)=>(u(),d("div",J))}),V={class:"bg-gray-50 text-slate-700 dark:text-slate-500 dark:bg-slate-800 w-screen h-screen"},X={class:"flex flex-row w-full gva-container pt-16 box-border h-full"},Y={class:"flex-1 p-2 w-0 h-full"},ee={id:"dycloud-base-load-dom",class:"dycloud-body-h bg-gray-50 dark:bg-slate-800"},te=Object.assign({name:"GvaLayout"},{__name:"index",setup(e){const t=j(),{config:o,theme:n,device:a}=b(t);U();const r=h({color:"rgba(0, 0, 0, .15)"});y((()=>{r.color="dark"===n.value?"rgba(255,255,255, .15)":"rgba(0, 0, 0, .15)"}));const l=w(),m=k(),c=A();s((()=>{M.on("reload",g),p.loadingInstance&&p.loadingInstance.close()}));const p=E(),f=i(!0);let v=null;const g=async()=>{v&&window.clearTimeout(v),v=window.setTimeout((async()=>{if(m.meta.keepAlive)f.value=!1,await B(),f.value=!0;else{const e=m.meta.title;l.push({name:"Reload",params:{title:e}})}}),400)};return(e,t)=>{const n=K,i=_("router-view");return u(),d("div",V,[I(o).show_watermark?(u(),L(n,{key:0,font:r,"z-index":9999,gap:[180,150],class:"absolute inset-0 pointer-events-none",content:I(p).userInfo.nickName},null,8,["font","content"])):z("",!0),N(F),S("div",X,["normal"===I(o).side_mode||"mobile"===I(a)&&"head"==I(o).side_mode||"mobile"===I(a)&&"combination"==I(o).side_mode?(u(),L(O,{key:0})):z("",!0),"combination"===I(o).side_mode&&"mobile"!==I(a)?(u(),L(O,{key:1,mode:"normal"})):z("",!0),S("div",Y,[I(o).showTabs?(u(),L(q,{key:0})):z("",!0),S("div",{class:C(["overflow-auto",I(o).showTabs?"gva-container2":"gva-container pt-1"])},[f.value?(u(),L(i,{key:0},{default:T((({Component:e,route:t})=>[S("div",ee,[N(D,{mode:"out-in",name:"el-fade-in-linear"},{default:T((()=>[(u(),L(P,{include:I(c).keepAliveRouters},[(u(),L(R(e),{key:t.fullPath}))],1032,["include"]))])),_:2},1024)])])),_:1})):z("",!0),N(Q)],2)])])])}}});export{te as default};
