/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,_ as a,a as l,o as s,c as t,e as o,w as i,b as r,F as d,v as n,g as u,t as p,i as m,k as c,E as v}from"./index.ABWJOL2Q.js";import{E as f,a as j}from"./col.BzMVCOvM.js";import{E as g}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              *//* empty css             *//* empty css               */import{a as _,E as b}from"./form-item.ujPiwBAF.js";import{E as y,a as h,b as k}from"./dropdown-item.Bdep7Ju0.js";import{E as x}from"./card.RgDT494R.js";/* empty css             */import"./checkbox.BcMUmSPv.js";import{E as w}from"./virtual-list.D0tgIX0Q.js";import C from"./table.DNQ2l-Tb.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./dropdown.Co_mIot6.js";import"./refs.CZv2DkwS.js";import"./table-column.ChuwY-lb.js";/* empty css                */import"./popover.DFR01WU1.js";import"./stringFun.hIDu-B3o.js";const z={class:"dycloud-search-box"},E={class:"dycloud-table-box"},I={class:"dycloud-pagination"},F={name:"Index"},S=a(Object.assign(F,{setup(a){const F={value:"id",label:"name",children:"region"},S=l(1),V=l(0),A=l(10),D=l({keyword:"",region:"",field:""}),N=l([]),O=l([]),U=l("识别搜索"),q=[{id:1,field:"name",name:"实例名称"},{id:2,field:"instance_id",name:"实例ID"},{id:3,field:"private_addr",name:"私网地址"},{id:4,field:"public_addr",name:"公网地址"},{id:5,field:"region",name:"区域ID"},{id:6,field:"region_name",name:"区域名称"},{id:7,field:"status",name:"状态"}],H=async()=>{const a=await(a=>e({url:"/cloudcmdb/rds/tree",method:"post",data:a}))();0===a.code&&(N.value=a.data.list)};H();const K=l(0),L=async()=>{if(0===K.value)return void m({message:"请单击左侧，选择要同步的厂商",type:"warning"});const a=await(a=>e({url:"/cloudcmdb/rds/sync",method:"post",data:a}))({id:K.value});0===a.code&&m({message:"同步操作，异步执行中，请稍后！",type:"success"})},M=e=>{e.region_id&&(D.value.region=e.region_id,R()),(e.region||null===e.region)&&(K.value=e.id)},R=async()=>{const a=await(a=>e({url:"/cloudcmdb/rds/list",method:"post",data:a}))({page:S.value,pageSize:A.value,...D.value});0===a.code&&(O.value=a.data.list,V.value=a.data.total,S.value=a.data.page,A.value=a.data.pageSize)};R();const X=()=>{D.value={},U.value="识别搜索",K.value=0},Y=()=>{"识别搜索"!==q.value?(S.value=1,A.value=10,R(),H()):m({message:"请选择搜索类型",type:"warning"})},Z=e=>{A.value=e,R()},B=e=>{S.value=e,R()},G=e=>{D.value=e,R()};return(e,a)=>{const l=w,m=x,H=f,K=y,R=h,J=k,P=_,Q=c,T=v,W=b,$=g,ee=j;return s(),t("div",null,[o(m,{class:"box-card",shadow:"hover"},{header:i((()=>a[1]||(a[1]=[r("div",{class:"card-header"},[r("span",null,"资产管理")],-1)]))),default:i((()=>[o(ee,{gutter:24},{default:i((()=>[o(H,{span:3},{default:i((()=>[o(m,{class:"box-card",shadow:"hover"},{header:i((()=>a[2]||(a[2]=[r("div",{class:"card-header"},[r("span",null,"资源分布")],-1)]))),default:i((()=>[o(l,{ref:"treeRef",data:N.value,props:F,"node-key":"region","default-expanded-keys":["0"],"expand-on-click-node":!1,onNodeClick:M},null,8,["data"])])),_:1})])),_:1}),o(H,{span:21},{default:i((()=>[o(m,{class:"el-card"},{default:i((()=>[r("div",z,[o(W,{ref:"searchForm",inline:!0,model:D.value},{default:i((()=>[o(P,null,{default:i((()=>[o(J,{"split-button":""},{dropdown:i((()=>[o(R,null,{default:i((()=>[(s(),t(d,null,n(q,((e,a)=>r("div",{key:a},[o(K,{onClick:a=>{return l=e.name,s=e.field,D.value.field=s,void(U.value=l);var l,s}},{default:i((()=>[u(p(e.name),1)])),_:2},1032,["onClick"])]))),64))])),_:1})])),default:i((()=>[u(p(U.value)+" ",1)])),_:1})])),_:1}),o(P,null,{default:i((()=>[o(Q,{modelValue:D.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value.keyword=e),placeholder:"请输入搜索关键字"},null,8,["modelValue"])])),_:1}),o(P,null,{default:i((()=>[o(T,{size:"small",type:"primary",icon:"search",onClick:Y},{default:i((()=>a[3]||(a[3]=[u("查询")]))),_:1}),o(T,{size:"small",icon:"refresh",onClick:X},{default:i((()=>a[4]||(a[4]=[u("重置")]))),_:1}),o(T,{size:"small",type:"primary",icon:"refresh",onClick:L},{default:i((()=>a[5]||(a[5]=[u("同步")]))),_:1})])),_:1})])),_:1},8,["model"])]),r("div",E,[o(C,{"table-data":O.value,onSearch:G},null,8,["table-data"])]),r("div",I,[o($,{"current-page":S.value,"page-size":A.value,"page-sizes":[10,30,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:Z},null,8,["current-page","page-size","total"])])])),_:1})])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-bfd74e40"]]);export{S as default};
