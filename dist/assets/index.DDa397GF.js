/*! 
 Build based on  
 Time : 1735190558000 */
import{i as a}from"./index.DrIIbIcU.js";import{a as e,q as t,o as l,c as u,h as n,f as o}from"./index.ABWJOL2Q.js";import{G as r,l as s,n as i,M as c}from"./metrics.Dq7Dbl3h.js";function d(a){if(null==a)return 0;let e=0;for(let t=0;t<a.length;t++)e+=a[t].restartCount;return e}const p={__name:"BarMonitor",props:{colordata:{default:function(){return""},type:String},data:{default:function(){return{}},type:Object},title:{default:function(){return""},type:String}},setup(n){const o=n,r=e(""),s=e([]),i=e("");r.value=o.colordata,s.value=o.data,i.value=o.title,t((()=>{!function(){const e=a(c.value),t={color:r.value,tooltip:{trigger:"axis",formatter:function(a){let e="";return a.forEach((a=>{const t=a.color,l=a.seriesName,u=a.value,n='<span style="display:inline-block; width:10px; height:10px; background-color:'.concat(t,'; margin-right:5px;"></span>');e+=n+l+": "+u+"<br>"})),e},position:function(a,e,t,l,u){var n=a[0],o=a[1],r=u.contentSize[0],s=u.contentSize[1];return[r>n?20:n-r,s>o?15:o-s]}},grid:{left:"10%",right:"10%",top:"10%",bottom:"10%"},xAxis:{type:"category",show:!1},yAxis:{type:"value",show:!1},series:[{name:i.value,type:"line",stack:"stack",areaStyle:{},data:s.value.data.map((a=>a.value))}]};e.setOption(t),e.resize({width:"auto",height:50})}()}));const c=e(null);return(a,e)=>(l(),u("div",{ref_key:"chart",ref:c,style:{overflow:"visible",height:"50px",width:"200px"}},null,512))}},v={className:"container"},m={name:"Monitor"},f=Object.assign(m,{props:{data:{default:function(){return{}},type:Object},cluster_id:{default:function(){return 0},type:Number}},setup(a){const t=a,d=e({}),m=e(!1),f=e(0),h=e({}),g=e({data:[]}),y=e({data:[]}),b=e({data:[]}),x=e(0),C=e(0),E=async()=>{const a={category:"pods",pods:d.value.metadata.name,namespace:d.value.metadata.namespace,cluster_id:f.value,start:x.value,end:C.value},e=await r({CpuUsage:a,memoryUsage:a,PodTcpEstablishedConn:a});0===e.code&&(h.value=s.mapValues(e.data.metrics,(a=>i(a).data.result[0].values)),b.value.data=[],y.value.data=[],g.value.data=[],h.value.cpuUsage&&h.value.cpuUsage.length>0&&h.value.cpuUsage.forEach((function(a){g.value.data.push({date:a[0],value:Math.round(100*parseFloat(a[1]))/100})})),h.value.memoryUsage&&h.value.memoryUsage.length>0&&h.value.memoryUsage.forEach((function(a){y.value.data.push({date:a[0],value:c(parseInt(a[1]))})})),h.value.podTcpEstablishedConn&&h.value.podTcpEstablishedConn.length>0&&h.value.podTcpEstablishedConn.forEach((function(a){b.value.data.push({date:a[0],value:parseInt(a[1])})})),m.value=!0)};return d.value=t.data,f.value=t.cluster_id,E(),(a,e)=>(l(),u("div",v,[m.value?(l(),n(p,{key:0,colordata:"#4D70FF",data:g.value,title:"CPU(核)"},null,8,["data"])):o("",!0),m.value?(l(),n(p,{key:1,colordata:"#67C23A",data:y.value,title:"Mem(M)"},null,8,["data"])):o("",!0),m.value?(l(),n(p,{key:2,colordata:"#E6A23C",data:b.value,title:"TCP(个)"},null,8,["data"])):o("",!0)]))}});export{d as R,f as _};
