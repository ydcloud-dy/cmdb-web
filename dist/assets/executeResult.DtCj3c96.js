/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as e,u as a,a as s,q as l,H as t,o as u,h as n,w as o,e as c,b as r,g as i,c as p,F as d,v,n as m,f,t as y,E as g,cQ as _}from"./index.ABWJOL2Q.js";import{E as x,a as h}from"./col.BzMVCOvM.js";/* empty css             *//* empty css                *//* empty css               *//* empty css                  */import{E as j}from"./card.RgDT494R.js";/* empty css               */import{E as b,a as k}from"./index.CwHRikT6.js";import"./index.gYVODlrW.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.6ock-Gvr.js";const C={class:"execution-summary"},H={key:0,style:{color:"green"}},E={key:1,style:{color:"red"}},I=["innerHTML"],L=e({__name:"executeResult",setup(e){const L=a(),R=()=>{L.back()},S=s([]),$=s([]),w=s([]),M=s([]);l((()=>{(()=>{const e=sessionStorage.getItem("executeResult");if(e)try{const a=JSON.parse(e);S.value=a.allHosts||[],$.value=a.successHosts||[],w.value=a.failureHosts||[],M.value=a.executionLogs||[]}catch(a){sessionStorage.removeItem("executeResult")}})()}));const T=s(""),q=s(""),z=s("all"),A=s(S.value),F=e=>{z.value=e,"all"===e?A.value=S.value:"success"===e?A.value=$.value:"failure"===e&&(A.value=w.value)},J=t((()=>q.value.replace(/### (.*?)\n/g,'<span style="color: cyan">### $1</span>\n').replace(/\*\* (.*?) \*\*/g,'<span style="color: green">** $1 **</span>\n').replace(/(test.tar.gz)/g,'<span style="color: red">$1</span>')));return(e,a)=>{const s=g,l=_,t=j,L=b,z=k,K=x,N=h;return u(),n(N,{style:{height:"100vh"}},{default:o((()=>[c(K,{span:4,class:"execution-details"},{default:o((()=>[c(t,null,{default:o((()=>[c(s,{onClick:R,type:"text",class:"back-button"},{default:o((()=>a[3]||(a[3]=[r("i",{class:"el-icon-arrow-left"},null,-1),i(" 执行详情 ")]))),_:1}),r("div",C,[c(s,{type:"primary",plain:"",onClick:a[0]||(a[0]=e=>F("all")),class:"summary-button"},{default:o((()=>[c(l,{value:S.value.length,class:"badge"},{default:o((()=>a[4]||(a[4]=[i("All")]))),_:1},8,["value"])])),_:1}),c(s,{type:"success",plain:"",onClick:a[1]||(a[1]=e=>F("success")),class:"summary-button"},{default:o((()=>[c(l,{value:$.value.length,class:"badge"},{default:o((()=>a[5]||(a[5]=[i("成功")]))),_:1},8,["value"])])),_:1}),c(s,{type:"danger",plain:"",onClick:a[2]||(a[2]=e=>F("failure")),class:"summary-button"},{default:o((()=>[c(l,{value:w.value.length,class:"badge"},{default:o((()=>a[6]||(a[6]=[i("失败")]))),_:1},8,["value"])])),_:1})])])),_:1}),c(t,{style:{"margin-top":"20px"}},{default:o((()=>[c(z,{"default-active":"1",class:"host-menu"},{default:o((()=>[(u(!0),p(d,null,v(A.value,((e,a)=>(u(),n(L,{key:a,onClick:a=>(e=>{T.value=e;const a=M.value.find((a=>a.host.startsWith(e)));q.value=a?a.error?a.error:a.output:"无日志"})(e),class:m({"selected-host":T.value===e})},{default:o((()=>[$.value.includes(e)?(u(),p("span",H,"✔")):w.value.includes(e)?(u(),p("span",E,"✘")):f("",!0),i(" "+y(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1}),c(K,{span:20,class:"execution-log"},{default:o((()=>[c(t,null,{default:o((()=>[r("h3",null,y(T.value),1),r("pre",{innerHTML:J.value},null,8,I)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-4ece5084"]]);export{L as default};
