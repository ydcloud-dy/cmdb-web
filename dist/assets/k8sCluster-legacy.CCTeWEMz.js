/*! 
 Build based on  
 Time : 1735190558000 */
!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,u=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},o=l.iterator||"@@iterator",i=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(t){s=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,l=Object.create(a.prototype),o=new T(r||[]);return u(l,"_invoke",{value:V(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var p="suspendedStart",v="suspendedYield",m="executing",y="completed",h={};function g(){}function w(){}function k(){}var b={};s(b,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(U([])));x&&x!==r&&a.call(x,o)&&(b=x);var C=k.prototype=g.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,u,l,o){var i=d(e[r],e,u);if("throw"!==i.type){var c=i.arg,s=c.value;return s&&"object"==typeof s&&a.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,o)}))}o(i.arg)}var r;u(this,"_invoke",{value:function(e,a){function u(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(u,u):u()}})}function V(e,n,r){var a=p;return function(u,l){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===u)throw l;return{value:t,done:!0}}for(r.method=u,r.arg=l;;){var o=r.delegate;if(o){var i=L(o,r);if(i){if(i===h)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var c=d(e,n,r);if("normal"===c.type){if(a=r.done?y:v,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=y,r.method="throw",r.arg=c.arg)}}}function L(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var u=d(a,e.iterator,n.arg);if("throw"===u.type)return n.method="throw",n.arg=u.arg,n.delegate=null,h;var l=u.arg;return l?l.done?(n[e.resultName]=l.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function U(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,u=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return u.next=u}}throw new TypeError(typeof e+" is not iterable")}return w.prototype=k,u(C,"constructor",{value:k,configurable:!0}),u(k,"constructor",{value:w,configurable:!0}),w.displayName=s(k,c,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,s(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},j(E.prototype),s(E.prototype,i,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,a,u){void 0===u&&(u=Promise);var l=new E(f(e,t,r,a),u);return n.isGeneratorFunction(t)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},j(C),s(C,c,"Generator"),s(C,o,(function(){return this})),s(C,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=U,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var u=this.tryEntries.length-1;u>=0;--u){var l=this.tryEntries[u],o=l.completion;if("root"===l.tryLoc)return r("end");if(l.tryLoc<=this.prev){var i=a.call(l,"catchLoc"),c=a.call(l,"finallyLoc");if(i&&c){if(this.prev<l.catchLoc)return r(l.catchLoc,!0);if(this.prev<l.finallyLoc)return r(l.finallyLoc)}else if(i){if(this.prev<l.catchLoc)return r(l.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return r(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var u=r;break}}u&&("break"===e||"continue"===e)&&u.tryLoc<=t&&t<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=e,l.arg=t,u?(this.method="next",this.next=u.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;A(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:U(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},n}function t(e,t,n,r,a,u,l){try{var o=e[u](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(a,u){var l=e.apply(n,r);function o(e){t(l,a,u,o,i,"next",e)}function i(e){t(l,a,u,o,i,"throw",e)}o(void 0)}))}}System.register(["./index-legacy.Cf1_fyJw.js","./dialog-legacy.DSWM2KL1.js","./overlay-legacy.BUxXTiH4.js","./pagination-legacy.BvZzwGgF.js","./tag-legacy.Ca3_ouli.js","./select-legacy.L6EZLrW8.js","./scrollbar-legacy.dKZTD6w2.js","./popper-legacy.BkTYt---.js","./input-legacy.DqeBI0DR.js","./table-column-legacy.BxF_olX2.js","./checkbox-legacy.CC9hZC3z.js","./tooltip-legacy.DJvkFyUq.js","./form-legacy.0XPxLcB_.js","./button-legacy.CH0FoAJ-.js","./form-item-legacy.BSRxtXpO.js","./date-picker-legacy.Cu_U60XV.js","./k8sCluster-legacy.Bhs3SaAk.js","./createClusterForm-legacy.H4rJVUgj.js","./tab-pane-legacy.DpVaa-__.js","./col-legacy.tMI9428i.js","./index-legacy.CrLAlmUo.js","./js-yaml-legacy.DvjpT7r5.js","./roles-legacy.CTtKGrAM.js","./index-legacy.CjsCdAav.js","./index-legacy.DGP8eUsx.js","./refs-legacy.DKcspM8g.js","./isEqual-legacy.wQ-Y-8LH.js","./_Uint8Array-legacy.CS4Mx2ig.js","./index-legacy.DPmmO7_J.js","./token-legacy.D8ssuuq3.js","./strings-legacy.Wo7ipnce.js","./castArray-legacy.Dek4eNNY.js","./debounce-legacy.Csxk0W50.js","./_baseIteratee-legacy.D0Xxhk8-.js","./index-legacy.DglejgZI.js","./_initCloneObject-legacy.JrJoSfNx.js","./_baseClone-legacy.CxPdKCcf.js","./dayjs.min-legacy.jnpfY90f.js","./arrays-legacy.DowQ5ujz.js","./index-legacy.xSvwTSbp.js","./divider-legacy.mkmY1us8.js","./radio-group-legacy.b3NdNxxp.js","./radio-legacy.DUa6CodL.js","./index-legacy.VcYNc2Mg.js","./index-legacy.5aKQ1vKy.js","./monaco-editor-vue3.es-legacy.a46gbKys.js","./age-legacy.B6tOd1kw.js"],(function(t,r){"use strict";var a,u,l,o,i,c,s,f,d,p,v,m,y,h,g,w,k,b,_,x,C,j,E,V,L,O,A,T,U,z,N,S,B,F,D,R,I,P,G,K,J,q,Q,Y,H,M,W,X,Z,$,ee,te,ne,re,ae,ue,le;return{setters:[function(e){a=e.a,u=e.o,l=e.c,o=e.e,i=e.w,c=e.h,s=e.F,f=e.v,d=e.b,p=e.g,v=e.f,m=e.t,y=e.x,h=e.k,g=e.E,w=e._,k=e.cu,b=e.i,_=e.S,x=e.T,C=e.r,j=e.P,E=e.m,V=e.B,L=e.U,O=e.Q},function(e){A=e.E},null,function(e){T=e.E},null,function(e){U=e.E,z=e.a},null,null,null,function(e){N=e.E,S=e.a},null,null,null,null,function(e){B=e.a,F=e.E},function(e){D=e.E},function(e){R=e.a,I=e.e,P=e.f,G=e.h,K=e.i,J=e.j,q=e.C,Q=e.k,Y=e.g,H=e.D,M=e.l,W=e.m,X=e.U},function(e){Z=e.default},function(e){$=e.E,ee=e.a},function(e){te=e.E,ne=e.a},function(e){re=e._},function(e){ae=e.j},function(e){ue=e._},function(e){le=e.E},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var r=document.createElement("style");r.textContent=".downloadKubeconfig[data-v-dd44c345]{text-align:right}.copydocument[data-v-dd44c345]{position:absolute;top:-33%;left:83%;width:0;height:100%;z-index:1}.credentialadd[data-v-aaf3da3d]{text-align:left}.downloadKubeconfig[data-v-aaf3da3d]{text-align:right}.copydocument[data-v-aaf3da3d]{position:absolute;top:-40%;left:83%;width:0;height:100%;z-index:1}\n",document.head.appendChild(r);var oe={style:{overflow:"hidden",width:"100%"}},ie={border:"1",cellspacing:"0",style:{width:"100%"}},ce={align:"left"},se={key:0},fe={class:"dialog-footer",align:"right"},de={name:"UserForm"},pe=Object.assign(de,{props:{form:{default:function(){return{}},type:Object},data:{default:function(){return{}},type:Object},formtype:{default:function(){return""},type:String}},emits:["close","enter"],setup:function(t,r){var w=r.emit,k=t,b=a({}),_=a([]),x=a([]),C=a([]),j=a([]),E=a(0),V=a({user_uuids:[{required:!0,message:"请选择用户",trigger:"blur"}]}),L=function(){var t=n(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.value=k.form,b.value.cluster_roles||(b.value.cluster_roles=[]),b.value.namespace_roles||(b.value.namespace_roles=[]),E.value=k.data.id;case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();L();var O=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({cluster_id:E.value,role_type:"cluster"});case 2:0===(n=e.sent).code&&(x.value=n.data.roles);case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();O();var A=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({cluster_id:E.value,role_type:"namespace"});case 2:0===(n=e.sent).code&&(C.value=n.data.roles);case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();A();var T=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({page:1,pageSize:9999});case 2:0===(n=e.sent).code&&(_.value=n.data.list);case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();T();var N=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({id:E.value});case 2:0===(n=e.sent).code&&(j.value=n.data.namespaces);case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();N();var S=function(){D.value.resetFields(),w("close")},D=a(null),P=function(){var t=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D.value.validate(function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(b.value.cluster_id=E.value,w("enter",b.value));case 1:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(e,n){var r=h,a=U,y=z,w=B,k=g,E=F;return u(),l("div",oe,[o(E,{ref_key:"FormBlock",ref:D,model:b.value,rules:V.value,"label-width":"100px"},{default:i((function(){return[o(w,{label:"用户",prop:"user"},{default:i((function(){return["edit"===t.formtype?(u(),c(r,{key:0,modelValue:b.value.nickName,"onUpdate:modelValue":n[0]||(n[0]=function(e){return b.value.nickName=e}),disabled:"",autocomplete:"off"},null,8,["modelValue"])):(u(),c(y,{key:1,modelValue:b.value.user_uuids,"onUpdate:modelValue":n[1]||(n[1]=function(e){return b.value.user_uuids=e}),placeholder:"请选择用户",multiple:"",filterable:"",style:{width:"100%"}},{default:i((function(){return[(u(!0),l(s,null,f(_.value,(function(e){return u(),c(a,{key:e.userName,label:e.nickName,value:e.uuid},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]))]})),_:1}),o(w,{label:"集群权限",prop:"cluster_roles"},{default:i((function(){return[o(y,{modelValue:b.value.cluster_roles,"onUpdate:modelValue":n[2]||(n[2]=function(e){return b.value.cluster_roles=e}),placeholder:"请选择角色",multiple:"",filterable:"",style:{width:"100%"}},{default:i((function(){return[(u(!0),l(s,null,f(x.value,(function(e){return u(),c(a,{key:e.metadata.name,label:e.metadata.name,value:e.metadata.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),o(w,{label:"命名空间角色",prop:"namespace_roles"},{default:i((function(){return[d("table",ie,[n[7]||(n[7]=d("thead",null,[d("tr",null,[d("th",{style:{width:"30%"}},"命名空间"),d("th",{style:{width:"30%"}},"角色"),d("th",{style:{width:"30%"}},"操作")])],-1)),d("tbody",null,[d("tr",null,[d("td",ce,[o(k,{size:"small",type:"primary",link:"",icon:"plus",onClick:n[3]||(n[3]=function(t){return e.item,void b.value.namespace_roles.push({namespace:"",roles:[]})})},{default:i((function(){return n[4]||(n[4]=[p("添加")])})),_:1})])]),0===b.value.namespace_roles.length?(u(),l("tr",se,n[5]||(n[5]=[d("td",{style:{"text-align":"center"},colspan:"4"},"无数据",-1)]))):v("",!0),(u(!0),l(s,null,f(b.value.namespace_roles,(function(e,t){return u(),l("tr",{key:t},[d("td",null,[o(y,{modelValue:e.namespace,"onUpdate:modelValue":function(t){return e.namespace=t},filterable:"",style:{width:"90%"}},{default:i((function(){return[(u(!0),l(s,null,f(j.value,(function(e,t){return u(),c(a,{key:t,value:e.metadata.name},{default:i((function(){return[p(m(e.metadata.name),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]),d("td",null,[o(y,{modelValue:e.roles,"onUpdate:modelValue":function(t){return e.roles=t},multiple:"",filterable:"",style:{width:"90%"}},{default:i((function(){return[(u(!0),l(s,null,f(C.value,(function(e,t){return u(),c(a,{key:t,value:e.metadata.name},{default:i((function(){return[p(m(e.metadata.name),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]),d("td",null,[o(k,{type:"danger",link:"",icon:"delete",size:"small",onClick:function(t){return function(e){b.value.namespace_roles.splice(e,1)}(e)}},{default:i((function(){return n[6]||(n[6]=[p("删除")])})),_:2},1032,["onClick"])])])})),128))])])]})),_:1})]})),_:1},8,["model","rules"]),d("div",fe,[o(k,{size:"small",onClick:S},{default:i((function(){return n[8]||(n[8]=[p("取 消")])})),_:1}),o(k,{size:"small",type:"primary",onClick:P},{default:i((function(){return n[9]||(n[9]=[p("确 定")])})),_:1})])])}}}),ve={class:"dycloud-btn-list"},me={key:0},ye={key:1},he={class:"dialog-footer"},ge={key:0,class:"downloadKubeconfig"},we={name:"Users"},ke=Object.assign(we,{props:{form:{default:function(){return{}},type:Object}},setup:function(t){var r=t,c=a(!1),s=a(!1),f=a({}),m=a({}),y=a(""),h=a(!0),w=function(){var t=n(e().mark((function t(n){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=5,J({id:n.id});case 5:0===(r=e.sent).code&&(f.value=r.data.cluster);case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=a(0),x=function(){var t=n(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.value=r.form,_.value=r.form.id,w(f.value);case 3:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();x();var C=function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.value="edit",m.value=n,"string"==typeof n.cluster_roles&&""!==n.cluster_roles)try{m.value.cluster_roles=JSON.parse(n.cluster_roles)}catch(t){}if("string"==typeof n.namespace_roles&&""!==n.namespace_roles)try{m.value.namespace_roles=JSON.parse(n.namespace_roles)}catch(t){}c.value=!0;case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.confirm("您确定要删除  "+r.nickName+" 用户？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({cluster_id:_.value,user_uuids:[r.uuid]});case 2:0===(n=e.sent).code&&b({type:"success",message:n.msg}),T();case 5:case"end":return e.stop()}}),t)})))).catch((function(){b({type:"info",message:"已取消删除!"})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=a(""),V=function(){y.value="add",E.value="添加用户授权",f.value.users=[],c.value=!0},L=function(){c.value=!1,s.value=!1,m.value={}},O=function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=y.value,e.next="create"===e.t0?3:"edit"===e.t0?10:17;break;case 3:return e.next=5,G(n);case 5:case 19:return 0===e.sent.code&&b({type:"success",message:"用户添加中，请稍后刷新!"}),c.value=!1,T(),e.abrupt("break",24);case 10:return e.next=12,K(n);case 12:return 0===e.sent.code&&b({type:"success",message:"角色更新成功!"}),c.value=!1,T(),e.abrupt("break",24);case 17:return e.next=19,G(n);case 24:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){L(),x()},U=a(""),z=function(e){if("{}"!==JSON.stringify(e))return ae.dump(e)},B=a([]),F=a(""),D=function(e){F.value="",e.forEach((function(e){e.nickName&&(F.value+=e.nickName+" , ")})),B.value=e},R=function(){0!==B.value.map((function(e){return e.uuid})).length?k.confirm("您确定要删除  "+F.value+" 这些用户？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({cluster_id:_.value,user_uuids:B.value.map((function(e){return e.uuid}))});case 2:0===(n=e.sent).code&&b({type:"success",message:n.msg}),T();case 5:case"end":return e.stop()}}),t)})))).catch((function(){b({type:"info",message:"已取消删除!"})})):b({message:"请选择要删除的用户！",type:"warning"})};return function(e,t){var n=g,r=N,a=S,w=A,k=te,_=ne;return u(),l("div",null,[d("div",ve,[o(n,{size:"small",link:"",type:"primary",icon:"plus",onClick:V},{default:i((function(){return t[4]||(t[4]=[p("添加")])})),_:1}),o(n,{size:"small",link:"",type:"primary",icon:"delete",onClick:R},{default:i((function(){return t[5]||(t[5]=[p("删除")])})),_:1}),o(n,{size:"small",link:"",type:"primary",icon:"refresh",onClick:T},{default:i((function(){return t[6]||(t[6]=[p("刷新")])})),_:1})]),o(a,{ref:"multipleTable",data:f.value.users,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:D},{default:i((function(){return[o(r,{type:"selection",width:"55"}),o(r,{align:"left",label:"英文名称",prop:"userName"}),o(r,{align:"left",label:"名称",prop:"nickName"}),o(r,{align:"left",label:"操作"},{default:i((function(e){return[o(n,{size:"small",type:"primary",link:"",icon:"edit",onClick:function(t){return n=e.row,E.value="用户 "+n.nickName+"  的凭据",U.value=JSON.parse(n.kube_config),void(s.value=!0);var n}},{default:i((function(){return t[7]||(t[7]=[p("凭据")])})),_:2},1032,["onClick"]),o(n,{size:"small",type:"primary",link:"",icon:"edit",onClick:function(t){return C(e.row)}},{default:i((function(){return t[8]||(t[8]=[p("变更")])})),_:2},1032,["onClick"]),o(n,{type:"primary",link:"",icon:"delete",size:"small",onClick:function(t){return j(e.row)}},{default:i((function(){return t[9]||(t[9]=[p("删除")])})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),c.value?(u(),l("div",me,[o(w,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.value=e}),width:"60%",title:E.value},{default:i((function(){return[o(pe,{form:m.value,formtype:y.value,data:f.value,onClose:L,onEnter:O},null,8,["form","formtype","data"])]})),_:1},8,["modelValue","title"])])):v("",!0),s.value?(u(),l("div",ye,[o(w,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return s.value=e}),width:"70%",title:E.value},{default:i((function(){return[d("div",he,[o(_,null,{default:i((function(){return[o(k,{span:24},{default:i((function(){return[h.value?(u(),l("div",ge,[o(n,{class:"btn",size:"small",type:"primary",link:"",icon:"Download",onClick:t[1]||(t[1]=function(e){return t=U.value,n=new Blob([z(t)],{type:"application/yaml"}),(r=document.createElement("a")).href=URL.createObjectURL(n),r.download="config",r.click(),void URL.revokeObjectURL(r.href);var t,n,r})},{default:i((function(){return t[10]||(t[10]=[p("下载")])})),_:1})])):v("",!0)]})),_:1})]})),_:1}),d("div",null,[o(n,{type:"primary",link:"",icon:"CopyDocument",size:"small",class:"copydocument",onClick:t[2]||(t[2]=function(e){return t=U.value,(n=document.createElement("textarea")).value=z(t),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),void b({type:"success",message:"内容已经拷贝到剪贴板"});var t,n})},{default:i((function(){return t[11]||(t[11]=[p("复制")])})),_:1})]),o(re,{data:U.value,"read-only":h.value},null,8,["data","read-only"])])]})),_:1},8,["modelValue","title"])])):v("",!0)])}}}),be=w(ke,[["__scopeId","data-v-dd44c345"]]),_e={class:"credentialadd"},xe={class:"credentialadd"},Ce={class:"downloadKubeconfig"},je={key:0,ref:"textToCopy"},Ee={name:"Kubeconfig"},Ve=Object.assign(Ee,{props:{form:{default:function(){return{}},type:Object}},setup:function(t){var r=t,c=a(!1),s=a(!0),f=a({}),m=a({}),y=function(){var t=n(e().mark((function t(){var n,r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.value=!1,e.next=3,Q({id:h.value.id});case 3:if(0===(n=e.sent).code&&n.data.user.length>0)for(r in n.data.user)void 0!==r&&""!==n.data.user[r].kube_config&&(m.value=n.data.user[r],f.value=JSON.parse(n.data.user[r].kube_config),c.value=!0);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=a({}),w=a(0);h.value=r.form,w.value=h.value.id,y();var C=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q({id:w.value});case 2:0===(n=e.sent).code&&b({type:"success",message:n.msg}),y();case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=a(""),E=function(){"{}"!==JSON.stringify(f.value)&&(j.value=ae.dump(f.value))},V=function(){E();var e=new Blob([j.value],{type:"application/yaml"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="config",t.click(),URL.revokeObjectURL(t.href)},L=function(){E();var e=document.createElement("textarea");e.value=j.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),b({type:"success",message:"内容已经拷贝到剪贴板"})},O=function(){var t=a({user_uuids:[],cluster_id:0});k.confirm("您确定要吊销  "+m.value.nickName+" 用户凭据？, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(e().mark((function n(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.value.user_uuids.push(m.value.uuid),t.value.cluster_id=w.value,e.next=5,P(t.value);case 5:0===e.sent.code&&(b({type:"success",message:"凭据已吊销，请重新申请!"}),y());case 7:case"end":return e.stop()}}),n)})))).catch((function(){b({type:"info",message:"已取消吊销!"})}))};return function(e,t){var n=g,r=te,a=ne;return u(),l("div",null,[d("div",null,[_(o(n,{type:"primary",link:"",icon:"CopyDocument",size:"small",class:"copydocument",onClick:L},{default:i((function(){return t[0]||(t[0]=[p("复制")])})),_:1},512),[[x,c.value]])]),o(a,null,{default:i((function(){return[o(r,{span:12},{default:i((function(){return[_(d("div",_e,[o(n,{size:"small",type:"primary",onClick:C},{default:i((function(){return t[1]||(t[1]=[p("凭据申请")])})),_:1})],512),[[x,!c.value]]),_(d("div",xe,[o(n,{size:"small",type:"primary",onClick:O},{default:i((function(){return t[2]||(t[2]=[p("吊销凭据")])})),_:1})],512),[[x,c.value]])]})),_:1}),o(r,{span:12},{default:i((function(){return[_(d("div",Ce,[o(n,{class:"btn",size:"small",type:"primary",link:"",icon:"Download",onClick:V},{default:i((function(){return t[3]||(t[3]=[p("下载")])})),_:1})],512),[[x,c.value]])]})),_:1})]})),_:1}),c.value?(u(),l("div",je,[o(re,{data:f.value,"read-only":s.value},null,8,["data","read-only"])],512)):v("",!0)])}}}),Le=w(Ve,[["__scopeId","data-v-aaf3da3d"]]),Oe={name:"Rbac"},Ae=Object.assign(Oe,{props:{form:{default:function(){return{}},type:Object}},setup:function(e){var t=e,n=a({});return n.value=t.form,function(e,t){var r=$,a=ee;return u(),l("div",null,[o(a,{style:{width:"100%"}},{default:i((function(){return[o(r,{label:"连接信息"},{default:i((function(){return[o(Le,{form:n.value},null,8,["form"])]})),_:1}),o(r,{label:"用户"},{default:i((function(){return[o(be,{form:n.value},null,8,["form"])]})),_:1}),o(r,{label:"角色"},{default:i((function(){return[o(ue,{form:n.value},null,8,["form"])]})),_:1})]})),_:1})])}}}),Te={class:"dycloud-search-box"},Ue={class:"dycloud-table-box"},ze={class:"dycloud-btn-list"},Ne={class:"dycloud-pagination"},Se={key:0},Be={key:1};t("default",Object.assign({name:"K8sCluster"},{__name:"k8sCluster",setup:function(t){var r=a(!1),f=a({}),y=C({createdAt:[{validator:function(e,t,n){P.value.startCreatedAt&&!P.value.endCreatedAt?n(new Error("请填写结束日期")):!P.value.startCreatedAt&&P.value.endCreatedAt?n(new Error("请填写开始日期")):P.value.startCreatedAt&&P.value.endCreatedAt&&(P.value.startCreatedAt.getTime()===P.value.endCreatedAt.getTime()||P.value.startCreatedAt.getTime()>P.value.endCreatedAt.getTime())?n(new Error("开始日期应当早于结束日期")):n()},trigger:"change"}]}),w=a(),_=a({}),x=a(""),U=a(1),z=a(0),R=a(10),I=a([]),P=a({}),G=function(){P.value={},$()},K=function(){var t;null===(t=w.value)||void 0===t||t.validate(function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:U.value=1,R.value=10,$();case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},q=function(e){R.value=e,$()},Q=function(e){U.value=e,$()},$=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({page:U.value,pageSize:R.value,startCreatedAt:P.value.startCreatedAt,endCreatedAt:P.value.endCreatedAt,name:P.value.name});case 2:0===(n=e.sent).code&&(I.value=n.data.list,z.value=n.data.total,U.value=n.data.page,R.value=n.data.pageSize);case 4:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();$();var ee=function(){var t=n(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ee();var te=a([]),ne=function(e){te.value=e},re=function(){var t=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.confirm("您确定要删除选中的集群？, 集群相关授权也会一并删除，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],0!==te.value.length){e.next=4;break}return b({type:"warning",message:"请选择要删除的数据"}),e.abrupt("return");case 4:return te.value&&te.value.map((function(e){n.push(e.id)})),e.next=7,H({IDs:n});case 7:0===e.sent.code&&(b({type:"success",message:"删除成功"}),I.value.length===n.length&&U.value>1&&U.value--,$());case 9:case"end":return e.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=a(""),ue=function(){var t=n(e().mark((function t(n){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({id:n.id});case 2:r=e.sent,ae.value="update",0===r.code&&(f.value=r.data.cluster,ie.value=!0);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),oe=function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({id:n.id});case 2:0===e.sent.code&&(b({type:"success",message:"删除成功"}),1===I.value.length&&U.value>1&&U.value--,$());case 4:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ie=a(!1),ce=function(){ie.value=!1,f.value={}},se=a(!1),fe=function(){var t=n(e().mark((function t(n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.value="集群授权",_.value=n,se.value=!0;case 3:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),de=function(){var t=n(e().mark((function t(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=ae.value,e.next="create"===e.t0?6:"update"===e.t0?10:15;break;case 6:return e.next=8,W(f.value);case 8:return n=e.sent,e.abrupt("break",19);case 10:return e.next=13,X(f.value);case 13:return n=e.sent,e.abrupt("break",19);case 15:return e.next=17,W(f.value);case 17:return n=e.sent,e.abrupt("break",19);case 19:0===n.code&&(b({type:"success",message:"创建/更改成功"}),ce(),$());case 20:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return function(e,t){var n=j("QuestionFilled"),a=O,b=le,C=D,J=B,Y=h,H=g,M=F,W=N,X=S,$=T,ee=A;return u(),l("div",null,[d("div",Te,[o(M,{ref_key:"elSearchFormRef",ref:w,inline:!0,model:P.value,class:"demo-form-inline",rules:y,onKeyup:E(K,["enter"])},{default:i((function(){return[o(J,{label:"创建日期",prop:"createdAt"},{label:i((function(){return[d("span",null,[t[8]||(t[8]=p(" 创建日期 ")),o(b,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((function(){return[o(a,null,{default:i((function(){return[o(n)]})),_:1})]})),_:1})])]})),default:i((function(){return[o(C,{modelValue:P.value.startCreatedAt,"onUpdate:modelValue":t[0]||(t[0]=function(e){return P.value.startCreatedAt=e}),type:"datetime",placeholder:"开始日期","disabled-date":function(e){return!!P.value.endCreatedAt&&e.getTime()>P.value.endCreatedAt.getTime()}},null,8,["modelValue","disabled-date"]),t[9]||(t[9]=p(" — ")),o(C,{modelValue:P.value.endCreatedAt,"onUpdate:modelValue":t[1]||(t[1]=function(e){return P.value.endCreatedAt=e}),type:"datetime",placeholder:"结束日期","disabled-date":function(e){return!!P.value.startCreatedAt&&e.getTime()<P.value.startCreatedAt.getTime()}},null,8,["modelValue","disabled-date"])]})),_:1}),o(J,{label:"集群名称",prop:"name"},{default:i((function(){return[o(Y,{modelValue:P.value.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return P.value.name=e}),placeholder:"搜索条件"},null,8,["modelValue"])]})),_:1}),r.value?(u(),l(s,{key:0},[],64)):v("",!0),o(J,null,{default:i((function(){return[o(H,{type:"primary",icon:"search",onClick:K},{default:i((function(){return t[10]||(t[10]=[p("查询")])})),_:1}),o(H,{icon:"refresh",onClick:G},{default:i((function(){return t[11]||(t[11]=[p("重置")])})),_:1}),r.value?(u(),c(H,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:t[4]||(t[4]=function(e){return r.value=!1})},{default:i((function(){return t[13]||(t[13]=[p("收起")])})),_:1})):(u(),c(H,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:t[3]||(t[3]=function(e){return r.value=!0})},{default:i((function(){return t[12]||(t[12]=[p("展开")])})),_:1}))]})),_:1})]})),_:1},8,["model","rules"])]),d("div",Ue,[d("div",ze,[o(H,{size:"small",type:"primary",icon:"plus",onClick:t[5]||(t[5]=function(e){return ie.value=!1,ae.value="create",x.value="创建",_.value={},void(ie.value=!0)})},{default:i((function(){return t[14]||(t[14]=[p("新增")])})),_:1}),o(H,{icon:"delete",style:{"margin-left":"10px"},disabled:!te.value.length,onClick:re},{default:i((function(){return t[15]||(t[15]=[p("删除")])})),_:1},8,["disabled"])]),o(X,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:I.value,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"},"row-key":"ID",onSelectionChange:ne},{default:i((function(){return[o(W,{type:"selection",width:"55"}),o(W,{align:"left",label:"集群ID",prop:"id",width:"200"}),o(W,{align:"left",label:"集群名称",prop:"name",width:"300"}),o(W,{align:"left",label:"日期",prop:"createdAt",width:"400"},{default:i((function(e){return[p(m(V(L)(e.row.CreatedAt)),1)]})),_:1}),o(W,{align:"left",label:"操作",fixed:"right","min-width":"400"},{default:i((function(e){return[o(H,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:function(t){return fe(e.row)}},{default:i((function(){return t[16]||(t[16]=[p("授权")])})),_:2},1032,["onClick"]),o(H,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:function(t){return ue(e.row)}},{default:i((function(){return t[17]||(t[17]=[p("变更")])})),_:2},1032,["onClick"]),o(H,{type:"primary",link:"",icon:"delete",onClick:function(t){return n=e.row,void k.confirm("您确定要删除  "+n.name+" 该集群？, 集群相关授权也会一并删除，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){oe(n)}));var n}},{default:i((function(){return t[18]||(t[18]=[p("删除")])})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),d("div",Ne,[o($,{layout:"total, sizes, prev, pager, next, jumper","current-page":U.value,"page-size":R.value,"page-sizes":[10,30,50,100],total:z.value,onCurrentChange:Q,onSizeChange:q},null,8,["current-page","page-size","total"])])]),ie.value?(u(),l("div",Se,[o(ee,{modelValue:ie.value,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ie.value=e}),width:"40%",title:x.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{default:i((function(){return[o(Z,{form:f.value,onClose:ce,onEnter:de},null,8,["form"])]})),_:1},8,["modelValue","title"])])):v("",!0),se.value?(u(),l("div",Be,[o(ee,{modelValue:se.value,"onUpdate:modelValue":t[7]||(t[7]=function(e){return se.value=e}),width:"70%",title:x.value,"close-on-press-escape":!1,"close-on-click-modal":!1},{default:i((function(){return[o(Ae,{form:_.value,onClose:ce,onEnter:de},null,8,["form"])]})),_:1},8,["modelValue","title"])])):v("",!0)])}}}))}}}))}();
