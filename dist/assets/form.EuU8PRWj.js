/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as l,c as a,e as t,w as o,h as u,b as n,F as d,v as s,g as i,k as r,E as m}from"./index.ABWJOL2Q.js";/* empty css             *//* empty css               */import{a as p,E as c}from"./form-item.ujPiwBAF.js";/* empty css              */import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";const v={style:{overflow:"hidden",width:"100%"}},f={style:{width:"98%"},class:"tab-table"},h={align:"left"},y={style:{width:"98%"},class:"tab-table"},b={align:"left"},k={class:"dialog-footer",align:"right"},g={name:"FormBlock",emits:{close:()=>!0,enter:e=>1===e.length}},V=Object.assign(g,{props:{form:{default:function(){return{}},type:Object},optype:{default:function(){return""},type:String}},emits:["close","enter"],setup(g,{emit:V}){const _=V,j=g,w=e({name:[{required:!0,message:"请输入名称",trigger:"blur"}],kube_config:[{required:!0,message:"请输入集群凭据",trigger:"blur"}],prometheus:[{required:!0,message:"请输入Prometheus地址",trigger:"blur"}]}),U=e([]),C=e([]),x=e({}),z=e(!1);x.value=j.form,z.value=j.optype,(()=>{if(x.value.metadata.labels)for(const e in x.value.metadata.labels)U.value.push({index:Math.random(),key:e,value:x.value.metadata.labels[e]})})(),(()=>{if(x.value.metadata.annotations)for(const e in x.value.metadata.annotations)C.value.push({index:Math.random(),key:e,value:x.value.metadata.annotations[e]})})();const F=()=>{O.value.resetFields(),_("close")},M=e=>{const l={index:Math.random(),key:"",value:""};U.value.push(l)},q=e=>{const l={index:Math.random(),key:"",value:""};C.value.push(l)},O=e(null),A=async()=>{O.value.validate((async e=>{e&&(await(()=>{if(U.value.length){const e={};for(let l=0;l<U.value.length;l++)""!==U.value[l].key&&(e[U.value[l].key]=U.value[l].value);x.value.metadata.labels=e}})(),_("enter",x.value))}))};return(e,g)=>{const V=r,_=p,j=m,B=c;return l(),a("div",v,[t(B,{ref_key:"FormBlock",ref:O,model:x.value,rules:w.value,"label-width":"100px"},{default:o((()=>[t(_,{label:"名称",prop:"metadata.name"},{default:o((()=>["update"===z.value?(l(),u(V,{key:0,modelValue:x.value.metadata.name,"onUpdate:modelValue":g[0]||(g[0]=e=>x.value.metadata.name=e),disabled:"",autocomplete:"off"},null,8,["modelValue"])):(l(),u(V,{key:1,modelValue:x.value.metadata.name,"onUpdate:modelValue":g[1]||(g[1]=e=>x.value.metadata.name=e),autocomplete:"off"},null,8,["modelValue"]))])),_:1}),t(_,{label:"标签",prop:"metadata.labels"},{default:o((()=>[n("table",f,[g[4]||(g[4]=n("tr",null,[n("th",{scope:"col",width:"48%",align:"left"},[n("label",null,"键")]),n("th",{scope:"col",width:"48%",align:"left"},[n("label",null,"值")]),n("th",{align:"left"})],-1)),(l(!0),a(d,null,s(U.value,((e,u)=>(l(),a("tr",{key:u},[n("td",null,[t(V,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"请输入键"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[t(V,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[t(j,{type:"danger",link:"",icon:"delete",size:"small",onClick:e=>(e=>{U.value.splice(e,1)})(u)},{default:o((()=>g[2]||(g[2]=[i("删除")]))),_:2},1032,["onClick"])])])))),128)),n("tr",null,[n("td",h,[t(j,{size:"small",type:"primary",link:"",icon:"plus",onClick:M},{default:o((()=>g[3]||(g[3]=[i("添加")]))),_:1})])])])])),_:1}),t(_,{label:"注解",prop:"metadata.annotations"},{default:o((()=>[n("table",y,[g[7]||(g[7]=n("tr",null,[n("th",{scope:"col",width:"48%",align:"left"},[n("label",null,"键")]),n("th",{scope:"col",width:"48%",align:"left"},[n("label",null,"值")]),n("th",{align:"left"})],-1)),(l(!0),a(d,null,s(C.value,((e,u)=>(l(),a("tr",{key:u},[n("td",null,[t(V,{modelValue:e.key,"onUpdate:modelValue":l=>e.key=l,placeholder:"请输入键"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[t(V,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[t(j,{type:"danger",link:"",icon:"delete",size:"small",onClick:e=>(e=>{C.value.splice(e,1)})(u)},{default:o((()=>g[5]||(g[5]=[i("删除")]))),_:2},1032,["onClick"])])])))),128)),n("tr",null,[n("td",b,[t(j,{size:"small",type:"primary",link:"",icon:"plus",onClick:q},{default:o((()=>g[6]||(g[6]=[i("添加")]))),_:1})])])])])),_:1})])),_:1},8,["model","rules"]),n("div",k,[t(j,{size:"small",onClick:F},{default:o((()=>g[8]||(g[8]=[i("取 消")]))),_:1}),t(j,{size:"small",type:"primary",onClick:A},{default:o((()=>g[9]||(g[9]=[i("确 定")]))),_:1})])])}}});export{V as default};
