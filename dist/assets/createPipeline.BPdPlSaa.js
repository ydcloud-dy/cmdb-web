/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as e,a,M as l,r as t,q as u,H as o,i as r,P as s,o as d,h as n,w as i,e as m,b as c,c as p,F as v,v as f,g as h,t as b,f as _,n as V,B as g,k as y,E as k,Q as w}from"./index.ABWJOL2Q.js";import{E as x,a as j,b as C}from"./main.Bbq1dHus.js";import{E as U,a as S}from"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                *//* empty css               */import{E as q}from"./scrollbar.3ySweVnY.js";/* empty css            */import{E as T}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as N}from"./drawer.XhtctEYG.js";import{E as P}from"./switch.CqADXIhW.js";/* empty css                    *//* empty css              *//* empty css               */import{E}from"./card.RgDT494R.js";/* empty css             */import{E as O,a as I}from"./col.BzMVCOvM.js";import{E as D,a as z}from"./select.C2tLDQ30.js";import{a as A,E as B}from"./form-item.ujPiwBAF.js";/* empty css              */import{g as R}from"./service.5FwJlJUs.js";import L from"./flow-frame.DUxEqhhJ.js";import{d as J}from"./applications.GrMV9Sfs.js";import{g as F}from"./buildEnv.vyGXBGni.js";import{c as H}from"./pipelines.B5fOuFXJ.js";import{g as M}from"./codeSource.zRy1fTFq.js";import{E as K}from"./index.DglrVZRl.js";import{E as Q,a as Y}from"./index.DINKPDpR.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";import"./_baseIteratee.BPaQBmlP.js";import"./isEqual.CtpQH3Dm.js";import"./debounce.CkdGDwJt.js";import"./index.6ock-Gvr.js";import"./refs.CZv2DkwS.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./_baseClone.gl1e0kmI.js";const W={class:"stage-task"},G={class:"stage-task-left"},X={class:"task-source"},Z={class:"task-content"},$={key:0,class:"repo-url"},ee={key:1,class:"branch-info"},ae={class:"stage-task-right"},le={class:"flow-list"},te={class:"header",style:{cursor:"pointer"}},ue={class:"footer-buttons"},oe=["id"],re={class:"footer-edit"},se={class:"footer"},de=e({__name:"createPipeline",setup(e){const de=a([]),ne=a([]),ie=l(),me=a(!1),ce=a("编辑任务");a(-1),a(-1);const pe=a(!1),ve=ie.query.appId;ie.query.name,ie.query.gitUrl;const fe=t({namespace:"",name:"",environment:"",environmentOptions:[]}),he=t({url:"",appCode:"",defaultBranch:"",gitType:"",voucherType:"",branch:"",codeSourceStatus:0,repoId:null});a([]);const be=t({name:"",executor:"",params:[]}),_e=a(!1),Ve=a(!1),ge=a([]),ye=a([]);u((async()=>{await Ie(),ke();try{const e=await R({page:1,pageSize:1e3});e&&e.data&&e.data.list&&(ne.value=e.data.list,ne.value.length>0&&(ze.value.warehouse=ne.value[0].config.url))}catch(e){}try{const e=await F({page:1,pageSize:10});e&&e.data&&e.data.list&&(ye.value=e.data.list,ye.value.length>0&&(ze.value.image=ye.value[0].image))}catch(e){}})),a(-1);const ke=async()=>{try{const e=await M({page:1,pageSize:1e4});0===e.code&&e.data.list&&(ge.value=e.data.list)}catch(e){}},we=()=>{Ve.value=!0},xe=()=>{for(let e in ze.value)ze.value[e]=""},je=(e,a)=>{"group"==a?(be.name="",be.params=[],_e.value=!0,Ue.value=e,be.name=e.name,be.params=[...e.params],pe.value=!0):(xe(),Ce.value=!0,Se.value=e,_e.value=!0)},Ce=a(!1),Ue=a({}),Se=a({}),qe=a(null),Te=()=>{if(!ge.value||0===ge.value.length)return;if(!he.gitType)return;const e=ge.value.find((e=>e.name===he.gitType));e&&(he.repoId=e.ID)},Ne=()=>{Te(),he.url&&he.defaultBranch?(he.defaultBranch="main",he.branch="main",r.success("关联代码库成功"),Ve.value=!1):r.error("请填写完整信息")};o((()=>de.value.length)),o((()=>0===de.value.length?0:de.value[0].length));const Pe=()=>{Ue.value.taskList.splice(qe.value,1),de.value=de.value.filter((e=>e.taskList.length>0)),me.value=!1,r.success("任务已删除")},Ee=(e=-1)=>{pe.value=!1,_e.value=!0},Oe=(e,a)=>{_e.value=!0,pe.value=!1},Ie=async()=>{try{const e=await J(ve);0===e.code&&e.data?(he.url=e.data.gitRepo||"",he.defaultBranch=e.data.branch||"main",he.appCode=e.data.appCode,fe.environmentOptions=e.data.envs.map((e=>({label:e.envName,value:e.envCode,namespace:e.namespace,clusterName:e.clusterName})))):r.error(e.msg||"获取应用详情失败")}catch(e){r.error("加载应用详情失败，请稍后重试")}},De=()=>{if(pe.value){const e=JSON.parse(JSON.stringify(be));for(let a in e)Ue.value[a]=e[a];_e.value=!1,r.success("阶段已修改")}else be.name?(de.value.push({name:be.name,params:be.params,taskList:[{transformIndex:0,name:"",branch:"",image:"",voucherType:"1",textarea:"#!/bin/sh",spatialName:"",warehouse:"",mirrorTag:"",dockerfile:"",contextPath:"",productName:"",productPath:"",version:"",resource:"",yamlResource:"",goalResource:"",openScript:""}]}),_e.value=!1,r.success("新阶段已添加")):r.error("请填写阶段名称");be.name="",be.params=[],pe.value=!1},ze=a({transformIndex:0,name:"",branch:"",image:"",voucherType:"1",textarea:"#!/bin/sh",spatialName:"",warehouse:"",mirrorTag:"",dockerfile:"",contextPath:"",productName:"",productPath:"",version:"",resource:"",yamlResource:"",goalResource:"",openScript:""});a();const Ae=()=>{if(me.value=!1,ze.value.transformIndex=Date.now(),Ce.value){const e=JSON.parse(JSON.stringify(ze.value));for(let a in e)Se.value[a]=e[a]}else Ue.value.taskList.push(JSON.parse(JSON.stringify(ze.value)));r.success("并行任务已添加")},Be=()=>{be.params.push({name:"",defaultValue:""})},Re=e=>{ze.value.textarea="1"==e?"#!/bin/sh":"2"==e?"#!/bin/bash":"#!/bin/python"},Le=e=>{};function Je(e){const a=ne.value.find((a=>a.config.url===e));return a?{username:a.config.username,password:a.config.password}:{username:"",password:""}}const Fe=async()=>{const e={name:fe.name,app_name:he.appCode,env_name:fe.environment,build_script:"#!/bin/sh",k8s_namespace:He(fe.environment,"namespace"),k8s_cluster_name:He(fe.environment,"clusterName"),registry_url:"".concat(ze.value.warehouse,"/").concat(ze.value.spatialName),registry_user:Je(ze.value.warehouse).username,registry_pass:Je(ze.value.warehouse).password,git_url:"https://gitee.com/dycloud5416/spring-boot-helloWorld.git",git_branch:"main",repo_id:he.repoId,git_commit_id:"",stages:de.value.map(((e,a)=>({name:e.name,params:e.params.map((e=>({name:e.name,defaultValue:e.defaultValue}))),task_list:e.taskList.map(((e,a)=>({name:e.name,branch:e.branch||"".concat(a+1),plugin:"maven"===e.name?"执行脚本":"build-and-push"===e.name?"镜像打包并推送到仓库":"deploy"===e.name?"部署到Kubernetes":"",image:e.image||"",script:e.textarea||"",spatial_name:e.spatialName||"",warehouse:e.warehouse||"",mirror_tag:e.mirrorTag||"",dockerfile:e.dockerfile||"",context_path:e.contextPath||"",product_name:e.productName||"",product_path:e.productPath||"",version:e.version||"",resource:e.resource||"",yaml_resource:e.yamlResource||"",goal_resource:e.goalResource||"",open_script:e.openScript||""})))})))},a=fe.environment,l=fe.environmentOptions.find((e=>e.value===a));let t;e.k8s_namespace=l?l.namespace:"default",t=await H(e),t&&0===t.code?r.success("流水线已保存"):r({type:"error",message:t?t.msg:"操作失败"})};function He(e,a){if(!fe.environmentOptions||!Array.isArray(fe.environmentOptions))return"";const l=fe.environmentOptions.find((a=>a.value===e));return l?l[a]:""}const Me=()=>{r.info("操作已取消")};return(e,a)=>{const l=x,t=y,u=A,o=O,r=D,R=z,J=I,F=B,H=E,M=k,ie=K,pe=j,ve=s("CircleCloseFilled"),ke=w,Ie=Q,Je=Y,He=P,Ke=N,Qe=s("QuestionFilled"),Ye=T,We=U,Ge=S,Xe=C;return d(),n(g(q),{class:"page-scrollbar"},{default:i((()=>[m(Xe,null,{default:i((()=>[m(l,null,{default:i((()=>a[31]||(a[31]=[c("h2",null,"创建流水线",-1)]))),_:1}),m(pe,null,{default:i((()=>[m(H,{class:"card-section",shadow:"never"},{default:i((()=>[a[32]||(a[32]=c("h3",null,"基本信息",-1)),m(F,{model:fe,"label-width":"80px"},{default:i((()=>[m(J,{gutter:20},{default:i((()=>[m(o,{span:12},{default:i((()=>[m(u,{label:"名称",required:""},{default:i((()=>[m(t,{modelValue:fe.name,"onUpdate:modelValue":a[0]||(a[0]=e=>fe.name=e),placeholder:"请输入流水线名称"},null,8,["modelValue"])])),_:1})])),_:1}),m(o,{span:12},{default:i((()=>[m(u,{label:"关联环境",required:""},{default:i((()=>[m(R,{modelValue:fe.environment,"onUpdate:modelValue":a[1]||(a[1]=e=>fe.environment=e),placeholder:"请选择关联环境"},{default:i((()=>[(d(!0),p(v,null,f(fe.environmentOptions,(e=>(d(),n(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),m(H,{class:"card-section",shadow:"never"},{default:i((()=>[a[36]||(a[36]=c("h3",null,"阶段任务",-1)),c("div",W,[c("div",G,[c("div",X,[m(H,{class:"task-card",shadow:"always"},{default:i((()=>[c("div",Z,[m(M,{type:"primary",plain:"",onClick:we},{default:i((()=>a[33]||(a[33]=[h("关联代码库")]))),_:1}),he.url?(d(),p("p",$,b(he.url),1)):_("",!0),he.branch&&he.url?(d(),p("div",ee,[a[34]||(a[34]=c("i",{class:"el-icon-branch"},null,-1)),m(ie,{type:"success"},{default:i((()=>[h(b(he.branch),1)])),_:1})])):_("",!0)])])),_:1}),c("div",{class:"line-and-button"},[a[35]||(a[35]=c("span",{class:"line"},null,-1)),c("button",{class:"add-task-icon",onClick:Ee}," + ")])])]),c("div",ae,[c("div",le,[(d(!0),p(v,null,f(de.value,((e,a)=>(d(),p("div",{key:a,class:"task-group"},[c("div",te,[m(ie,{effect:"dark",round:"",onClick:a=>je(e,"group")},{default:i((()=>[h(b(e.name||"#test"),1)])),_:2},1032,["onClick"])]),(d(!0),p(v,null,f(e.taskList,((l,t)=>(d(),p("div",{key:t,class:"flow-item"},[m(L,{x:a,y:t,"transform-index":l,phaseName:e.name,isShowAddTaskDialog:0==t,isShowwAdd:t==e.taskList.length-1,onEditTask:e=>je(l),onCreateTask:a=>(e=>{xe(),be.name="",be.params=[],Ce.value=!1,Ue.value=e,me.value=!0})(e),onHandleCircleClick:a=>((e,a,l)=>{Ce.value=!0,Se.value=e,Ue.value=a,qe.value=l;for(let t in e)ze.value[t]=e[t];me.value=!0})(l,e,t),onOpenAddTaskDialogFlow:Oe,"is-show":!0},null,8,["x","y","transform-index","phaseName","isShowAddTaskDialog","isShowwAdd","onEditTask","onCreateTask","onHandleCircleClick"])])))),128))])))),128))])])])])),_:1}),c("div",ue,[m(M,{type:"primary",onClick:Fe},{default:i((()=>a[37]||(a[37]=[h("保存")]))),_:1}),m(M,{onClick:Me},{default:i((()=>a[38]||(a[38]=[h("取消")]))),_:1})])])),_:1}),m(Ke,{modelValue:Ve.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Ve.value=e),"show-close":!1},{header:i((({close:e,titleId:l,titleClass:t})=>[c("h4",{id:l,class:V(t)},"关联代码库",10,oe),m(M,{type:"danger",onClick:e},{default:i((()=>[m(ke,{class:"el-icon--left"},{default:i((()=>[m(ve)])),_:1}),a[39]||(a[39]=h(" Close "))])),_:2},1032,["onClick"])])),footer:i((()=>[m(M,{onClick:a[7]||(a[7]=e=>Ve.value=!1)},{default:i((()=>a[42]||(a[42]=[h("取消")]))),_:1}),m(M,{type:"primary",onClick:Ne},{default:i((()=>a[43]||(a[43]=[h("确认")]))),_:1})])),default:i((()=>[m(F,{model:he,"label-width":"130px"},{default:i((()=>[m(u,{label:"代码库地址",required:""},{default:i((()=>[m(t,{modelValue:he.url,"onUpdate:modelValue":a[2]||(a[2]=e=>he.url=e),disabled:!0},null,8,["modelValue"])])),_:1}),m(u,{label:"默认分支",required:""},{default:i((()=>[m(t,{modelValue:he.defaultBranch,"onUpdate:modelValue":a[3]||(a[3]=e=>he.defaultBranch=e),disabled:!0},null,8,["modelValue"])])),_:1}),m(u,{label:"选择凭证类型",required:""},{default:i((()=>[m(Je,{modelValue:he.voucherType,"onUpdate:modelValue":a[4]||(a[4]=e=>he.voucherType=e)},{default:i((()=>[m(Ie,{value:1},{default:i((()=>a[40]||(a[40]=[h("密码方式")]))),_:1}),m(Ie,{value:2},{default:i((()=>a[41]||(a[41]=[h("密钥方式")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"服务连接",required:""},{default:i((()=>[m(R,{modelValue:he.gitType,"onUpdate:modelValue":a[5]||(a[5]=e=>he.gitType=e),placeholder:"请选择连接",onChange:Te},{default:i((()=>[(d(!0),p(v,null,f(ge.value,(e=>(d(),n(r,{key:e.ID,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"开启代码源触发",required:""},{default:i((()=>[m(He,{modelValue:he.codeSourceStatus,"onUpdate:modelValue":a[6]||(a[6]=e=>he.codeSourceStatus=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),m(Ye,{modelValue:me.value,"onUpdate:modelValue":a[27]||(a[27]=e=>me.value=e),title:ce.value},{footer:i((()=>[c("footer",re,[c("div",null,[m(M,{type:"primary",onClick:Ae},{default:i((()=>a[63]||(a[63]=[h("确认")]))),_:1}),m(M,{onClick:Pe,disabled:!Ce.value,class:"deleteBtn"},{default:i((()=>a[64]||(a[64]=[h("删除")]))),_:1},8,["disabled"])]),m(M,{onClick:a[26]||(a[26]=e=>me.value=!1)},{default:i((()=>a[65]||(a[65]=[h("取消")]))),_:1})])])),default:i((()=>[m(F,{model:ze.value,"label-width":"130px"},{default:i((()=>[m(u,{label:"任务名称",required:""},{default:i((()=>[m(t,{modelValue:ze.value.name,"onUpdate:modelValue":a[9]||(a[9]=e=>ze.value.name=e),placeholder:"请输入任务名称"},null,8,["modelValue"])])),_:1}),m(u,{label:"任务插件",required:""},{default:i((()=>[m(R,{modelValue:ze.value.branch,"onUpdate:modelValue":a[10]||(a[10]=e=>ze.value.branch=e),placeholder:"请选择任务插件",onChange:Le},{default:i((()=>[m(r,{label:"执行脚本",value:"1"}),m(r,{label:"镜像打包并推送到仓库",value:"2"}),m(r,{label:"构建产物上传至OSS",value:"3"}),m(r,{label:"KBS资源部署",value:"4"}),m(r,{label:"产物上传制品库",value:"5"})])),_:1},8,["modelValue"])])),_:1}),"1"==ze.value.branch?(d(),n(H,{key:0,class:"card-section",shadow:"never"},{default:i((()=>[m(u,{label:"目标资源",required:""},{default:i((()=>[m(R,{modelValue:ze.value.image,"onUpdate:modelValue":a[11]||(a[11]=e=>ze.value.image=e),placeholder:"请选择目标资源"},{default:i((()=>[(d(!0),p(v,null,f(ye.value,(e=>(d(),n(r,{key:e.ID,label:e.image,value:e.image},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"脚本类型",required:""},{default:i((()=>[m(Je,{modelValue:ze.value.voucherType,"onUpdate:modelValue":a[12]||(a[12]=e=>ze.value.voucherType=e),onChange:Re},{default:i((()=>[m(Ie,{value:"1"},{default:i((()=>a[44]||(a[44]=[h("sh")]))),_:1}),m(Ie,{value:"2"},{default:i((()=>a[45]||(a[45]=[h("bash")]))),_:1}),m(Ie,{value:"3"},{default:i((()=>a[46]||(a[46]=[h("python")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"执行脚本",required:""},{default:i((()=>[m(t,{modelValue:ze.value.textarea,"onUpdate:modelValue":a[13]||(a[13]=e=>ze.value.textarea=e),style:{width:"550px"},rows:10,type:"textarea",placeholder:"Please input"},null,8,["modelValue"])])),_:1})])),_:1})):_("",!0),"2"==ze.value.branch?(d(),n(H,{key:1,class:"card-section",shadow:"never"},{default:i((()=>[m(u,{label:"镜像仓库：",required:""},{label:i((()=>[a[47]||(a[47]=c("span",null,"镜像仓库",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[48]||(a[48]=h(" : "))])),default:i((()=>[m(R,{modelValue:ze.value.warehouse,"onUpdate:modelValue":a[14]||(a[14]=e=>ze.value.warehouse=e),placeholder:"请选择镜像仓库",filterable:"","allow-create":""},{default:i((()=>[(d(!0),p(v,null,f(ne.value,((e,a)=>(d(),n(r,{key:a,label:e.config.url,value:e.config.url},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"空间名称：",required:""},{label:i((()=>[a[49]||(a[49]=c("span",null,"空间名称",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[50]||(a[50]=h(": "))])),default:i((()=>[m(t,{modelValue:ze.value.spatialName,"onUpdate:modelValue":a[15]||(a[15]=e=>ze.value.spatialName=e),placeholder:"请输入空间名称"},null,8,["modelValue"])])),_:1}),m(u,{label:"镜像标签：",required:""},{label:i((()=>[a[51]||(a[51]=c("span",null,"镜像标签",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[52]||(a[52]=h(": "))])),default:i((()=>[m(t,{modelValue:ze.value.mirrorTag,"onUpdate:modelValue":a[16]||(a[16]=e=>ze.value.mirrorTag=e),placeholder:"请输入镜像标签"},null,8,["modelValue"])])),_:1}),m(u,{label:"Dockerfile：",required:""},{label:i((()=>[a[53]||(a[53]=c("span",null,"Dockerfile",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[54]||(a[54]=h(": "))])),default:i((()=>[m(t,{modelValue:ze.value.dockerfile,"onUpdate:modelValue":a[17]||(a[17]=e=>ze.value.dockerfile=e),placeholder:"请输入Dockerfile"},null,8,["modelValue"])])),_:1}),m(u,{label:"ContextPath："},{label:i((()=>[a[55]||(a[55]=c("span",null,"ContextPath",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[56]||(a[56]=h(": "))])),default:i((()=>[m(t,{modelValue:ze.value.contextPath,"onUpdate:modelValue":a[18]||(a[18]=e=>ze.value.contextPath=e),placeholder:"请输入ContextPath"},null,8,["modelValue"])])),_:1})])),_:1})):_("",!0),"3"==ze.value.branch?(d(),n(H,{key:2,class:"card-section",shadow:"never"},{default:i((()=>[m(u,{label:"产品名称：",required:""},{default:i((()=>[m(t,{modelValue:ze.value.productName,"onUpdate:modelValue":a[19]||(a[19]=e=>ze.value.productName=e),placeholder:"请输入产品名称"},null,8,["modelValue"])])),_:1}),m(u,{label:"产品路径：",required:""},{default:i((()=>[m(t,{modelValue:ze.value.productPath,"onUpdate:modelValue":a[20]||(a[20]=e=>ze.value.productPath=e),placeholder:"请输入产品路径"},null,8,["modelValue"])])),_:1})])),_:1})):_("",!0),"4"==ze.value.branch?(d(),n(H,{key:3,class:"card-section",shadow:"never"},{default:i((()=>[m(u,{label:"kubectl版本",required:""},{label:i((()=>[a[57]||(a[57]=c("span",null,"kubectl版本",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[58]||(a[58]=h(": "))])),default:i((()=>[m(R,{modelValue:ze.value.image,"onUpdate:modelValue":a[21]||(a[21]=e=>ze.value.image=e),placeholder:"请选择kubectl版本"},{default:i((()=>[(d(!0),p(v,null,f(ye.value,(e=>(d(),n(r,{key:e.ID,label:e.image,value:e.image},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"资源类型：",required:""},{label:i((()=>[a[59]||(a[59]=c("span",null,"资源类型",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[60]||(a[60]=h(": "))])),default:i((()=>[m(R,{modelValue:ze.value.resource,"onUpdate:modelValue":a[22]||(a[22]=e=>ze.value.resource=e),placeholder:"请选择资源类型"},{default:i((()=>[m(r,{label:"Deployment",value:"1"}),m(r,{label:"Statefulset",value:"2"}),m(r,{label:"DaemonSet",value:"3"}),m(r,{label:"Service",value:"4"}),m(r,{label:"Ingress",value:"5"}),m(r,{label:"ConfigMap",value:"6"}),m(r,{label:"Secret",value:"7"})])),_:1},8,["modelValue"])])),_:1}),m(u,{label:"YAML资源",required:""},{label:i((()=>[a[61]||(a[61]=c("span",null,"YAML资源",-1)),m(ke,{class:"label",style:{"font-size":"15px"}},{default:i((()=>[m(Qe)])),_:1}),a[62]||(a[62]=h(": "))])),default:i((()=>[m(t,{modelValue:ze.value.yamlResource,"onUpdate:modelValue":a[23]||(a[23]=e=>ze.value.yamlResource=e),style:{width:"550px"},rows:10,type:"textarea",placeholder:"Please input"},null,8,["modelValue"])])),_:1})])),_:1})):_("",!0),"5"==ze.value.branch?(d(),n(H,{key:4,class:"card-section",shadow:"never"},{default:i((()=>[m(u,{label:"目标资源：",required:""},{default:i((()=>[m(t,{modelValue:ze.value.name,"onUpdate:modelValue":a[24]||(a[24]=e=>ze.value.name=e),placeholder:"请输入目标资源"},null,8,["modelValue"])])),_:1}),m(u,{label:"执行脚本",required:""},{default:i((()=>[m(t,{modelValue:ze.value.openScript,"onUpdate:modelValue":a[25]||(a[25]=e=>ze.value.openScript=e),style:{width:"550px"},rows:10,type:"textarea",placeholder:"Please input"},null,8,["modelValue"])])),_:1})])),_:1})):_("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),m(Ye,{modelValue:_e.value,"onUpdate:modelValue":a[30]||(a[30]=e=>_e.value=e),title:"添加阶段"},{default:i((()=>[m(F,{model:be,"label-width":"80px"},{default:i((()=>[m(u,{label:"阶段名称",required:!0},{default:i((()=>[m(t,{modelValue:be.name,"onUpdate:modelValue":a[28]||(a[28]=e=>be.name=e),placeholder:"请输入阶段名称"},null,8,["modelValue"])])),_:1}),m(u,{label:"阶段参数",required:!0},{default:i((()=>[m(Ge,{"empty-text":"",data:be.params},{default:i((()=>[m(We,{prop:"name",label:"参数"},{default:i((({row:e})=>[m(t,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,placeholder:"参数名称"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(We,{prop:"defaultValue",label:"默认值"},{default:i((({row:e})=>[m(t,{modelValue:e.defaultValue,"onUpdate:modelValue":a=>e.defaultValue=a,placeholder:"请输入参数默认值"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(We,{label:""},{default:i((({row:e,index:l})=>[m(M,{onClick:e=>((e,a)=>{be.params.splice(a,1)})(0,l),type:"text",size:"small"},{default:i((()=>a[66]||(a[66]=[h("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),m(M,{onClick:Be,class:"addBtn"},{default:i((()=>a[67]||(a[67]=[h("+ 添加自定义参数")]))),_:1}),c("footer",se,[m(M,{style:{"border-radius":"0px",background:"blue",border:"none"},type:"primary",onClick:De},{default:i((()=>a[68]||(a[68]=[h("确定")]))),_:1}),m(M,{style:{"border-radius":"0px"},onClick:a[29]||(a[29]=e=>_e.value=!1)},{default:i((()=>a[69]||(a[69]=[h("取消")]))),_:1})])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])),_:1})])),_:1})}}},[["__scopeId","data-v-58851ec4"]]);export{de as default};
