/*! 
 Build based on  
 Time : 1735190558000 */
import{s as e,a,o as t,c as l,b as s,e as o,w as r,g as i,f as n,cu as u,i as d,k as m,E as c}from"./index.ABWJOL2Q.js";import{E as p}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as v}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              *//* empty css             *//* empty css               */import{a as j,E as g}from"./form-item.ujPiwBAF.js";import f from"./form.BZxpd1kr.js";import y from"./table.M98pKeu2.js";import{_ as b}from"./warningBar.BzThqhMC.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./index.D4uEcQv3.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./stringFun.hIDu-B3o.js";const h={class:"dycloud-search-box"},x={class:"dycloud-table-box"},_={class:"dycloud-btn-list"},k={key:0},w={class:"dycloud-pagination"},z={key:0},C={name:"Index"},B=Object.assign(C,{setup(C){const B=a({}),E=a(1),V=a(0),S=a(10),I=a([]),T=a(""),A=a({}),F=a(!1),P=a([]),U=()=>{A.value={}},D=e=>{A.value=e,N()},O=()=>{E.value=1,S.value=10,N()},q=e=>{S.value=e,N()},H=e=>{E.value=e,N()},N=async()=>{const a=await(t={page:E.value,pageSize:S.value,...A.value},e({url:"/kubernetes/records/listRecord",method:"post",data:t}));var t;0===a.code&&(I.value=a.data.list,V.value=a.data.total,E.value=a.data.page,S.value=a.data.pageSize)};N();const R=a(!1),G=()=>{R.value=!1,B.value={}},J=async a=>{u.confirm("您确定要删除该条记录？, 该操作不可逆是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{a.visible=!1;const t=await(l={id:a.id},e({url:"/kubernetes/records/delete",method:"delete",data:l}));var l;t.data.items&&t.data.items.code?d({type:"error",message:t.data.items.message}):0===t.code&&(d({type:"success",message:"删除成功"}),1===I.value.length&&E.value>1&&E.value--,N())})).catch((()=>{d({type:"info",message:"已取消删除!"})}))},K=e=>{P.value=e},L=async()=>{u.confirm("您确定要删除这些记录？, 该操作不可逆是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const a=P.value.map((e=>e.id)),t=await(l={ids:a},e({url:"/kubernetes/records/deleteByIds",method:"delete",data:l}));var l;0===t.code&&(d({type:"success",message:t.msg}),I.value.length===a.length&&E.value>1&&E.value--,F.value=!1,N())})).catch((()=>{d({type:"info",message:"已取消删除!"})}))},M=a(null),Q=async a=>{const t=await(l={id:a.id},e({url:"/kubernetes/records/getById",method:"post",data:l}));var l;T.value="终端录制播放",0===t.code&&(M.value=t.data.record,R.value=!0)};return(e,a)=>{const u=m,d=j,C=c,B=g,F=v,P=p;return t(),l("div",null,[s("div",h,[o(B,{ref:"searchForm",inline:!0,model:A.value},{default:r((()=>[o(d,{label:"Pod名称"},{default:r((()=>[o(u,{modelValue:A.value.pod_name,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value.pod_name=e),placeholder:"Pod名称"},null,8,["modelValue"])])),_:1}),o(d,null,{default:r((()=>[o(C,{size:"small",type:"primary",icon:"search",onClick:O},{default:r((()=>a[2]||(a[2]=[i("查询")]))),_:1}),o(C,{size:"small",icon:"refresh",onClick:U},{default:r((()=>a[3]||(a[3]=[i("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),s("div",x,[s("div",_,[o(C,{icon:"delete",size:"small",style:{"margin-left":"10px"},onClick:L},{default:r((()=>a[4]||(a[4]=[i("删除")]))),_:1})]),I.value?(t(),l("div",k,[o(y,{"table-data":I.value,onSearch:D,onSelect:K,onDelete:J,onPlay:Q},null,8,["table-data"])])):n("",!0)]),s("div",w,[o(F,{"current-page":E.value,"page-size":S.value,"page-sizes":[10,30,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:H,onSizeChange:q},null,8,["current-page","page-size","total"])]),R.value?(t(),l("div",z,[o(P,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),width:"100%",title:T.value},{default:r((()=>[o(b,{title:"注：Asciinema-player 支持 space 空格，播放或暂停，f 全屏播放。"}),o(f,{data:M.value,onClose:G},null,8,["data"])])),_:1},8,["modelValue","title"])])):n("",!0)])}}});export{B as default};
