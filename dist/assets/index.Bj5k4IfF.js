/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,u as a,o as s,c as o,b as t,e as l,w as i,g as r,f as n,i as u,k as p,E as m}from"./index.ABWJOL2Q.js";import{E as c}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as d}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              *//* empty css             *//* empty css               */import{a as v,E as j}from"./form-item.ujPiwBAF.js";import{a as g,b as y,c as f}from"./applications.GrMV9Sfs.js";import b from"./form.BuL0DRsf.js";import h from"./table.TItQv75y.js";import{s as k}from"./cloud_region.DtcSymib.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./index.D4uEcQv3.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./codeSource.zRy1fTFq.js";import"./buildEnv.vyGXBGni.js";import"./col.BzMVCOvM.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./popover.DFR01WU1.js";import"./dropdown.Co_mIot6.js";import"./link.QK3LjIND.js";import"./dayjs.min.DOWqlKAh.js";import"./stringFun.hIDu-B3o.js";import"./environment.Z24KwZWA.js";import"./k8sCluster.LvLN1W31.js";const x={class:"dycloud-search-box"},_={class:"dycloud-table-box"},w={class:"dycloud-btn-list"},z={key:0},C={class:"dycloud-pagination"},E={key:0},S={name:"Index"},V=Object.assign(S,{setup(S){const V=e({}),A=e(1),I=e(0),U=e(10),D=e([]),F=e(""),O=e({});e(!1);const T=e([]),q=e([]),B=()=>{O.value={}},G=e=>{O.value=e,L()},H=()=>{A.value=1,U.value=10,L()},J=e=>{U.value=e,L()},K=e=>{A.value=e,L()},L=async()=>{const e=await g({page:A.value,pageSize:U.value,keyword:O.value.name});0===e.code&&(D.value=e.data.list,I.value=e.data.total,A.value=e.data.page,U.value=e.data.pageSize)};L();const M=e(!1),N=e(""),R=async e=>{N.value="update",F.value="更新",L()},P=async e=>{0===(await k({id:e.id})).code&&(u({type:"success",message:"操作成功"}),L())},Q=()=>{M.value=!1,V.value={}},W=async e=>{e.visible=!1;0===(await y(e.ID)).code&&(u({type:"success",message:"删除成功"}),1===D.value.length&&A.value>1&&A.value--,L())},X=e=>{T.value=e},Y=async e=>{let a;"create"===N.value?a=await f(e):N.value,a&&0===a.code?(Q(),(async e=>{0===e.code&&(u({type:"success",message:e.msg}),1===D.value.length&&A.value>1&&A.value--,L())})(a)):u({type:"error",message:a?a.msg:"操作失败"})},Z=async e=>{const a=await TestService(e);0===a.code&&u({type:"success",message:a.data})},$=a(),ee=()=>{$.push({path:"/layout/cicd/createApplication"})};return(e,a)=>{const u=p,g=v,y=m,f=j,k=d,S=c;return s(),o("div",null,[t("div",x,[l(f,{ref:"searchForm",inline:!0,model:O.value},{default:i((()=>[l(g,{label:"名称"},{default:i((()=>[l(u,{modelValue:O.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>O.value.name=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),l(g,null,{default:i((()=>[l(y,{size:"small",type:"primary",icon:"search",onClick:H},{default:i((()=>a[2]||(a[2]=[r("查询")]))),_:1}),l(y,{size:"small",icon:"refresh",onClick:B},{default:i((()=>a[3]||(a[3]=[r("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),t("div",_,[t("div",w,[l(y,{size:"small",type:"primary",icon:"plus",onClick:ee},{default:i((()=>a[4]||(a[4]=[r("新增")]))),_:1})]),D.value?(s(),o("div",z,[l(h,{"table-data":D.value,onUpdate:R,onSearch:G,onTest:Z,onSelect:X,onDelete:W,onRegion:P},null,8,["table-data"])])):n("",!0)]),t("div",C,[l(k,{"current-page":A.value,"page-size":U.value,"page-sizes":[10,30,50,100],total:I.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:K,onSizeChange:J},null,8,["current-page","page-size","total"])]),M.value?(s(),o("div",E,[l(S,{modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),width:"40%",title:F.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{default:i((()=>[l(b,{form:V.value,regions:q.value,onClose:Q,type:N.value,onEnter:Y},null,8,["form","regions","type"])])),_:1},8,["modelValue","title"])])):n("",!0)])}}});export{V as default};
