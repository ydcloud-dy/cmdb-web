/*! 
 Build based on  
 Time : 1735190558000 */
System.register(["./index-legacy.Cf1_fyJw.js","./xterm-legacy.C7iTxYx2.js","./xterm-legacy.CncnO5QC.js","./xterm-addon-fit-legacy.BgFhqBhw.js"],(function(e,t){"use strict";var n,o,s,i,r,a,c,u;return{setters:[function(e){n=e.s,o=e.a,s=e._,i=e.o,r=e.c,a=e.b},function(e){c=e.x},null,function(e){u=e.x}],execute:function(){e("G",(function(e){return n({url:"/kubernetes/pods",method:"get",params:e})})),e("D",(function(e){return n({url:"/kubernetes/pods/deleteFiles",method:"post",data:e})})),e("c",(function(e){return n({url:"/kubernetes/podDetails",method:"get",params:e})})),e("f",(function(e){return n({url:"/kubernetes/pods",method:"post",data:e})})),e("d",(function(e){return n({url:"/kubernetes/pods",method:"put",data:e})})),e("b",(function(e){return n({url:"/kubernetes/pods",method:"delete",data:e})})),e("e",(function(e){return n({url:"/kubernetes/nodes/EvictAllPod",method:"post",data:e})})),e("a",(function(e){return n({url:"/kubernetes/pods/listFiles",method:"post",data:e})}));var t=o("https://"),l=o(void 0);e("P",s({name:"Terminal",props:{data:{type:Object,default:function(){return{}}},name:{type:String,default:function(){return""}}},data:function(){return{xterm:null,ws:null,winHeight:window.innerHeight,containername:"",containers:[]}},mounted:function(){this.initTerminal(),window.addEventListener("resize",this.onWindowResize)},methods:{initTerminal:function(){var e=document.body.clientHeight,t=e/18,n=e/3;this.xterm=new c.Terminal({cols:parseInt(n.toString(),10),rows:parseInt(t.toString(),10),rendererType:"canvas",convertEol:!0,disableStdin:!1,scrollback:100,cursorBlink:!0,cursorStyle:"bar",fontSize:14,windowsMode:!0,theme:{foreground:"#FFFFFF",background:"#000000",cursor:"help",lineHeight:16}});var o=new u.FitAddon;this.xterm.loadAddon(o),o.fit();var s=document.getElementById("terminal");this.xterm.open(s),this.xterm.writeln("欢迎使用运维系统终端"),this.xterm.writeln(""),this.wsConnect(),this.xterm.onData(this.onTerminalData),this.xterm.onResize(this.onTerminalResize)},onTerminalData:function(e){var t={type:"read",data:e};this.ws.send(JSON.stringify(t))},onWindowResize:function(){var e={type:"resize",cols:this.xterm.cols,rows:this.xterm.rows};this.ws.send(JSON.stringify(e))},onTerminalResize:function(){var e={type:"resize",cols:this.xterm.cols,rows:this.xterm.rows};this.ws.send(JSON.stringify(e))},wsConnect:function(){-1!==t.value.indexOf("http")?t.value=t.value.replace("http","ws"):-1!==t.value.indexOf("https")&&(t.value=t.value.replace("https","wss"));var e=localStorage.getItem("token"),n="".concat(t.value,":").concat(l.value,"/kubernetes/pods/terminal?name=").concat(this.name,"&cluster_id=").concat(this.data.cluster_id,"&pod_name=").concat(this.data.metadata.name,"&namespace=").concat(this.data.metadata.namespace,"&x-token=").concat(e,"&cols=").concat(this.xterm.cols,"&rows=").concat(this.xterm.rows);this.ws=new WebSocket(n),this.ws.onopen=this.onConnectionOpen,this.ws.onmessage=this.onConnectionMessage,this.ws.onclose=this.onConnectionClose,this.ws.onerror=this.onConnectionError},onConnectionOpen:function(e){this.onTerminalResize(),this.xterm.focus()},onConnectionMessage:function(e){var t=JSON.parse(e.data);"write"===t.type&&this.xterm.write(t.data)},onConnectionClose:function(e){},onConnectionError:function(e){}}},[["render",function(e,t,n,o,s,c){return i(),r("div",null,t[0]||(t[0]=[a("div",null,[a("div",{id:"terminal",width:"100%",style:{overflow:"auto"},className:"console"})],-1)]))}]]))}}}));
