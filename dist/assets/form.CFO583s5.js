/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as e,a as l,N as a,R as o,o as t,c as u,e as r,w as s,F as p,g as n,h as i,f as d,b as m,k as c,E as f}from"./index.ABWJOL2Q.js";/* empty css               *//* empty css             */import{E as g}from"./switch.CqADXIhW.js";/* empty css                    *//* empty css              *//* empty css            */import{E as v,a as y}from"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               */import{a as b,E as k}from"./form-item.ujPiwBAF.js";/* empty css              */import{E as j,a as V}from"./index.DINKPDpR.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";const h={style:{overflow:"hidden",width:"100%","max-width":"600px","margin-left":"20px"}},T={class:"dialog-footer",align:"right"},_={name:"FormBlock",emits:{close:()=>!0,enter:e=>!!e.name}},U=e(Object.assign(_,{props:{form:{default:()=>({}),type:Object}},emits:["close","enter"],setup(e,{emit:_}){const U=_,w=e,x=l({name:"",type:null,authType:"config",conf:"",url:"",kubeToken:"",registryUrl:"",username:"",password:"",isHttps:!1,desc:""});a((()=>{x.value={...w.form}})),o((()=>x.value.type),(e=>{0===e&&(x.value.authType="config")}));const R=l({name:[{required:!0,message:"请输入名称",trigger:"blur"}],type:[{required:!0,message:"请选择配置类型",trigger:"change"}],conf:[{required:e=>"config"===e.authType&&0===e.type,message:"请输入Kubernetes Config",trigger:"blur"}],url:[{required:e=>"token"===e.authType&&0===e.type,message:"请输入Kubernetes URL",trigger:"blur"}],kubeToken:[{required:e=>"token"===e.authType&&0===e.type,message:"请输入Kubernetes Token",trigger:"blur"}],registryUrl:[{required:e=>1===e.type,message:"请输入Registry URL",trigger:"blur"}],username:[{required:e=>1===e.type,message:"请输入用户名",trigger:"blur"}],password:[{required:e=>1===e.type,message:"请输入密码",trigger:"blur"}],desc:[{required:!1,message:"请输入描述信息",trigger:"blur"}]}),q=()=>{K.value.resetFields(),U("close")},K=l(null),C=async()=>{K.value.validate((async e=>{if(e){const e={id:x.value.ID,name:x.value.name,desc:x.value.desc,type:x.value.type,config:{}};0===x.value.type?(e.config.type="config"===x.value.authType?0:1,"config"===x.value.authType?e.config.conf=x.value.conf:"token"===x.value.authType&&(e.config.url=x.value.url,e.config.conf=x.value.kubeToken)):1===x.value.type?(e.config.url=x.value.registryUrl,e.config.username=x.value.username,e.config.password=x.value.password,e.config.isHttps=x.value.isHttps):2===x.value.type&&(e.config.url=x.value.jenkinsUrl,e.config.username=x.value.jenkinsUsername,e.config.token=x.value.jenkinsToken,e.config.workspace=x.value.workspace,e.config.namespace=x.value.namespace),U("enter",e)}}))};return(e,l)=>{const a=c,o=b,_=v,U=y,w=j,H=V,E=g,F=k,L=f;return t(),u("div",h,[r(F,{ref_key:"FormBlock",ref:K,model:x.value,rules:R.value,"label-width":"120px"},{default:s((()=>[r(o,{label:"名称",prop:"name"},{default:s((()=>[r(a,{modelValue:x.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value.name=e),placeholder:"请输入名称",autocomplete:"off"},null,8,["modelValue"])])),_:1}),r(o,{label:"配置类型",prop:"type"},{default:s((()=>[r(U,{modelValue:x.value.type,"onUpdate:modelValue":l[1]||(l[1]=e=>x.value.type=e),placeholder:"请选择配置类型"},{default:s((()=>[r(_,{label:"kubernetes",value:0}),r(_,{label:"registry",value:1})])),_:1},8,["modelValue"])])),_:1}),0===x.value.type?(t(),u(p,{key:0},[r(o,{label:"认证类型",prop:"authType"},{default:s((()=>[r(H,{modelValue:x.value.authType,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value.authType=e)},{default:s((()=>[r(w,{label:"config"},{default:s((()=>l[11]||(l[11]=[n("Kubernetes Config")]))),_:1}),r(w,{label:"token"},{default:s((()=>l[12]||(l[12]=[n("Service Account Token")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),"config"===x.value.authType?(t(),i(o,{key:0,label:"Kubernetes Config",prop:"conf"},{default:s((()=>[r(a,{type:"textarea",modelValue:x.value.conf,"onUpdate:modelValue":l[3]||(l[3]=e=>x.value.conf=e),placeholder:"请输入Kubernetes Config",autocomplete:"off"},null,8,["modelValue"])])),_:1})):d("",!0),"token"===x.value.authType?(t(),i(o,{key:1,label:"Kubernetes URL",prop:"url"},{default:s((()=>[r(a,{modelValue:x.value.url,"onUpdate:modelValue":l[4]||(l[4]=e=>x.value.url=e),placeholder:"请输入Kubernetes地址",autocomplete:"off"},null,8,["modelValue"])])),_:1})):d("",!0),"token"===x.value.authType?(t(),i(o,{key:2,label:"Kubernetes Token",prop:"kubeToken"},{default:s((()=>[r(a,{type:"textarea",modelValue:x.value.kubeToken,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value.kubeToken=e),placeholder:"请输入Kubernetes Token",autocomplete:"off"},null,8,["modelValue"])])),_:1})):d("",!0)],64)):d("",!0),1===x.value.type?(t(),u(p,{key:1},[r(o,{label:"Registry URL",prop:"registryUrl"},{default:s((()=>[r(a,{modelValue:x.value.registryUrl,"onUpdate:modelValue":l[6]||(l[6]=e=>x.value.registryUrl=e),placeholder:"请输入Registry地址",autocomplete:"off"},null,8,["modelValue"])])),_:1}),r(o,{label:"用户名",prop:"username"},{default:s((()=>[r(a,{modelValue:x.value.username,"onUpdate:modelValue":l[7]||(l[7]=e=>x.value.username=e),placeholder:"请输入Registry用户名",autocomplete:"off"},null,8,["modelValue"])])),_:1}),r(o,{label:"用户密码",prop:"password"},{default:s((()=>[r(a,{modelValue:x.value.password,"onUpdate:modelValue":l[8]||(l[8]=e=>x.value.password=e),placeholder:"请输入Registry密码",type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),r(o,{label:"是否HTTPS",prop:"isHttps"},{default:s((()=>[r(E,{modelValue:x.value.isHttps,"onUpdate:modelValue":l[9]||(l[9]=e=>x.value.isHttps=e)},null,8,["modelValue"])])),_:1})],64)):d("",!0),r(o,{label:"描述",prop:"desc"},{default:s((()=>[r(a,{modelValue:x.value.desc,"onUpdate:modelValue":l[10]||(l[10]=e=>x.value.desc=e),placeholder:"请输入描述",type:"textarea",autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),m("div",T,[r(L,{size:"small",onClick:q},{default:s((()=>l[13]||(l[13]=[n("取 消")]))),_:1}),r(L,{size:"small",type:"primary",onClick:C},{default:s((()=>l[14]||(l[14]=[n("确 定")]))),_:1})])])}}}),[["__scopeId","data-v-c856f033"]]);export{U as default};
