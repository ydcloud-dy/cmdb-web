/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as e,r as l,a,q as s,o,h as d,w as t,e as u,c as n,F as i,v as r,g as m,t as p,f as c,b as v,O as b,k as f,E as j}from"./index.ABWJOL2Q.js";/* empty css             *//* empty css               */import{E as _,a as V}from"./col.BzMVCOvM.js";/* empty css            */import{E as y,a as k}from"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css                    *//* empty css              */import{a as N,E as g}from"./form-item.ujPiwBAF.js";/* empty css              */import{g as R}from"./namespaces.DIn9v7pI.js";import{E as x,a as h}from"./index.DINKPDpR.js";import"./index.D4uEcQv3.js";import"./index.BRjlB3m5.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";const U={class:"button-container"},E={name:"createRestore"},w=e(Object.assign(E,{props:{form:Object,readonly:Boolean,isUpdate:Boolean},emits:["close","enter"],setup(e,{emit:E}){var w,I,q,C,O,S,A,B,F,z,K,L,D,G,H,J,M,P,Q,T,W,X,Y,Z,$,ee,le,ae,se,oe;const de=l({name:[{required:!0,message:"字段值不可为空"}]}),te=[{label:"还原所有命名空间",value:1,disabled:!0},{label:"还原指定命名空间",value:2}],ue=[{label:"还原所有资源类型",value:1},{label:"还原指定资源类型",value:2}],ne=a(null),ie=e,re=E,me=l({name:(null==(I=null==(w=ie.form)?void 0:w.metadata)?void 0:I.name)||"",includedNamespaces:(null==(S=null==(O=null==(C=null==(q=ie.form)?void 0:q.spec)?void 0:C.template)?void 0:O.includedNamespaces)?void 0:S.includes("*"))?1:2,namespaces:(null==(z=null==(F=null==(B=null==(A=ie.form)?void 0:A.spec)?void 0:B.template)?void 0:F.includedNamespaces)?void 0:z.includes("*"))?[]:(null==(D=null==(L=null==(K=ie.form)?void 0:K.spec)?void 0:L.template)?void 0:D.includedNamespaces)||[],schedule:(null==(H=null==(G=ie.form)?void 0:G.spec)?void 0:H.schedule)||"1 0 * * *",includedResources:(null==(Q=null==(P=null==(M=null==(J=ie.form)?void 0:J.spec)?void 0:M.template)?void 0:P.includedResources)?void 0:Q.includes("*"))?1:2,annotations:(null==(W=null==(T=ie.form)?void 0:T.metadata)?void 0:W.annotations)||"",resources:(null==($=null==(Z=null==(Y=null==(X=ie.form)?void 0:X.spec)?void 0:Y.template)?void 0:Z.includedResources)?void 0:$.includes("*"))?[]:(null==(ae=null==(le=null==(ee=ie.form)?void 0:ee.spec)?void 0:le.template)?void 0:ae.includedResources)||[],backupName:(null==(oe=null==(se=ie.form)?void 0:se.spec)?void 0:oe.backupName)||""}),pe=()=>{1===me.includedNamespaces&&(me.namespaces=["*"]),1===me.includedResources?me.resources=["*"]:"string"==typeof me.resources&&(me.resources=me.resources.split("\n").map((e=>e.trim())).filter((e=>e.length>0))),ne.value.validate((e=>{e&&re("enter",{metadata:{name:me.name,annotations:me.annotations},spec:{backupName:me.backupName,includedNamespaces:me.namespaces,includedResources:me.resources}})}))},ce=a([]);let ve=a(null);const be=async()=>{if(ve.value=parseInt(localStorage.getItem("cluster_id")),null!==ve.value){const e=await R({id:ve.value});0===e.code&&(ce.value=e.data.namespaces.map((e=>({label:e,value:e}))))}};return s((()=>{window.addEventListener("setItemCluster",be),be()})),(l,a)=>{const s=f,R=N,E=_,w=x,I=h,q=y,C=k,O=V,S=j,A=g;return o(),d(A,{model:me,ref_key:"vForm",ref:ne,rules:de,"label-position":"left","label-width":"80px",size:"medium",onSubmit:a[6]||(a[6]=b((()=>{}),["prevent"]))},{default:t((()=>[u(O,{gutter:20},{default:t((()=>[u(E,{span:6,offset:3},{default:t((()=>[u(R,{label:"名称",prop:"name",class:"required"},{default:t((()=>[u(s,{modelValue:me.name,"onUpdate:modelValue":a[0]||(a[0]=e=>me.name=e),type:"text",placeholder:"请输入还原任务名称",clearable:""},null,8,["modelValue"])])),_:1}),u(R,{label:"备注信息",prop:"annotations"},{default:t((()=>[u(s,{modelValue:me.annotations,"onUpdate:modelValue":a[1]||(a[1]=e=>me.annotations=e),type:"text",placeholder:"添加备注信息",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),u(E,{span:8},{default:t((()=>[u(R,{label:"命名空间",prop:"includedNamespaces"},{default:t((()=>[u(I,{modelValue:me.includedNamespaces,"onUpdate:modelValue":a[2]||(a[2]=e=>me.includedNamespaces=e)},{default:t((()=>[(o(),n(i,null,r(te,((e,l)=>u(w,{key:l,label:e.value,disabled:e.disabled},{default:t((()=>[m(p(e.label),1)])),_:2},1032,["label","disabled"]))),64))])),_:1},8,["modelValue"])])),_:1}),u(R,{label:"资源选择",prop:"includedResources"},{default:t((()=>[u(I,{modelValue:me.includedResources,"onUpdate:modelValue":a[3]||(a[3]=e=>me.includedResources=e)},{default:t((()=>[(o(),n(i,null,r(ue,((e,l)=>u(w,{key:l,label:e.value,disabled:e.disabled},{default:t((()=>[m(p(e.label),1)])),_:2},1032,["label","disabled"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),u(E,{span:6},{default:t((()=>[2===me.includedNamespaces?(o(),d(R,{key:0,label:"命名空间",prop:"namespaces"},{default:t((()=>[u(C,{modelValue:me.namespaces,"onUpdate:modelValue":a[4]||(a[4]=e=>me.namespaces=e),class:"full-width-input",clearable:"",multiple:""},{default:t((()=>[(o(!0),n(i,null,r(ce.value,((e,l)=>(o(),d(q,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):c("",!0),2===me.includedResources?(o(),d(R,{key:1,label:"资源类型",prop:"resources"},{default:t((()=>[u(s,{modelValue:me.resources,"onUpdate:modelValue":a[5]||(a[5]=e=>me.resources=e),type:"textarea",placeholder:"请输入资源类型",clearable:""},null,8,["modelValue"])])),_:1})):c("",!0)])),_:1})])),_:1}),v("div",U,[u(S,{type:"primary",onClick:pe},{default:t((()=>[m(p(e.isUpdate?"更新":"新增"),1)])),_:1})])])),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-40b4e702"]]);export{w as default};
