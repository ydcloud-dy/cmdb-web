/*! 
 Build based on  
 Time : 1735190558000 */
import{_ as a,a as e,o as l,c as t,h as s,w as n,e as o,b as u,t as i,F as r,v as p,f as d,g as c,B as m,cu as v,i as f,E as y,cw as g}from"./index.ABWJOL2Q.js";import{a as k}from"./tab-pane.fs024GHS.js";import{E as w,a as h}from"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                *//* empty css               */import"./scrollbar.3ySweVnY.js";/* empty css            */import{A as _}from"./age.Du5VDnjl.js";import{E as j}from"./dialog.DdLHJsLF.js";import"./overlay.CDLw2uOw.js";import{E as b}from"./pagination.BfYt3rvk.js";import"./select.C2tLDQ30.js";/* empty css              *//* empty css               */import{E as C,a as I,b as x}from"./dropdown-item.Bdep7Ju0.js";import{P,b as V,c as E,d as D,G as S}from"./terminal.CkdZuQYW.js";import{P as T,E as U}from"./detail.12K7B398.js";import{_ as z,R}from"./index.DDa397GF.js";import{_ as O}from"./index.CLE9PzC_.js";import{P as B}from"./terminal-log.p9WpB3Ej.js";import{E as F}from"./index.D4uEcQv3.js";import{E as N}from"./index.DglrVZRl.js";import"./strings.C2tuonvC.js";import"./index.C5gbd99D.js";import"./_Uint8Array.BjvNwsUf.js";import"./_initCloneObject.jmqS1x-g.js";import"./_baseIteratee.BPaQBmlP.js";import"./isEqual.CtpQH3Dm.js";import"./debounce.CkdGDwJt.js";import"./index.6ock-Gvr.js";import"./index.BRjlB3m5.js";import"./refs.CZv2DkwS.js";import"./token.DWNpOE8r.js";import"./castArray.9wqFpW2Z.js";import"./dropdown.Co_mIot6.js";import"./xterm.BR7SOqRe.js";/* empty css              */import"./xterm-addon-fit.onOJMBm7.js";/* empty css             */import"./form-item.ujPiwBAF.js";import"./_baseClone.gl1e0kmI.js";import"./index.DrIIbIcU.js";import"./metrics.Dq7Dbl3h.js";import"./monaco-editor-vue3.es.BmYKexe9.js";import"./js-yaml.B_ZKWvuw.js";const A=["onClick"],K={key:0},M={slot:"content"},q={key:1},G={slot:"content"},H={key:2},J={slot:"content"},L={key:3},W={slot:"content"},X={key:0},Q={class:"operate-span"},Y={class:"dycloud-pagination"},Z={key:0},$={class:"dialog-footer"},aa={key:1},ea={class:"dialog-footer"},la={key:2},ta={style:{"text-align":"right"}},sa={class:"dialog-footer"},na={key:3},oa={class:"dialog-footer"},ua={style:{"text-align":"right"}},ia={name:"PodsTableBlock"},ra=a(Object.assign(ia,{props:{data:{default:function(){return{}},type:Object}},setup(a){const g=a,k=e(1),ia=e(10),ra=e(0),pa=e([]),da=e(!1),ca=async()=>{const a=await S({cluster_id:ma.value,page:k.value,pageSize:ia.value,fieldSelector:"spec.nodeName=".concat(va.value)});0===a.code&&(pa.value=a.data.items,k.value=a.data.page,ia.value=a.data.pageSize,ra.value=a.data.total)},ma=e(0),va=e(""),fa=()=>{ma.value=g.data.cluster_id,va.value=g.data.metadata.name,ca()};fa();const ya=a=>{k.value=a,ca()},ga=a=>{ia.value=a,ca()},ka=e(!1),wa=e(""),ha=e({}),_a=e(!1),ja=()=>{_a.value=!1,Pa.value=!1,Ca.value=!1,da.value=!1},ba=async a=>{0===(await D({cluster_id:ma.value,namespace:a.metadata.namespace,podName:a.metadata.name,content:a})).code&&(f({type:"success",message:"更新成功!"}),_a.value=!1,fa())},Ca=e(!1),Ia=e({}),xa=e(""),Pa=e(!1),Va=()=>{da.value?da.value=!1:da.value=!0};return(a,e)=>{const g=y,D=F,S=w,va=N,fa=C,Ea=I,Da=x,Sa=h,Ta=b,Ua=j;return l(),t("div",null,[(l(),s(Sa,{data:pa.value,key:pa.value,stripe:"",style:{width:"100%"}},{default:n((()=>[o(S,{label:"名称",prop:"name",type:"scope",width:"300"},{default:n((a=>[e[4]||(e[4]=u("img",{style:{width:"14px","margin-right":"2px"},src:"//g.alicdn.com/aliyun/cos/1.38.27/images/icon_docker.png"},null,-1)),u("span",{class:"operate-span-primary",onClick:e=>(async a=>{wa.value="详情",ha.value=a;const e=await U({cluster_id:ma.value,fieldSelector:"involvedObject.name="+a.metadata.name,namespace:a.metadata.namespace});e.data.items&&e.data.items.code?f({type:"error",message:e.data.items.message}):(0===e.code&&(ha.value.events=e.data.items),ka.value=!0)})(a.row)},i(a.row.metadata.name),9,A),o(D,{placement:"top"},{content:n((()=>[(l(!0),t(r,null,p(a.row.metadata.labels,((a,e,s)=>(l(),t("div",{slot:"content",key:s},[u("span",null,i(e)+": "+i(a),1)])))),128))])),default:n((()=>[o(g,{size:"small",type:"primary",link:"",icon:"PriceTag"})])),_:2},1024)])),_:1}),o(S,{label:"容器",prop:"container",type:"scope"},{default:n((a=>[(l(!0),t(r,null,p(a.row.status.containerStatuses,((a,e)=>(l(),t("div",{key:e,class:"gridChart"},[a.ready?(l(),t("div",K,[o(D,{placement:"top"},{content:n((()=>[u("div",M,i(a.name)+"（running, ready） ",1)])),default:n((()=>[o(va,{class:"ml-2",type:"success",effect:"dark"})])),_:2},1024)])):!a.ready&&a.state.waiting?(l(),t("div",q,[o(D,{placement:"top"},{content:n((()=>[u("div",G,i(a.name)+" 报错信息: "+i(a.state.waiting.reason),1)])),default:n((()=>[o(va,{class:"ml-2",type:"danger",effect:"dark"})])),_:2},1024)])):!a.ready&&a.state.terminated?(l(),t("div",H,[o(D,{placement:"top"},{content:n((()=>[u("div",J,i(a.name)+" "+i(a.state.terminated.reason),1)])),default:n((()=>[o(va,{class:"ml-2",type:"info",effect:"dark"})])),_:2},1024)])):(l(),t("div",L,[o(D,{placement:"top"},{content:n((()=>[u("div",W,i(a.name),1)])),default:n((()=>[o(va,{class:"ml-2",type:"info",effect:"dark"})])),_:2},1024)]))])))),128))])),_:1}),o(S,{prop:"status",label:"CPU/内存/TCP",type:"scope",width:"200"},{default:n((a=>[a.row?(l(),t("div",X,[o(z,{data:a.row,cluster_id:ma.value},null,8,["data","cluster_id"])])):d("",!0)])),_:1}),o(S,{label:"状态",prop:"status",type:"scope",width:"90"},{default:n((a=>["Running"===a.row.status.phase?(l(),s(va,{key:0,type:"success"},{default:n((()=>e[5]||(e[5]=[c("Running")]))),_:1})):"Succeeded"===a.row.status.phase?(l(),s(va,{key:1,type:"info"},{default:n((()=>e[6]||(e[6]=[c("Completed")]))),_:1})):(l(),s(va,{key:2,type:"danger"},{default:n((()=>[c(i(a.row.status.phase),1)])),_:2},1024))])),_:1}),o(S,{label:"重启次数",prop:"restarts",type:"scope"},{default:n((a=>[u("span",null,i(m(R)(a.row.status.containerStatuses)),1)])),_:1}),o(S,{label:"命名空间",prop:"namespace",type:"scope"},{default:n((a=>[u("span",null,i(a.row.metadata.namespace),1)])),_:1}),o(S,{label:"Pod IP",prop:"Pod_IP",type:"scope",width:"100"},{default:n((a=>[u("span",null,i(a.row.status.podIP),1)])),_:1}),o(S,{label:"调度节点",prop:"hostIP",type:"scope"},{default:n((a=>[u("span",Q,i(a.row.status.hostIP),1)])),_:1}),o(S,{label:"存活时间",prop:"creationTimestamp",type:"scope"},{default:n((a=>[u("span",null,i(m(_)(a.row.metadata.creationTimestamp)),1)])),_:1}),o(S,{fixed:"right",label:"操作",width:"100",type:"scope"},{default:n((a=>[o(g,{size:"small",type:"primary",link:"",icon:"edit",onClick:e=>(async a=>{wa.value="编辑";const e=await E({cluster_id:ma.value,namespace:a.metadata.namespace,podName:a.metadata.name});e.data.items&&e.data.items.code?f({type:"error",message:e.data.items.message}):0===e.code&&(ha.value=e.data.items,_a.value=!0)})(a.row)},{default:n((()=>e[7]||(e[7]=[c("编辑")]))),_:2},1032,["onClick"]),u("div",null,[o(Da,null,{dropdown:n((()=>[o(Ea,null,{default:n((()=>[(l(!0),t(r,null,p(a.row.spec.containers,((e,s)=>(l(),t("div",{key:s},[o(fa,{onClick:l=>{return t=a.row,s=e.name,Ia.value=t,wa.value="容器组名："+t.metadata.name+" 容器名："+s+" 终端",Ia.value.cluster_id=ma.value,xa.value=s,void(Ca.value=!0);var t,s}},{default:n((()=>[c(i(e.name)+" 终端 ",1)])),_:2},1032,["onClick"])])))),128)),(l(!0),t(r,null,p(a.row.spec.containers,((e,s)=>(l(),t("div",{key:s},[o(fa,{onClick:l=>{return t=a.row,s=e.name,Ia.value=t,wa.value="容器组名："+t.metadata.name+" 容器名："+s+" 终端日志",Ia.value.cluster_id=ma.value,xa.value=s,void(Pa.value=!0);var t,s}},{default:n((()=>[c(i(e.name)+" 终端日志 ",1)])),_:2},1032,["onClick"])])))),128)),o(fa,{icon:"delete",onClick:e=>(async a=>{v.confirm("此操作将删除Pod: "+a.metadata.name+" 是否继续?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((async()=>{0===(await V({cluster_id:ma.value,namespace:a.metadata.namespace,podName:a.metadata.name})).code&&(f({type:"success",message:"删除成功"}),await ca())})).catch((()=>{f({type:"info",message:"已取消删除"})}))})(a.row)},{default:n((()=>e[9]||(e[9]=[c("删除")]))),_:2},1032,["onClick"])])),_:2},1024)])),default:n((()=>[o(g,{type:"primary",link:"",icon:"MoreFilled",size:"small"},{default:n((()=>e[8]||(e[8]=[c("更多")]))),_:1})])),_:2},1024)])])),_:1})])),_:1},8,["data"])),u("div",Y,[o(Ta,{"current-page":k.value,"page-size":ia.value,"page-sizes":[10,30,50,100],style:{float:"right",padding:"20px"},total:ra.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:ya,onSizeChange:ga},null,8,["current-page","page-size","total"])]),ka.value?(l(),t("div",Z,[o(Ua,{modelValue:ka.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ka.value=a),width:"60%",title:wa.value},{default:n((()=>[u("div",$,[o(T,{data:ha.value},null,8,["data"])])])),_:1},8,["modelValue","title"])])):d("",!0),_a.value?(l(),t("div",aa,[o(Ua,{modelValue:_a.value,"onUpdate:modelValue":e[1]||(e[1]=a=>_a.value=a),width:"60%",title:wa.value},{default:n((()=>[u("div",ea,[o(O,{data:ha.value,onClose:ja,onEnter:ba},null,8,["data"])])])),_:1},8,["modelValue","title"])])):d("",!0),Ca.value?(l(),t("div",la,[o(Ua,{modelValue:Ca.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Ca.value=a),width:"60%",title:wa.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,fullscreen:da.value,center:!0},{default:n((()=>[u("div",ta,[o(g,{type:"primary",link:"",icon:"FullScreen",onClick:Va}),o(g,{type:"primary",link:"",icon:"Close",onClick:ja})]),u("div",sa,[o(P,{data:Ia.value,name:xa.value,onClose:ja},null,8,["data","name"])])])),_:1},8,["modelValue","title","fullscreen"])])):d("",!0),Pa.value?(l(),t("div",na,[o(Ua,{modelValue:Pa.value,"onUpdate:modelValue":e[3]||(e[3]=a=>Pa.value=a),width:"60%",title:wa.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,fullscreen:da.value,center:!0},{default:n((()=>[u("div",oa,[u("div",ua,[o(g,{type:"primary",link:"",icon:"FullScreen",onClick:Va}),o(g,{type:"primary",link:"",icon:"Close",onClick:ja})]),o(B,{data:Ia.value,name:xa.value,onClose:ja},null,8,["data","name"])])])),_:1},8,["modelValue","title","fullscreen"])])):d("",!0)])}}}),[["__scopeId","data-v-3f7f2aa8"]]),pa={key:0},da={class:"table-default-viewer"},ca={style:{width:"50%"}},ma={style:{width:"50%"}},va={style:{width:"50%"}},fa={key:0},ya={key:1},ga={colspan:"2"},ka={class:"label-custom",type:"info"},wa={colspan:"2"},ha={class:"margin-right label-custom",type:"info"},_a={colspan:"2"},ja={key:0},ba={key:1},Ca={key:0},Ia={key:1},xa={class:"container"},Pa={name:"DetailBlock"},Va=a(Object.assign(Pa,{props:{form:{default:function(){return{}},type:Object}},setup(a){const v=a,f=e({});return f.value=v.form,(a,e)=>{const v=N,y=w,j=h,b=k;return f.value?(l(),t("div",pa,[e[39]||(e[39]=u("div",{class:"pull-left"},[u("h4",null,"基本信息")],-1)),u("table",da,[u("tbody",null,[u("tr",null,[u("td",ca,[e[0]||(e[0]=u("span",null,"名称",-1)),e[1]||(e[1]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.metadata.name),1)]),u("td",ma,[e[2]||(e[2]=u("span",null,"存活时间",-1)),e[3]||(e[3]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(m(_)(f.value.metadata.creationTimestamp)),1)])]),u("tr",null,[u("td",va,[e[4]||(e[4]=u("span",null,"UID",-1)),e[5]||(e[5]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.metadata.uid),1)])]),u("tr",null,[u("td",null,[e[6]||(e[6]=u("span",null,[u("span",null,"容器组"),c(" CIDR ")],-1)),e[7]||(e[7]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.spec.podCIDR),1)]),u("td",null,[e[8]||(e[8]=u("span",null,"调度状态：",-1)),f.value.spec.unschedulable?(l(),t("span",fa,"不可调度")):(l(),t("span",ya,"可调度"))])]),u("tr",null,[u("td",null,[e[11]||(e[11]=u("span",null,"IP 地址",-1)),e[12]||(e[12]=u("span",{class:"margin-right"}," : ",-1)),(l(!0),t(r,null,p(f.value.status.addresses,(a=>(l(),t("span",{key:a.index},[u("span",null,i(a.type)+" : "+i(a.address),1),e[9]||(e[9]=c()),e[10]||(e[10]=u("br",null,null,-1))])))),128))])]),u("tr",null,[u("td",ga,[e[13]||(e[13]=u("span",null,"标签",-1)),e[14]||(e[14]=u("span",{class:"margin-right"}," : ",-1)),(l(!0),t(r,null,p(f.value.metadata.labels,((a,e,s)=>(l(),t("span",{key:s},[u("span",ka,i(a)+": "+i(e),1)])))),128))])]),u("tr",null,[u("td",wa,[e[15]||(e[15]=u("span",null,"注解",-1)),e[16]||(e[16]=u("span",null," :",-1)),(l(!0),t(r,null,p(f.value.metadata.annotations,((a,e,s)=>(l(),t("span",{key:s},[u("span",ha,i(a)+": "+i(e),1)])))),128))])]),u("tr",null,[u("td",null,[e[17]||(e[17]=u("span",null,"系统镜像",-1)),e[18]||(e[18]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.osImage),1)]),u("td",null,[e[19]||(e[19]=u("span",null,"内核版本",-1)),e[20]||(e[20]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.kernelVersion),1)])]),u("tr",null,[u("td",null,[e[21]||(e[21]=u("span",null,"Kubelet 版本",-1)),e[22]||(e[22]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.kubeletVersion),1)]),u("td",null,[e[23]||(e[23]=u("span",null,"Kube-Proxy 版本",-1)),e[24]||(e[24]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.kubeProxyVersion),1)])]),u("tr",null,[u("td",null,[e[25]||(e[25]=u("span",null,"机器 ID",-1)),e[26]||(e[26]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.machineID),1)]),u("td",null,[e[27]||(e[27]=u("span",null,"系统 UUID",-1)),e[28]||(e[28]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.systemUUID),1)])]),u("tr",null,[u("td",null,[e[29]||(e[29]=u("span",null,"启动 ID",-1)),e[30]||(e[30]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.bootID),1)]),u("td",null,[e[31]||(e[31]=u("span",null,"容器运行时版本",-1)),e[32]||(e[32]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.containerRuntimeVersion),1)])]),u("tr",null,[u("td",null,[e[33]||(e[33]=u("span",null,"操作系统",-1)),e[34]||(e[34]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.operatingSystem),1)]),u("td",null,[e[35]||(e[35]=u("span",null,"架构",-1)),e[36]||(e[36]=u("span",{class:"margin-right"}," : ",-1)),u("span",null,i(f.value.status.nodeInfo.architecture),1)])]),u("tr",null,[u("td",_a,[e[37]||(e[37]=u("span",null,"污点 （Taints）",-1)),e[38]||(e[38]=u("span",{class:"margin-right"}," : ",-1)),(l(!0),t(r,null,p(f.value.spec.taints,((a,e)=>(l(),s(v,{key:e,style:{background:"#999999",color:"white"}},{default:n((()=>[c(i(a.key)+": "+i(a.value)+" Effect: "+i(a.effect),1)])),_:2},1024)))),128))])])])]),e[40]||(e[40]=u("div",{class:"pull-left"},[u("h4",null,"状态")],-1)),e[41]||(e[41]=u("p",null,null,-1)),u("div",null,[o(j,{data:f.value.status.conditions,stripe:"",style:{width:"100%"}},{default:n((()=>[o(y,{label:"类型",prop:"type",type:"scope"},{default:n((a=>[u("span",null,i(a.row.type),1)])),_:1}),o(y,{label:"状态",prop:"status",type:"scope"},{default:n((a=>[u("span",null,i(a.row.status),1)])),_:1}),o(y,{label:"更新时间",prop:"status",type:"scope"},{default:n((a=>[u("span",null,i(m(g)(a.row.lastTransitionTime)),1)])),_:1}),o(y,{label:"内容",prop:"reason",type:"scope"},{default:n((a=>[a.row.reason?(l(),t("span",ja,i(a.row.reason),1)):(l(),t("span",ba,"-"))])),_:1}),o(y,{label:"消息",prop:"message",type:"scope"},{default:n((a=>[a.row.message?(l(),t("span",Ca,i(a.row.message),1)):(l(),t("span",Ia,"-"))])),_:1})])),_:1},8,["data"])]),e[42]||(e[42]=u("div",{class:"pull-left"},[u("h4",null,"容器组")],-1)),e[43]||(e[43]=u("p",null,null,-1)),u("div",xa,[o(b,{style:{width:"100%"}},{default:n((()=>[o(ra,{data:f.value},null,8,["data"])])),_:1})])])):d("",!0)}}}),[["__scopeId","data-v-4c367b30"]]);export{Va as default};
