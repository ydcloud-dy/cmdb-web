/*! 
 Build based on  
 Time : 1735190558000 */
import{x as e}from"./xterm.BR7SOqRe.js";import{x as t}from"./xterm-addon-fit.onOJMBm7.js";import{a as o,_ as a,o as n,c as s,b as r}from"./index.ABWJOL2Q.js";const i=o("https://"),l=o(void 0);const c=a({name:"LogsConsole",props:{data:{type:Object,default:()=>({})},name:{type:String,default:()=>""}},data:()=>({term:null,terminalSocket:null}),mounted(){this.initWebSocket()},beforeDestroy(){this.terminalSocket.close(),this.term.destroy()},methods:{initWebSocket(){const o=document.getElementById("terminal"),a=document.body.clientHeight,n=a/18,s=a/2;this.term=new e.Terminal({cols:parseInt(s.toString(),10),rows:parseInt(n.toString(),10),rendererType:"canvas",convertEol:!0,disableStdin:!1,scrollback:100,cursorBlink:!0,cursorStyle:"bar",fontSize:14,windowsMode:!0,theme:{foreground:"#FFFFFF",background:"#000000",cursor:"help",lineHeight:16}});const r=new t.FitAddon;this.term.loadAddon(r),r.fit(),this.term.open(o),-1!==i.value.indexOf("http")?i.value=i.value.replace("http","ws"):-1!==i.value.indexOf("https")&&(i.value=i.value.replace("https","wss"));const c=localStorage.getItem("token"),m="".concat(i.value,":").concat(l.value,"/kubernetes/pods/logs?name=").concat(this.name,"&cluster_id=").concat(this.data.cluster_id,"&pod_name=").concat(this.data.metadata.name,"&namespace=").concat(this.data.metadata.namespace,"&x-token=").concat(c,"&cols=").concat(this.term.cols,"&rows=").concat(this.term.rows);this.terminalSocket=new WebSocket(m),this.terminalSocket.onopen=this.runRealTerminal,this.terminalSocket.onmessage=this.onConnectionMessage,this.terminalSocket.onclose=this.closeRealTerminal,this.terminalSocket.onerror=this.errorRealTerminal,this.term._initialized=!0},onConnectionMessage(e){this.term.write(e.data)},runRealTerminal(){this.term.focus()},errorRealTerminal(){},closeRealTerminal(){}}},[["render",function(e,t,o,a,i,l){return n(),s("div",null,t[0]||(t[0]=[r("div",{id:"terminal",width:"100%",style:{overflow:"auto"},class:"console"},null,-1)]))}]]);export{c as P};
