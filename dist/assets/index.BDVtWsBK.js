/*! 
 Build based on  
 Time : 1735190558000 */
import{a as e,o as a,c as l,b as s,e as t,w as o,g as i,f as u,t as r,F as n,i as d,k as m,E as p}from"./index.ABWJOL2Q.js";import{E as c}from"./drawer.XhtctEYG.js";import"./overlay.CDLw2uOw.js";import{E as v,a as f}from"./descriptions-item.C4J2YVui.js";import{E as j}from"./dialog.DdLHJsLF.js";import{E as g}from"./pagination.BfYt3rvk.js";/* empty css            */import"./select.C2tLDQ30.js";import"./scrollbar.3ySweVnY.js";/* empty css               *//* empty css              */import{E as y}from"./popover.DFR01WU1.js";/* empty css             *//* empty css               */import{a as b,E as _}from"./form-item.ujPiwBAF.js";import{d as h,g as w,a as k,b as x,c as z,u as C}from"./environment.Z24KwZWA.js";import V from"./form.MpNJb7_I.js";import E from"./table.CkbgU6Gp.js";import{s as D}from"./cloud_region.DtcSymib.js";import{d as U}from"./dayjs.min.DOWqlKAh.js";import"./index.BRjlB3m5.js";import"./index.D4uEcQv3.js";import"./refs.CZv2DkwS.js";import"./isEqual.CtpQH3Dm.js";import"./_Uint8Array.BjvNwsUf.js";import"./index.DglrVZRl.js";import"./token.DWNpOE8r.js";import"./strings.C2tuonvC.js";import"./castArray.9wqFpW2Z.js";import"./debounce.CkdGDwJt.js";import"./_baseIteratee.BPaQBmlP.js";import"./index.6ock-Gvr.js";import"./dropdown.Co_mIot6.js";import"./_baseClone.gl1e0kmI.js";import"./_initCloneObject.jmqS1x-g.js";import"./table-column.ChuwY-lb.js";import"./checkbox.BcMUmSPv.js";/* empty css                */import"./stringFun.hIDu-B3o.js";const I={class:"dycloud-search-box"},S={class:"dycloud-table-box"},A={class:"dycloud-btn-list"},F={style:{"text-align":"right","margin-top":"8px"}},Y={key:0},H={class:"dycloud-pagination"},M={key:0},N={name:"Index"},O=Object.assign(N,{setup(N){const O=e({}),q=e(1),B=e(0),G=e(10),L=e([]),P=e(""),R=e({}),J=e(!1),K=e([]),Q=e([]),T=()=>{R.value={}},W=e=>U(e).format("YYYY-MM-DD HH:mm:ss"),X=e=>{R.value=e,ie()},Z=e(!1),$=e({}),ee=async e=>{const a=await h(e.ID);0===a.code&&($.value=a.data,le())},ae=()=>{Z.value=!1,$.value={}},le=()=>{Z.value=!0},se=()=>{q.value=1,G.value=10,ie()},te=e=>{G.value=e,ie()},oe=e=>{q.value=e,ie()},ie=async()=>{const e=await w({page:q.value,pageSize:G.value,keyword:R.value.name});0===e.code&&(L.value=e.data.list,B.value=e.data.total,q.value=e.data.page,G.value=e.data.pageSize)};ie();const ue=e(!1),re=e(""),ne=async e=>{const a=await h(e.ID);re.value="update",P.value="更新",0===a.code&&(O.value=a.data,ue.value=!0)},de=async e=>{0===(await D({id:e.id})).code&&(d({type:"success",message:"操作成功"}),ie())},me=()=>{ue.value=!1,O.value={}},pe=async e=>{e.visible=!1;0===(await k(e.ID)).code&&(d({type:"success",message:"删除成功"}),1===L.value.length&&q.value>1&&q.value--,ie())},ce=e=>{K.value=e},ve=async()=>{const e=K.value.map((e=>e.ID)),a=await x({ids:e});0===a.code&&(d({type:"success",message:a.msg}),L.value.length===e.length&&q.value>1&&q.value--,J.value=!1,ie())},fe=async e=>{let a;switch(re.value){case"create":default:a=await z(e);break;case"update":a=await C(e)}0===a.code&&(me(),(async e=>{0===e.code&&(d({type:"success",message:e.msg}),1===L.value.length&&q.value>1&&q.value--,ie())})(a))};return(e,d)=>{const h=m,w=b,k=p,x=_,z=y,C=g,D=j,U=v,N=f,le=c;return a(),l(n,null,[s("div",null,[s("div",I,[t(x,{ref:"searchForm",inline:!0,model:R.value},{default:o((()=>[t(w,{label:"名称"},{default:o((()=>[t(h,{modelValue:R.value.name,"onUpdate:modelValue":d[0]||(d[0]=e=>R.value.name=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),t(w,null,{default:o((()=>[t(k,{size:"small",type:"primary",icon:"search",onClick:se},{default:o((()=>d[7]||(d[7]=[i("查询")]))),_:1}),t(k,{size:"small",icon:"refresh",onClick:T},{default:o((()=>d[8]||(d[8]=[i("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),s("div",S,[s("div",A,[t(k,{size:"small",type:"primary",icon:"plus",onClick:d[1]||(d[1]=e=>(re.value="create",P.value="创建",void(ue.value=!0)))},{default:o((()=>d[9]||(d[9]=[i("新增")]))),_:1}),t(z,{modelValue:J.value,"onUpdate:modelValue":d[4]||(d[4]=e=>J.value=e),placement:"top",width:"160"},{reference:o((()=>[t(k,{icon:"delete",size:"small",disabled:!K.value.length,style:{"margin-left":"10px"},onClick:d[3]||(d[3]=e=>J.value=!0)},{default:o((()=>d[12]||(d[12]=[i("删除")]))),_:1},8,["disabled"])])),default:o((()=>[d[13]||(d[13]=s("p",null,"确定要删除吗？",-1)),s("div",F,[t(k,{size:"small",type:"primary",link:"",onClick:d[2]||(d[2]=e=>J.value=!1)},{default:o((()=>d[10]||(d[10]=[i("取消")]))),_:1}),t(k,{size:"small",type:"primary",onClick:ve},{default:o((()=>d[11]||(d[11]=[i("确定")]))),_:1})])])),_:1},8,["modelValue"])]),L.value?(a(),l("div",Y,[t(E,{"table-data":L.value,onUpdate:ne,onSearch:X,onDetail:ee,onSelect:ce,onDelete:pe,onRegion:de},null,8,["table-data"])])):u("",!0)]),s("div",H,[t(C,{"current-page":q.value,"page-size":G.value,"page-sizes":[10,30,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:oe,onSizeChange:te},null,8,["current-page","page-size","total"])]),ue.value?(a(),l("div",M,[t(D,{modelValue:ue.value,"onUpdate:modelValue":d[5]||(d[5]=e=>ue.value=e),width:"40%",title:P.value,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{default:o((()=>[t(V,{form:O.value,regions:Q.value,onClose:me,type:re.value,onEnter:fe},null,8,["form","regions","type"])])),_:1},8,["modelValue","title"])])):u("",!0)]),t(le,{"destroy-on-close":"",size:"600",modelValue:Z.value,"onUpdate:modelValue":d[6]||(d[6]=e=>Z.value=e),"show-close":!0,"before-close":ae},{default:o((()=>[t(N,{column:1,border:""},{default:o((()=>[t(U,{label:"环境名称"},{default:o((()=>[i(r($.value.name),1)])),_:1}),t(U,{label:"环境标识"},{default:o((()=>[i(r($.value.key),1)])),_:1}),t(U,{label:"描述信息"},{default:o((()=>[i(r($.value.desc),1)])),_:1}),t(U,{label:"创建人"},{default:o((()=>[i(r($.value.CreatedName),1)])),_:1}),t(U,{label:"创建时间"},{default:o((()=>[i(r(W($.value.CreatedAt)),1)])),_:1}),t(U,{label:"修改时间"},{default:o((()=>[i(r(W($.value.UpdatedAt)),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}});export{O as default};
